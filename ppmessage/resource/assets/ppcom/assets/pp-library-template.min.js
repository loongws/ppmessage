!function(){function PPMessage(jQuery){function extend(e,t){e.prototype=function(e){function n(){}return e?Object.create(t.prototype):(n.prototype=t.prototype,new n)}(void 0!==Object.create),e.prototype.constructor=e}var fn={$:jQuery,Service:{},View:{},Modal:{},Controller:{},Factory:{},Configuration:{},Toolkit:{}},$=fn.$,Service=fn.Service,View=fn.View,Modal=fn.Modal,Controller=fn.Controller,Factory=fn.Factory,Ctrl=Controller,Configuration=fn.Configuration,Toolkit=fn.Toolkit,$timeout=setTimeout,$clearTimeout=clearTimeout,$onResult=function(e,t){t&&t(e)};Configuration={api_key:"{ppcom_api_key}",api_secret:"{ppcom_api_secret}",assets_path:"{ppcom_assets_path}",portal:"{portal}",api:"{api}",auth:"{auth}",web_socket_url:"{web_socket_url}",file_upload_url:"{file_upload_url}",file_upload_txt_url:"{file_upload_txt_url}",file_download_url:"{file_download_url}"},function(e,t){"use strict";var n=function(t,n){this.$element=e(t),this.options=e.extend({},self.DEFAULTS,n),this.$scroll=e(n.scroll),this.flags={prevented:!1,moving:!1,touched:!1,isTouch:!1,refreshed:!1},this.positions={startY:0,startX:0,lastStep:0,delta:0}};n.key="pulltorefresh",n.DEFAULTS={orientation:"down",sensibility:5,refresh:70,click:1e-6,lockRefresh:!1,resetRefresh:!0,autoInit:!0,resetSpeed:"100ms",simulateTouch:!0,threshold:20,scroll:t},n.namespace=function(e){return[e,n.key].join(".")},n.support={touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&t instanceof DocumentTouch)}()},n.events=function(){if(n.support.touch)return{start:n.namespace("touchstart"),move:n.namespace("touchmove"),end:n.namespace("touchend")};var e={start:n.namespace("mousedown"),move:n.namespace("mousemove"),end:n.namespace("mouseup")};return window.navigator.msPointerEnabled&&(e={start:n.namespace("MSPointerDown"),move:n.namespace("MSPointerMove"),end:n.namespace("MSPointerUp")}),window.navigator.pointerEnabled&&(e={start:n.namespace("pointerdown"),move:n.namespace("pointermove"),end:n.namespace("pointerup")}),e}(),n.prototype.construct=function(){var i=this;i.$element.on(n.events.start,i.proxy(i.onTouchStart,i)).on(n.events.move,i.proxy(i.onTouchMove,i)).on(n.events.end,i.proxy(i.onTouchEnd,i)),i.options.simulateTouch&&(i.$element.on(n.namespace("mousedown"),i.proxy(i.onTouchStart,i)),e(t).on(n.namespace("mousemove"),i.$element,i.proxy(i.onTouchMove,i)).on(n.namespace("mouseup"),i.$element,i.proxy(i.onTouchEnd,i)))},n.prototype.destroy=function(){this.remove_transition(this.$element[0].style),this.remove_transform(this.$element[0].style),e(t).off(n.namespace("")),this.$element.off(n.namespace("")),this.$element.removeData("pulltorefresh")},n.prototype.proxy=function(){var t=!!Function.prototype.bind;return t?function(e,t){return e.bind(t)}:e.proxy?e.proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),"function"!=typeof e?(i=Array.prototype.slice.call(arguments,2),r=function(){return e.apply(t||this,i.concat(slice.call(arguments)))},r.guid=e.guid=e.guid||jQuery.guid++,r):void 0}}(),n.prototype.transform=function(e,t){e.webkitTransform="translate(0, "+t+"px) translateZ(0)",e.msTransform=e.MsTransform=e.MozTransform=e.OTransform=e.transform="translateY("+t+"px)"},n.prototype.transition=function(e,t){e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=t},n.prototype.remove_transition=function(e){e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=null},n.prototype.remove_transform=function(e){e.webkitTransform=e.msTransform=e.MsTransform=e.MozTransform=e.OTransform=e.transform=null},n.prototype.getAxis=function(e,t){return{x:t?(e.targetTouches||e.originalEvent.targetTouches)[0].pageX:e.pageX||e.clientX,y:t?(e.targetTouches||e.originalEvent.targetTouches)[0].pageY:e.pageY||e.clientY}},n.prototype.onTouchStart=function(e){var t="touchstart"===e.type,i=this.getAxis(e,t);return this.$scroll.scrollTop()>0?!0:void((t||1===e.which)&&(this.flags.touched=!0,this.flags.refreshed=!1,this.flags.isTouch=t,this.positions.startY=i.y,this.positions.startX=i.x,this.$element.trigger(n.namespace("start"),[i.y]),this.transition(this.$element[0].style,"0ms")))},n.prototype.onTouchMove=function(e){var t,i,r,o,a="touchmove"===e.type;if(this.flags.touched&&(!this.flags.isTouch||"mousemove"!==e.type)){if(!this.flags.prevented&&e.target&&(e.target.click||e.target.onclick)&&(this.flags.prevented=!0),o=this.getAxis(e,a),t=o.y-this.positions.startY,this.positions.delta=t,Math.abs(o.x-this.positions.startX)>this.options.threshold)return void this.reset();if(!(0>t&&"down"==this.options.orientation||t>=0&&"up"==this.options.orientation))return(0>t?-1*t:t)>=this.options.refresh&&!this.flags.refreshed&&(this.$element.trigger(n.namespace("refresh"),[o.y]),this.flags.refreshed=!0,this.options.resetRefresh)?void this.reset():void(this.flags.refreshed&&this.options.lockRefresh||(i=parseInt(t/this.options.sensibility,10),this.positions.lastStep!=i&&(r=parseInt(100*t/this.options.refresh,10),this.$element.trigger(n.namespace("move"),r),this.positions.lastStep=i),this.transform(this.$element[0].style,t),e.stopPropagation(),e.preventDefault()))}},n.prototype.reset=function(){this.transition(this.$element[0].style,this.options.resetSpeed),this.transform(this.$element[0].style,0),this.flags.touched=!1,this.flags.isTouch=!1,this.flags.refreshed=!1,this.positions.startY=!1,this.positions.delta=0},n.prototype.onTouchEnd=function(t){if(this.flags.touched){var i=this.positions.delta;this.flags.prevented=!1,this.positions.startY=0,this.positions.startX=0,this.reset(),this.$element.trigger(n.namespace("end")),t.stopPropagation(),t.preventDefault();var r=t.target.click||t.target.onclick;r&&Math.abs(i)<=this.options.click&&e(t.target).trigger("click")}};var i=e.fn.pullToRefresh;e.fn.pullToRefresh=function(t){return this.each(function(){var i=e(this),r=i.data(n.key),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);return r||"destroy"!=t?(r||(i.data(n.key,r=new n(this,o)),o.autoInit&&r.construct()),void("string"==typeof t&&r[t].apply(r))):n.destroy()})},e.fn.pullToRefresh.Constructor=n,e.fn.pullToRefresh.noConflict=function(){return e.fn.pullToRefresh=i,this}}($,"#pp-conversation-content"),function(e){e.extend(e.easing,{easeInQuart:function(e,t,n,i,r){return i*(t/=r)*t*t*t+n}})}($),function(){Service._booted=!1,Service.bootMe=function(e){Service._booted&&!e||(Service.$cookies=new Service.PPCookies,Service.$tools=new Service.PPTools,Service.$errorHint=new Service.ErrorHint,Service.$publicApi=new Service.PublicAPI,Service.$startUp=new Service.PPStartUp(Service.$api,Service.$device),Service.$conversationManager.init(),Service._booted=!0)}}(),function(e){function t(){}e.BaseService=t}(Service),function(e){function t(){}t.ICON_DEFAULT_LAUNCHER=Configuration.assets_path+"img/logo_1.png",t.DEFAULT_HEADER_TITLE="PPMessage",t.ICON_DEFAULT_USER=Configuration.assets_path+"img/logo_1.png",t.USER_DEFAULT_NAME="Anonymous",t.STYLE={EMOJI_PANEL_DEFAULT_BOTTOM_MARGIN:67},t.EVENT={NEW_MESSAGE_ARRIVED:"message:NEW_ARRIVED",ON_TEXTAREA_HEIGHT_CHANGED:"textarea:height-change"},t.MESSAGE={TYPE_TEXT:"TEXT",TYPE_EMOJI:"EMOJI",TYPE_IMAGE:"IMAGE",TYPE_FILE:"FILE",TYPE_WELCOME:"WELCOME",TYPE_TIMESTAMP:"TIMESTAMP",TO_TYPE:"P2S",TEXT_MAX_LEN:128},t.MAX_UPLOAD_SIZE=4194304,t.MAX_UPLOAD_SIZE_STR="4MB",t.MESSAGE_TYPE={NOTI:"NOTI",SYS:"SYS"},t.FILE={ROOT:"PP"},t.MESSAGE_SUBTYPE={AUDIO:"AUDIO",VIDEO:"VIDEO",DOCUMENT:"DOCUMENT",FILE:"FILE",TEXT:"TEXT",IMAGE:"IMAGE",SINGLE_CARD:"SINGLE_CARD",MULTIPLE_CARD:"MULTIPLE_CARD",TXT:"TXT",MENU:"MENU",EVENT:"EVENT",GPS_LOCATION:"GPS_LOCATION",INVITE_CONTACT:"INVITE_CONTACT",ACCEPT_CONTACT:"ACCEPT_CONTACT",REMOVE_CONTACT:"REMOVE_CONTACT",DG_INVITED:"DG_INVITED",DG_REMOVED:"DG_REMOVED",REQUEST_JOIN_OG:"REQUEST_JOIN_OG",APPROVE_JOIN_OG:"APPROVE_JOIN_OG",LOGOUT:"LOGOUT"},t.I18N={"zh-CN":{START_CONVERSATION_HINT:"按“回车键”发送",START_CONVERSATION_MOBILE_HINT:"",ERROR_TEXT_TOO_LONG:"字数太长",WELCOME_MSG:"您好，请问有什么可以帮助您的？",CLOSE_BUTTON_HINT:"结束会话",MINIZE_BUTTON_HINT:"最小化",MAXIMUM_UPLOAD_SIZE_HINT:"最大文件大小为",PPMESSAGE:"皮皮消息",HOVER_CARD_TEXTAREA_HINT:"开始对话",DEFAULT_SERVE_NAME:"客服",UPLOADING_HINT:"正在上传",SEND:"发送",WAITING_AVALIABLE_CONVERSATION:"正在等待客服...",WAITING_LENGTH_HINT:"正在排队中，当前共有%s人正在等待",LOAD_HISTORY_HINT:"点击加载历史消息",LOAD_HISTORY_MOBILE_HINT:"下拉加载历史消息",LOADING_HISTORY:"正在加载...",NO_MORE_HISTORY:"没有更多历史消息",IMAGE:"图片",FILE:"文件",AUDIO:"语音",SEND_ERROR:"发送失败",SERVICE_NOT_AVALIABLE:"服务不可用",CANCELED:"已取消",CLOSE:"关闭",CONSULT_WORKING_TIME:"服务时间",CONTACT_NUMBER:"联系电话",ONLINE:"在线",OFFLINE:"离线",SYSTEM_MSG:"系统消息",TYPING:"对方正在输入...",AUDIO_PLAY_ERROR:"播放失败",timeFormat:function(t){return e.$tools.formatTime(t,{year:"年",month:"月",day:"日",today:"今天",yesterday:"昨天"})}},en:{START_CONVERSATION_HINT:'Press "Enter key" to send',START_CONVERSATION_MOBILE_HINT:"",ERROR_TEXT_TOO_LONG:"Text is too long",WELCOME_MSG:"Hello, what can I do for you ?",CLOSE_BUTTON_HINT:"Close Conversation",MINIZE_BUTTON_HINT:"Minimization",MAXIMUM_UPLOAD_SIZE_HINT:"The maximum upload size is ",PPMESSAGE:"PPMessage",HOVER_CARD_TEXTAREA_HINT:"Start a conversation",DEFAULT_SERVE_NAME:"Service",UPLOADING_HINT:"Uploading",SEND:"Send",WAITING_AVALIABLE_CONVERSATION:"Waiting service ...",WAITING_LENGTH_HINT:"There are total %s person in the queue",LOAD_HISTORY_HINT:"Click to load history",LOAD_HISTORY_MOBILE_HINT:"Pull to load history",LOADING_HISTORY:"Loading...",NO_MORE_HISTORY:"No more history",IMAGE:"Image",FILE:"File",AUDIO:"Audio",SEND_ERROR:"Send Error",SERVICE_NOT_AVALIABLE:"Service Not Avaliable",CANCELED:"Cancled",CLOSE:"Close",CONSULT_WORKING_TIME:"Online Time",CONTACT_NUMBER:"Contact Number",ONLINE:"Online",OFFLINE:"Offline",SYSTEM_MSG:"System message",TYPING:"Typing...",AUDIO_PLAY_ERROR:"Play Error",timeFormat:function(t){return e.$tools.formatTime(t,{year:"-",month:"-",day:"",today:"Today",yesterday:"Yesterday"})}}},t.i18n=function(t){return e.Constants.I18N[e.$language.getLanguage()][t]},e.Constants=t}(Service),function(e){function t(){var t=null,n=null,i=null,r=null,o=function(t,n){e.$debug.d("[PPAPI] [Error]: ",t),e.$errorHint.warn(e.ErrorHint.ERROR_SERVICE_NOT_AVALIABLE),n&&n(t)},a=function(t,n){e.$debug.d("[PPAPI] [Fail]: ",t),n&&n(t)},s=function(t,n){e.$debug.d("[PPAPI] [Success]: ",t),n&&n(t)},c=function(e,t,n){if(e&&void 0!==e.error_code){var i=!1;switch(e.error_code){case 0:i=!0}i?s(e,t):a(e,n)}else a(e,n)},u=function(t,n){e.$debug.d("[PPAPI] [Request]: ",t,n)};this._post=function(n,i,r,a){if(null==t)return e.$debug.d("[PPAPI] [Error]: ","no token"),void e.$errorHint.warn(e.ErrorHint.ERROR_SERVICE_NOT_AVALIABLE);var s=Configuration.api+n;$.support.cors=!0,$.ajax({url:s,type:"post",data:e.$json.stringify(i),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"OAuth "+t},cache:!1,crossDomain:!0,beforeSend:function(){u(s,i)},success:function(e){c(e,r,a)},error:function(e,t,n){o(t,a)}})},this.init=function(e,t,o){r=e,n=t,i=o},this.getPPComToken=function(e,r){var a=Configuration.auth+"/token",c="client_id="+n+"&client_secret="+i+"&grant_type=client_credentials";$.support.cors=!0,$.ajax({url:a,type:"post",data:c,headers:{"Content-Type":"application/x-www-form-urlencoded"},cache:!1,crossDomain:!0,beforeSend:function(){u(a,c)},success:function(n){t=n.access_token,s(n,e)},error:function(e,t,n){o(t,r)}})},this.updateUser=function(e,t,n){this._post("/PP_UPDATE_USER",$.extend({},e),t,n)},this.getConversationList=function(e,t,n){this._post("/PP_GET_USER_CONVERSATION_LIST",$.extend({},e),t,n)},this.getConversation=function(e,t,n){this.getConversationList(e,t,n)},this.createConversation=function(e,t,n){this._post("/PP_CREATE_CONVERSATION",$.extend({},e),t,n)},this.sendMessage=function(e,t,n){this._post("/PP_SEND_MESSAGE",e,t,n)},this.getUnackedMessages=function(e,t,n){this._post("/GET_UNACKED_MESSAGES",$.extend({},e),t,n)},this.ackMessage=function(e,t,n){this._post("/ACK_MESSAGE",$.extend({},e),t,n)},this.createAnonymousUser=function(e,t,n){this._post("/PP_CREATE_ANONYMOUS",$.extend({},e),t,n)},this.createDevice=function(e,t,n){this._post("/PP_CREATE_DEVICE",$.extend(!0,{},e),t,n)},this.updateDevice=function(e,t,n){this._post("/PP_UPDATE_DEVICE",$.extend({},e),t,n)},this.getUserUuid=function(e,t,n){this._post("/PP_GET_USER_UUID",$.extend({},e),t,n)},this.getUserDetailInfo=function(e,t,n){this._post("/GET_YVOBJECT_DETAIL",$.extend({},e),t,n)},this.getMessageHistory=function(e,t,n){this._post("/PP_GET_HISTORY_MESSAGE",$.extend({},e),t,n)},this.getAppInfo=function(e,t,n){this._post("/PP_GET_APP_INFO",$.extend({},e),t,n)},this.getWelcomeTeam=function(e,t,n){this._post("/PP_GET_WELCOME_TEAM",$.extend({},e),t,n)},this.getDefaultConversation=function(e,t,n){this._post("/PP_GET_DEFAULT_CONVERSATION",$.extend({},e),t,n)},this.getConversationUserList=function(e,t,n){this._post("/PP_GET_CONVERSATION_USER_LIST",$.extend({},e),t,n)},this.cancelWaitingCreateConversation=function(e,t,n){this._post("/PP_CANCEL_WAITING_CREATE_CONVERSATION",$.extend({},e),t,n)},this.getPPComDefaultConversation=function(e,t,n){this._post("/PPCOM_GET_DEFAULT_CONVERSATION",$.extend({},e),t,n)},this.createPPComConversation=function(e,t,n){this._post("/PPCOM_CREATE_CONVERSATION",$.extend({},e),t,n)},this.getConversationInfo=function(e,t,n){this._post("/PP_GET_CONVERSATION_INFO",$.extend({},e),t,n)},this.getWaitingQueueLength=function(e,t,n){this._post("/PP_GET_AMD_QUEUE_LENGTH",$.extend({},e),t,n)},this.getAppUuid=function(){return r},this.getApiToken=function(){return t}}e.$api=new t}(Service),Service.$rootCache=function(){var e={},t=function(t){return e[t]},n=function(t,n){e[t]=n},i=function(t){return void 0!==e[t]};return{get:t,set:n,exist:i}}(),function(e){function t(){}t.prototype._api=function(e,t,n){if(arguments.length>1){if(n=n||{},"number"==typeof n.expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+1e3*n.expires),n.expires=i}return document.cookie=[e,"=",t,n.expires&&"; expires="+n.expires.toUTCString(),n.path&&"; path="+n.path,n.domain&&"; domain="+n.domain,n.secure?"; secure":""].join("")}for(var r,o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),c=s[0],t=s[1];if(c===e){r=t;break}}return r},t.prototype.set=function(e,t,n){return this._api(e,t,n)},t.prototype.get=function(e){return this._api(e)},e.PPCookies=t}(Service),function(e){function t(){}t.ERROR_ILLEGAL_APPUUID=1e4,t.ERROR_ILLEGAL_USER_EMAIL=10001,t.ERROR_IE9_OR_LOWER_BROWSER=10002,t.ERROR_SERVICE_NOT_AVALIABLE=10003,t.ERROR_ILLEGAL_USER_EMAIL_STYLE=10004,t._ERROR_INFO={1e4:"appUuid not provide, Please check your appUuid and try again",10001:"Can not find user by the user_email, please check your user_email and try again",10002:"Can not run ppMessage on IE 9 or lower version browser",10003:"Service not avaliable",10004:"Not a valid user_email"},t.prototype._getErrorDescription=function(e){for(var n in t._ERROR_INFO)if(n==e)return t._ERROR_INFO[n];return""},t.prototype._getErrorLogDescription=function(e){return"number"==typeof e?"PPMessage: [errorCode:"+e+", errorDescription:'"+this._getErrorDescription(e)+"']":e},t.prototype.warn=function(e){window.console&&window.console.warn&&console.warn(this._getErrorLogDescription(e))},t.prototype.error=function(e){window.console&&window.console.error&&console.error(this._getErrorLogDescription(e))},e.ErrorHint=t}(Service),function(e){var t=function(){function t(n){var i=$.extend({},t.DEFAULTS,n),r=function(e){return e.user_uuid?e.user_fullname&&e.user_fullname!=i.user_fullname||e.user_avatar&&e.user_avatar!=i.user_avatar:!1},o=function(e){return e.user_uuid?e.is_online!==i.is_online:!1};this.getInfo=function(){return i},this.update=function(t){if(!t.user_uuid)return this;var n=r(t),a=o(t);return i=$.extend({},i,t),n&&e.$pubsub.publish("user/infochange/"+i.user_uuid,this),a&&e.$pubsub.publish("user/infochange/state/"+i.user_uuid,this),this}}function n(e){return new t(e)}function i(e){return d[e]}function r(e,t){e&&t&&(d[e]=t)}function o(){d={}}function a(e){return e?void 0!==d[e]:!1}function s(t,o){if(a(t.user_uuid))return u(t),void(o&&o(i(t.user_uuid)));if(t.user_uuid&&t.user_fullname&&t.user_avatar){var s=n(t);return r(t.user_uuid,s),void(o&&o(s))}e.$api.getUserDetailInfo({uuid:t.user_uuid,type:"DU"},function(i){var a=$.extend({},{user_email:i.email,user_fullname:i.fullname?i.fullname:e.Constants.USER_DEFAULT_NAME,user_uuid:i.uuid,user_avatar:i.icon?e.$tools.getFileDownloadUrl(i.icon):e.Constants.ICON_DEFAULT_USER},t),s=n(a);r(t.user_uuid,s),o&&o(s)},function(e){o&&o(null)})}function c(){return d}function u(e){e&&e.user_uuid&&a(e.user_uuid)&&i(e.user_uuid).update(e)}function p(t){if(t){var n=t.uuid||t.user_uuid,i=e.$tools.icon.get(t.user_icon||t.icon||t.user_avatar),r=t.user_fullname,o=t.is_mobile_online||t.is_browser_online,a=t.is_browser_online,s=t.is_mobile_online,c=t.user_signature?t.user_signature:"";return{user_uuid:n,user_fullname:r,user_avatar:i,user_signature:c,is_online:o,is_browser_online:a,is_mobile_online:s}}}function l(e){if(e&&e.user_uuid){var t=e.user_uuid;return a(t)?i(t).update(e):(r(t,n(e)),i(t))}}var d={};return t.DEFAULTS={is_portal_user:!1,is_anonymous:!0,ppcom_trace_uuid:null,user_fullname:e.Constants.USER_DEFAULT_NAME,user_avatar:e.Constants.ICON_DEFAULT_USER,user_uuid:"",device_uuid:"",user_signature:"",is_browser_online:!1,is_mobile_online:!1,is_online:!1},{createUser:n,getUser:i,getOrCreateUser:l,asyncGetUser:s,getUsers:c,setUser:r,updateUser:u,adapter:p,clear:o,exist:a}}();e.$users=t}(Service),Service.$user=function(){function e(e){return e?Service.$users.getUser(e):void 0}function t(t){if(t){var n=e(t),i=n&&n.getInfo();return i}}var n=null;return{getUser:function(){return n?e(n):null},setUser:function(e){n=e.user_uuid,Service.$users.setUser(n,Service.$users.createUser(e))},offline:function(){if(n){var i=t(n);i&&i.device_uuid&&i.is_online&&e(n).update({user_uuid:n,is_online:!1})}},online:function(){if(n){var i=t(n);i&&i.device_uuid&&!i.is_online&&e(n).update({user_uuid:n,is_online:!0})}},clear:function(){n=null},quickId:function(){return n},quickDeviceUUID:function(){var e=t(n);return e&&e.device_uuid}}}(),function(){var e=function(){var e=null,t=null,n="pp-id",i={app_uuid:null,api_key:null,api_secret:null,user_email:null,user_name:null,user_icon:null,language:window.navigator.userLanguage||window.navigator.language,view:{launcher_bottom_margin:"20px",launcher_right_margin:"20px",launcher_is_show:!0}},r=function(t){e=$.extend({},i,t),e.api_key=Configuration.api_key,e.api_secret=Configuration.api_secret},o=function(){if(null==e)return null;if(null!=t)return t;var i=!e.user_email;return t={user_email:e.user_email,user_fullname:e.user_name,user_avatar:e.user_icon,user_uuid:null,device_uuid:null,is_portal_user:!0,is_anonymous:i,ppcom_trace_uuid:function(){if(!i)return null;var e=Service.$cookies.get(n)||function(){var e=Service.$tools.getUUID();return Service.$cookies.set(n,e,{expires:47304e4}),e}();return e}()}},a=function(e){t=$.extend(o(),e)},s=function(){return e.language},c=function(){return e.app_uuid},u=function(){return e.api_key},p=function(){return e.api_secret},l=function(){e=null,t=null};return{init:r,getUserSettings:o,updateUserSettings:a,getLanguage:s,getAppUuid:c,getApiKey:u,getApiSecret:p,clear:l}}();Service.$ppSettings=e}(),function(e){function t(){var e=!0,t=!1,n=!("undefined"==typeof console||"undefined"==typeof console.log),i=n&&!("unknown"==typeof console.log.apply||"undefined"==typeof console.log.apply),r="↓↓↓↓↓↓↓↓↓↓",o="font-size:28px; color:blue;";this.h=function(){if(n){if(e){var t="%c"+r;this.d(t,o)}return this}},this.d=function(){if(n){if(e)if(t)t=!1;else{var r=Array.prototype.slice.call(arguments);i?console.log.apply(console,r):console.log(r)}return this}},this.error=function(){if(n){if(e)if(t)t=!1;else{var r=Array.prototype.slice.call(arguments);i?console.error.apply(console,r):console.error(r)}return this}},this.close=function(e){return this},this.debug=function(t){return e=t,this}}e.$debug=new t}(Service),function(e){e.$device=function(){var t,n=window,i=n.innerWidth>0?n.innerWidth:screen.width,r=n.innerHeight>0?n.innerHeight:screen.height,o="pp-device-id",a=31536e4,s=navigator.userAgent,c=navigator.platform,u=/iPhone|iPad|iPod/i.test(s),p=/Android/i.test(s),l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(s),d=/Windows Phone/i.test(s)||/iemobile/i.test(s)||/WPDesktop/i.test(s),f=c.toUpperCase().indexOf("MAC")>=0,h=c.toUpperCase().indexOf("WIN")>-1,g=c.toUpperCase().indexOf("LINUX")>-1,m={MAC:"MAB",LIN:"LIB",WIN:"WIB"};return this.getDeviceWidth=function(){return i},this.getDeviceHeight=function(){return r},this.inMobile=function(){var e=this.getDeviceWidth();return 736>=e},this.disableScroll=function(){$("html, body").css({overflow:"hidden",height:"100%"})},this.enableScroll=function(){$("html, body").css({overflow:"auto",height:"auto"})},this.isIOS=function(){return u},this.isAndroid=function(){return p},this.isMobileBrowser=function(){return l},this.isIE=function(){var e=s,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var r=e.indexOf("Edge/");return r>0?parseInt(e.substring(r+5,e.indexOf(".",r)),10):!1},this.isIE9=function(){var e=this.isIE();return e&&9==e},this.isIE9OrLowerVersionBrowser=function(){var e=this.isIE();return e&&9>=e},this.isWindowsPlatform=function(){return h},this.isMac=function(){return f},this.isFirefox=function(){return"undefined"!=typeof InstallTrigger},this.getOSType=function(){return p||g?m.LIN:u||f?m.MAC:d||h?m.WIN:m.MAC},this.getDeviceId=function(){return t?t:t=e.$cookies.get(o)||function(){var t=e.$tools.getUUID();return e.$cookies.set(o,t,{expires:a}),t}()},this.audioMp3=function(){var e=$("<audio>")[0];return!!e.canPlayType&&!!e.canPlayType("audio/mpeg;").replace(/^no$/,"")},this}()}(Service),function(e){function t(){var e=String.fromCharCode,t={People:[[e(55357,56836),"smile"],[e(55357,56835),"smiley"],[e(55357,56832),"grinning"],[e(55357,56842),"blush"],[e(55357,56841),"wink"],[e(55357,56845),"heart_eyes"],[e(55357,56856),"kissing_heart"],[e(55357,56858),"kissing_closed_eyes"],[e(55357,56860),"stuck_out_tongue_winking_eye"],[e(55357,56861),"stuck_out_tongue_closed_eyes"],[e(55357,56859),"stuck_out_tongue"],[e(55357,56883),"flushed"],[e(55357,56833),"grin"],[e(55357,56852),"pensive"],[e(55357,56844),"relieved"],[e(55357,56850),"unamused"],[e(55357,56862),"disappointed"],[e(55357,56867),"persevere"],[e(55357,56866),"cry"],[e(55357,56834),"joy"],[e(55357,56877),"sob"],[e(55357,56874),"sleepy"],[e(55357,56869),"disappointed_relieved"],[e(55357,56880),"cold_sweat"],[e(55357,56837),"sweat_smile"],[e(55357,56851),"sweat"],[e(55357,56873),"weary"],[e(55357,56875),"tired_face"],[e(55357,56872),"fearful"],[e(55357,56881),"scream"],[e(55357,56864),"angry"],[e(55357,56865),"rage"],[e(55357,56868),"triumph"],[e(55357,56854),"confounded"],[e(55357,56838),"laughing"],[e(55357,56843),"yum"],[e(55357,56887),"mask"],[e(55357,56846),"sunglasses"],[e(55357,56885),"dizzy_face"],[e(55357,56882),"astonished"],[e(55357,56447),"imp"],[e(55357,56870),"open_mouth"],[e(55357,56848),"neutral_face"],[e(55357,56853),"confused"],[e(55357,56847),"smirk"],[e(55357,56434),"man_with_gua_pi_mao"],[e(55357,56435),"man_with_turban"],[e(55357,56430),"cop"],[e(55357,56439),"construction_worker"],[e(55357,56450),"guardsman"],[e(55357,56438),"baby"],[e(55357,56422),"boy"],[e(55357,56423),"girl"],[e(55357,56424),"man"],[e(55357,56425),"woman"],[e(55357,56436),"older_man"],[e(55357,56437),"older_woman"],[e(55357,56433),"person_with_blond_hair"],[e(55357,56444),"angel"],[e(55357,56440),"princess"],[e(55357,56890),"smiley_cat"],[e(55357,56888),"smile_cat"],[e(55357,56891),"heart_eyes_cat"],[e(55357,56893),"kissing_cat"],[e(55357,56892),"smirk_cat"],[e(55357,56896),"scream_cat"],[e(55357,56895),"crying_cat_face"],[e(55357,56889),"joy_cat"],[e(55357,56894),"pouting_cat"],[e(55357,56441),"japanese_ogre"],[e(55357,56442),"japanese_goblin"],[e(55357,56904),"see_no_evil"],[e(55357,56905),"hear_no_evil"],[e(55357,56906),"speak_no_evil"],[e(55357,56448),"skull"],[e(55357,56445),"alien"],[e(55357,56489),"hankey"],[e(55357,56613),"fire"],[e(55356,57119),"star2"],[e(55357,56491),"dizzy"],[e(55357,56485),"boom"],[e(55357,56482),"anger"],[e(55357,56486),"sweat_drops"],[e(55357,56487),"droplet"],[e(55357,56484),"zzz"],[e(55357,56488),"dash"],[e(55357,56386),"ear"],[e(55357,56384),"eyes"],[e(55357,56387),"nose"],[e(55357,56389),"tongue"],[e(55357,56388),"lips"],[e(55357,56397),"thumbs_up"],[e(55357,56398),"thumbs_down"],[e(55357,56396),"ok_hand"],[e(55357,56394),"facepunch"],[e(55357,56395),"wave"],[e(55357,56400),"open_hands"],[e(55357,56390),"point_up_2"],[e(55357,56391),"point_down"],[e(55357,56392),"point_right"],[e(55357,56393),"point_left"],[e(55357,56908),"raised_hands"],[e(55357,56911),"pray"],[e(55357,56399),"clap"],[e(55357,56490),"muscle"],[e(55357,57014),"walking"],[e(55356,57283),"runner"],[e(55357,56451),"dancer"],[e(55357,56427),"couple"],[e(55357,56426),"family"],[e(55357,56463),"couplekiss"],[e(55357,56465),"couple_with_heart"],[e(55357,56431),"dancers"],[e(55357,56902),"ok_woman"],[e(55357,56901),"no_good"],[e(55357,56449),"information_desk_person"],[e(55357,56907),"raising_hand"],[e(55357,56454),"massage"],[e(55357,56455),"haircut"],[e(55357,56453),"nail_care"],[e(55357,56432),"bride_with_veil"],[e(55357,56910),"person_with_pouting_face"],[e(55357,56909),"person_frowning"],[e(55357,56903),"bow"],[e(55356,57257),"tophat"],[e(55357,56401),"crown"],[e(55357,56402),"womans_hat"],[e(55357,56415),"athletic_shoe"],[e(55357,56414),"mans_shoe"],[e(55357,56417),"sandal"],[e(55357,56416),"high_heel"],[e(55357,56418),"boot"],[e(55357,56405),"shirt"],[e(55357,56404),"necktie"],[e(55357,56410),"womans_clothes"],[e(55357,56407),"dress"],[e(55356,57277),"running_shirt_with_sash"],[e(55357,56406),"jeans"],[e(55357,56408),"kimono"],[e(55357,56409),"bikini"],[e(55357,56508),"briefcase"],[e(55357,56412),"handbag"],[e(55357,56413),"pouch"],[e(55357,56411),"purse"],[e(55357,56403),"eyeglasses"],[e(55356,57216),"ribbon"],[e(55356,57090),"closed_umbrella"],[e(55357,56452),"lipstick"],[e(55357,56475),"yellow_heart"],[e(55357,56473),"blue_heart"],[e(55357,56476),"purple_heart"],[e(55357,56474),"green_heart"],[e(55357,56468),"broken_heart"],[e(55357,56471),"heartpulse"],[e(55357,56467),"heartbeat"],[e(55357,56469),"two_hearts"],[e(55357,56470),"sparkling_heart"],[e(55357,56478),"revolving_hearts"],[e(55357,56472),"cupid"],[e(55357,56460),"love_letter"],[e(55357,56459),"kiss"],[e(55357,56461),"ring"],[e(55357,56462),"gem"],[e(55357,56420),"bust_in_silhouette"],[e(55357,56492),"speech_balloon"],[e(55357,56419),"footprints"]],Nature:[[e(55357,56374),"dog"],[e(55357,56372),"wolf"],[e(55357,56369),"cat"],[e(55357,56365),"mouse"],[e(55357,56377),"hamster"],[e(55357,56368),"rabbit"],[e(55357,56376),"frog"],[e(55357,56367),"tiger"],[e(55357,56360),"koala"],[e(55357,56379),"bear"],[e(55357,56375),"pig"],[e(55357,56381),"pig_nose"],[e(55357,56366),"cow"],[e(55357,56343),"boar"],[e(55357,56373),"monkey_face"],[e(55357,56338),"monkey"],[e(55357,56372),"horse"],[e(55357,56337),"sheep"],[e(55357,56344),"elephant"],[e(55357,56380),"panda_face"],[e(55357,56359),"penguin"],[e(55357,56358),"bird"],[e(55357,56356),"baby_chick"],[e(55357,56357),"hatched_chick"],[e(55357,56355),"hatching_chick"],[e(55357,56340),"chicken"],[e(55357,56333),"snake"],[e(55357,56354),"turtle"],[e(55357,56347),"bug"],[e(55357,56349),"bee"],[e(55357,56348),"ant"],[e(55357,56350),"beetle"],[e(55357,56332),"snail"],[e(55357,56345),"octopus"],[e(55357,56346),"shell"],[e(55357,56352),"tropical_fish"],[e(55357,56351),"fish"],[e(55357,56364),"dolphin"],[e(55357,56371),"whale"],[e(55357,56334),"racehorse"],[e(55357,56370),"dragon_face"],[e(55357,56353),"blowfish"],[e(55357,56363),"camel"],[e(55357,56361),"poodle"],[e(55357,56382),"feet"],[e(55357,56464),"bouquet"],[e(55356,57144),"cherry_blossom"],[e(55356,57143),"tulip"],[e(55356,57152),"four_leaf_clover"],[e(55356,57145),"rose"],[e(55356,57147),"sunflower"],[e(55356,57146),"hibiscus"],[e(55356,57153),"maple_leaf"],[e(55356,57155),"leaves"],[e(55356,57154),"fallen_leaf"],[e(55356,57151),"herb"],[e(55356,57150),"ear_of_rice"],[e(55356,57156),"mushroom"],[e(55356,57141),"cactus"],[e(55356,57140),"palm_tree"],[e(55356,57136),"chestnut"],[e(55356,57137),"seedling"],[e(55356,57148),"blossom"],[e(55356,57105),"new_moon"],[e(55356,57107),"first_quarter_moon"],[e(55356,57108),"moon"],[e(55356,57109),"full_moon"],[e(55356,57115),"first_quarter_moon_with_face"],[e(55356,57113),"crescent_moon"],[e(55356,57103),"earth_asia"],[e(55356,57099),"volcano"],[e(55356,57100),"milky_way"],[e(55356,57120),"stars"],[e(55356,57088),"cyclone"],[e(55356,57089),"foggy"],[e(55356,57096),"rainbow"],[e(55356,57098),"ocean"]],Objects:[[e(55356,57229),"bamboo"],[e(55357,56477),"gift_heart"],[e(55356,57230),"dolls"],[e(55356,57234),"school_satchel"],[e(55356,57235),"mortar_board"],[e(55356,57231),"flags"],[e(55356,57222),"fireworks"],[e(55356,57223),"sparkler"],[e(55356,57232),"wind_chime"],[e(55356,57233),"rice_scene"],[e(55356,57219),"jack_o_lantern"],[e(55357,56443),"ghost"],[e(55356,57221),"santa"],[e(55356,57220),"christmas_tree"],[e(55356,57217),"gift"],[e(55356,57227),"tanabata_tree"],[e(55356,57225),"tada"],[e(55356,57226),"confetti_ball"],[e(55356,57224),"balloon"],[e(55356,57228),"crossed_flags"],[e(55357,56622),"crystal_ball"],[e(55356,57253),"movie_camera"],[e(55357,56567),"camera"],[e(55357,56569),"video_camera"],[e(55357,56572),"vhs"],[e(55357,56511),"cd"],[e(55357,56512),"dvd"],[e(55357,56509),"minidisc"],[e(55357,56510),"floppy_disk"],[e(55357,56507),"computer"],[e(55357,56561),"iphone"],[e(55357,56542),"telephone_receiver"],[e(55357,56543),"pager"],[e(55357,56544),"fax"],[e(55357,56545),"satellite"],[e(55357,56570),"tv"],[e(55357,56571),"radio"],[e(55357,56586),"loud_sound"],[e(55357,56596),"bell"],[e(55357,56546),"loudspeaker"],[e(55357,56547),"mega"],[e(55357,56595),"unlock"],[e(55357,56594),"lock"],[e(55357,56591),"lock_with_ink_pen"],[e(55357,56592),"closed_lock_with_key"],[e(55357,56593),"key"],[e(55357,56590),"mag_right"],[e(55357,56481),"bulb"],[e(55357,56614),"flashlight"],[e(55357,56588),"electric_plug"],[e(55357,56587),"battery"],[e(55357,56589),"mag"],[e(55357,57024),"bath"],[e(55357,57021),"toilet"],[e(55357,56615),"wrench"],[e(55357,56617),"nut_and_bolt"],[e(55357,56616),"hammer"],[e(55357,57002),"door"],[e(55357,57004),"smoking"],[e(55357,56483),"bomb"],[e(55357,56619),"gun"],[e(55357,56618),"hocho"],[e(55357,56458),"pill"],[e(55357,56457),"syringe"],[e(55357,56496),"moneybag"],[e(55357,56500),"yen"],[e(55357,56501),"dollar"],[e(55357,56499),"credit_card"],[e(55357,56504),"money_with_wings"],[e(55357,56562),"calling"],[e(55357,56551),"e-mail"],[e(55357,56549),"inbox_tray"],[e(55357,56548),"outbox_tray"],[e(55357,56553),"envelope_with_arrow"],[e(55357,56552),"incoming_envelope"],[e(55357,56555),"mailbox"],[e(55357,56554),"mailbox_closed"],[e(55357,56558),"postbox"],[e(55357,56550),"package"],[e(55357,56541),"memo"],[e(55357,56516),"page_facing_up"],[e(55357,56515),"page_with_curl"],[e(55357,56529),"bookmark_tabs"],[e(55357,56522),"bar_chart"],[e(55357,56520),"chart_with_upwards_trend"],[e(55357,56521),"chart_with_downwards_trend"],[e(55357,56540),"scroll"],[e(55357,56523),"clipboard"],[e(55357,56517),"date"],[e(55357,56518),"calendar"],[e(55357,56519),"card_index"],[e(55357,56513),"file_folder"],[e(55357,56514),"open_file_folder"],[e(55357,56524),"pushpin"],[e(55357,56526),"paperclip"],[e(55357,56527),"straight_ruler"],[e(55357,56528),"triangular_ruler"],[e(55357,56533),"closed_book"],[e(55357,56535),"green_book"],[e(55357,56536),"blue_book"],[e(55357,56537),"orange_book"],[e(55357,56531),"notebook"],[e(55357,56532),"notebook_with_decorative_cover"],[e(55357,56530),"ledger"],[e(55357,56538),"books"],[e(55357,56534),"book"],[e(55357,56598),"bookmark"],[e(55357,56539),"name_badge"],[e(55357,56560),"newspaper"],[e(55356,57256),"art"],[e(55356,57260),"clapper"],[e(55356,57252),"microphone"],[e(55356,57255),"headphones"],[e(55356,57276),"musical_score"],[e(55356,57269),"musical_note"],[e(55356,57270),"notes"],[e(55356,57273),"musical_keyboard"],[e(55356,57275),"violin"],[e(55356,57274),"trumpet"],[e(55356,57271),"saxophone"],[e(55356,57272),"guitar"],[e(55357,56446),"space_invader"],[e(55356,57262),"video_game"],[e(55356,56527),"black_joker"],[e(55356,57268),"flower_playing_cards"],[e(55356,56324),"mahjong"],[e(55356,57266),"game_die"],[e(55356,57263),"dart"],[e(55356,57288),"football"],[e(55356,57280),"basketball"],[e(55356,57278),"tennis"],[e(55356,57265),"8ball"],[e(55356,57267),"bowling"],[e(55356,57281),"checkered_flag"],[e(55356,57286),"trophy"],[e(55356,57279),"ski"],[e(55356,57282),"snowboarder"],[e(55356,57290),"swimmer"],[e(55356,57284),"surfer"],[e(55356,57251),"fishing_pole_and_fish"],[e(55356,57205),"tea"],[e(55356,57206),"sake"],[e(55356,57210),"beer"],[e(55356,57211),"beers"],[e(55356,57208),"cocktail"],[e(55356,57209),"tropical_drink"],[e(55356,57207),"wine_glass"],[e(55356,57204),"fork_and_knife"],[e(55356,57173),"pizza"],[e(55356,57172),"hamburger"],[e(55356,57183),"fries"],[e(55356,57175),"poultry_leg"],[e(55356,57174),"meat_on_bone"],[e(55356,57181),"spaghetti"],[e(55356,57179),"curry"],[e(55356,57188),"fried_shrimp"],[e(55356,57201),"bento"],[e(55356,57187),"sushi"],[e(55356,57189),"fish_cake"],[e(55356,57177),"rice_ball"],[e(55356,57176),"rice_cracker"],[e(55356,57178),"rice"],[e(55356,57180),"ramen"],[e(55356,57202),"stew"],[e(55356,57186),"oden"],[e(55356,57185),"dango"],[e(55356,57203),"egg"],[e(55356,57182),"bread"],[e(55356,57193),"doughnut"],[e(55356,57198),"custard"],[e(55356,57190),"icecream"],[e(55356,57192),"ice_cream"],[e(55356,57191),"shaved_ice"],[e(55356,57218),"birthday"],[e(55356,57200),"cake"],[e(55356,57194),"cookie"],[e(55356,57195),"chocolate_bar"],[e(55356,57196),"candy"],[e(55356,57197),"lollipop"],[e(55356,57199),"honey_pot"],[e(55356,57166),"apple"],[e(55356,57167),"green_apple"],[e(55356,57162),"tangerine"],[e(55356,57170),"cherries"],[e(55356,57159),"grapes"],[e(55356,57161),"watermelon"],[e(55356,57171),"strawberry"],[e(55356,57169),"peach"],[e(55356,57160),"melon"],[e(55356,57164),"banana"],[e(55356,57165),"pineapple"],[e(55356,57184),"sweet_potato"],[e(55356,57158),"eggplant"],[e(55356,57157),"tomato"],[e(55356,57149),"corn"]],
Places:[[e(55356,57312),"house"],[e(55356,57313),"house_with_garden"],[e(55356,57323),"school"],[e(55356,57314),"office"],[e(55356,57315),"post_office"],[e(55356,57317),"hospital"],[e(55356,57318),"bank"],[e(55356,57322),"convenience_store"],[e(55356,57321),"love_hotel"],[e(55356,57320),"hotel"],[e(55357,56466),"wedding"],[e(55356,57324),"department_store"],[e(55356,57095),"city_sunrise"],[e(55356,57094),"city_sunset"],[e(55356,57327),"japanese_castle"],[e(55356,57328),"european_castle"],[e(55356,57325),"factory"],[e(55357,56828),"tokyo_tower"],[e(55357,56830),"japan"],[e(55357,56827),"mount_fuji"],[e(55356,57092),"sunrise_over_mountains"],[e(55356,57093),"sunrise"],[e(55356,57091),"night_with_stars"],[e(55357,56829),"statue_of_liberty"],[e(55356,57097),"bridge_at_night"],[e(55356,57248),"carousel_horse"],[e(55356,57249),"ferris_wheel"],[e(55356,57250),"roller_coaster"],[e(55357,56994),"ship"],[e(55357,56996),"speedboat"],[e(55357,56960),"rocket"],[e(55357,56506),"seat"],[e(55357,56969),"station"],[e(55357,56964),"bullettrain_side"],[e(55357,56965),"bullettrain_front"],[e(55357,56967),"metro"],[e(55357,56963),"railway_car"],[e(55357,56972),"bus"],[e(55357,56985),"blue_car"],[e(55357,56983),"car"],[e(55357,56981),"taxi"],[e(55357,56986),"truck"],[e(55357,57e3),"rotating_light"],[e(55357,56979),"police_car"],[e(55357,56978),"fire_engine"],[e(55357,56977),"ambulance"],[e(55357,57010),"bike"],[e(55357,56456),"barber"],[e(55357,56975),"busstop"],[e(55356,57259),"ticket"],[e(55357,56997),"traffic_light"],[e(55357,56999),"construction"],[e(55357,56624),"beginner"],[e(55356,57326),"izakaya_lantern"],[e(55356,57264),"slot_machine"],[e(55357,56831),"moyai"],[e(55356,57258),"circus_tent"],[e(55356,57261),"performing_arts"],[e(55357,56525),"round_pushpin"],[e(55357,57001),"triangular_flag_on_post"]],Symbols:[[e(55357,56607),"keycap_ten"],[e(55357,56610),"1234"],[e(55357,56611),"symbols"],[e(55357,56608),"capital_abcd"],[e(55357,56609),"abcd"],[e(55357,56612),"abc"],[e(55357,56636),"arrow_up_small"],[e(55357,56637),"arrow_down_small"],[e(55356,56727),"ok"],[e(55356,56725),"new"],[e(55356,56729),"up"],[e(55356,56722),"cool"],[e(55356,56723),"free"],[e(55356,56726),"ng"],[e(55357,56566),"signal_strength"],[e(55356,57254),"cinema"],[e(55356,56833),"koko"],[e(55356,56879),"u6307"],[e(55356,56883),"u7a7a"],[e(55356,56885),"u6e80"],[e(55356,56884),"u5408"],[e(55356,56882),"u7981"],[e(55356,56912),"ideograph_advantage"],[e(55356,56889),"u5272"],[e(55356,56890),"u55b6"],[e(55356,56886),"u6709"],[e(55356,56858),"u7121"],[e(55357,57019),"restroom"],[e(55357,57017),"mens"],[e(55357,57018),"womens"],[e(55357,57020),"baby_symbol"],[e(55357,57022),"wc"],[e(55357,57005),"no_smoking"],[e(55356,56888),"u7533"],[e(55356,56913),"accept"],[e(55356,56721),"cl"],[e(55356,56728),"sos"],[e(55356,56724),"id"],[e(55357,57003),"no_entry_sign"],[e(55357,56606),"underage"],[e(55357,56479),"heart_decoration"],[e(55356,56730),"vs"],[e(55357,56563),"vibration_mode"],[e(55357,56564),"mobile_phone_off"],[e(55356,56718),"ab"],[e(55357,56480),"diamond_shape_with_a_dot_inside"],[e(55357,56623),"six_pointed_star"],[e(55356,57319),"atm"],[e(55357,56505),"chart"],[e(55357,56498),"heavy_dollar_sign"],[e(55357,56497),"currency_exchange"],[e(55357,56605),"back"],[e(55357,56602),"on"],[e(55357,56601),"soon"],[e(55357,56603),"arrows_clockwise"],[e(55357,56604),"clock12"],[e(55357,56579),"clock1"],[e(55357,56667),"clock2"],[e(55357,56656),"clock3"],[e(55357,56657),"clock4"],[e(55357,56658),"clock5"],[e(55357,56659),"clock6"],[e(55357,56660),"clock7"],[e(55357,56661),"clock8"],[e(55357,56662),"clock9"],[e(55357,56663),"clock10"],[e(55357,56664),"clock11"],[e(55357,56665),"heavy_plus_sign"],[e(55357,56666),"heavy_minus_sign"],[e(55357,56494),"radio_button"],[e(55357,56495),"link"],[e(55357,56600),"curly_loop"],[e(55357,56599),"trident"],[e(55357,56625),"black_square_button"],[e(55357,56634),"white_square_button"],[e(55357,56626),"red_circle"],[e(55357,56627),"large_blue_circle"],[e(55357,56628),"small_red_triangle_down"],[e(55357,56629),"white_large_square"],[e(55357,56635),"black_large_square"],[e(55357,56630),"small_orange_diamond"],[e(55357,56631),"small_blue_diamond"]]},n=function(){var e={};return $.each(t,function(t,n){e[t]={},$.each(n,function(n,i){var r=i[1],o=i[0];e[t][r]={value:o,title:r}})}),e}(),i=function(){var e={};for(var t in n)for(key in n[t])e[n[t][key].value]=n[t][key];return e}();this.getEmojiCode=function(e,t){return n[e][t]},this.getEmojiGroup=function(e,t){var r=n[e];if(t&&"function"==typeof t)for(var o in r)if(1==t(o)){var a=n[e][o].value;delete i[a],delete r[o]}return r},this.isEmoji=function(e){if(!e||e.length>3)return!1;var t=i[e],n=!!t;return n}}e.$emoji=new t}(Service),Service.$encryption=function(){function e(e){function t(e){for(var t,n=l?"0123456789ABCDEF":"0123456789abcdef",i="",r=0;r<e.length;r++)t=e.charCodeAt(r),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}function n(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}function i(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var n=Array(80),i=1732584193,r=-271733879,c=-1732584194,p=271733878,l=-1009589776,d=0;d<e.length;d+=16){for(var f=i,h=r,g=c,m=p,v=l,b=0;80>b;b++){16>b?n[b]=e[d+b]:n[b]=a(n[b-3]^n[b-8]^n[b-14]^n[b-16],1);var w=u(u(a(i,5),s(b,r,c,p)),u(u(l,n[b]),o(b)));l=p,p=c,c=a(r,30),r=i,i=w}i=u(i,f),r=u(r,h),c=u(c,g),p=u(p,m),l=u(l,v)}return Array(i,r,c,p,l)}function r(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(var n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}function o(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function a(e,t){return e<<t|e>>>32-t}function s(e,t,n,i){return 20>e?t&n|~t&i:40>e?t^n^i:60>e?t&n|t&i|n&i:t^n^i}function c(e){return n(i(r(e),8*e.length))}function u(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function p(e){for(var t,n,i="",r=-1;++r<e.length;)t=e.charCodeAt(r),n=r+1<e.length?e.charCodeAt(r+1):0,t>=55296&&56319>=t&&n>=56320&&57343>=n&&(t=65536+((1023&t)<<10)+(1023&n),r++),127>=t?i+=String.fromCharCode(t):2047>=t?i+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}var l=0;return t(c(p(e)))}return{hex_sha1:e}}(),function(e){var t=function(){var n="file-upload-",i={},r=t.ERROR_CODE,o=function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n},a=function(t){var a=e.$json,s=null,c=t.type,u=n+e.$tools.getUUID(),p=null,l=null,d=null,f={uploadId:u,state:"RUNNING",progress:0},h=function(e){var t=null;switch(c){case"file":t=a.parse(e).fuuid;break;case"txt":t=a.parse(e).fid}return{fuuid:t}};switch(i[u]=this,c){case"file":s=Configuration.file_upload_url;break;case"txt":s=Configuration.file_upload_txt_url}var g=o("post",s);switch("file"==c&&(g.upload.onprogress=function(e){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);"RUNNING"==f.state&&(f.progress=t,d&&d(t))}}),g.onerror=function(e){l&&l(r.SERVICE_NOT_AVALIABLE)},g.onabort=function(e){l&&l(r.CANCEL)},g.onload=function(e){f.state="FINISH",f.progress=100,"txt"==c&&$("#pp-composer-container-content-txt").val(""),p&&p(h(g.responseText))},c){case"file":var m=new FormData;m.append("file",t.content),m.append("upload_type","file"),m.append("subtype","FILE"),m.append("user_uuid",e.$user.getUser().getInfo().user_uuid),g.send(m);break;case"txt":$("#pp-composer-container-content-txt").val(t.content);var v=document.forms.namedItem("pp-composer-container-form"),b=new FormData(v);g.send(b)}this.progress=function(e){return d=e,this},this.done=function(e){return p=e,this},this.fail=function(e){return l=e,this},this.cancel=function(){"CANCEL"!=f.state&&(f.state="CANCEL",g.abort())},this.query=function(){return f}};this.upload=function(e){return new a(e)},this.cancel=function(e){e&&i[e]&&i[e].cancel()},this.clear=function(){var e=this;$.each(i,function(t,n){e.cancel(t)})}};t.ERROR_CODE={SERVICE_NOT_AVALIABLE:0,CANCEL:1},e.Uploader=t,e.$uploader=new t}(Service),Service.$language=function(){function e(){return i}function t(e){switch(e&&(e=e.toLowerCase()),e){case"zh":case"zh-cn":case"zh-hk":case"zh-tw":case"zh-sg":i="zh-CN";break;case"en":case"en-us":i="en";break;default:i=n}}var n="en",i=n;return{getLanguage:e,setLanguage:t}}(),function(e){function t(){var t=this,i={get:function(n){var i=t.getFileDownloadUrl(n);return i||e.Constants.ICON_DEFAULT_USER}};this.scrollbarWidth=n(),this.getUUID=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});return t},this.isImage=function(e){var t=!1;if(e){var n=e.lastIndexOf(".");if(-1!=n&&0!=n){var i=e.substring(n+1);i&&(i=i.toLowerCase()),"jpg"!=i&&"jpeg"!=i&&"png"!=i&&"gif"!=i||(t=!0)}}return t},this.messageAdapter=function(e){return e},this.getMessageUploadId=function(e){var t="";switch(e.messageType){case"FILE":t=e.message.file.fileUploadId;break;case"IMAGE":t=e.message.image.fileUploadId}return t},this.isMessageSendError=function(e){return"ERROR"==e.messageState||"CANCELED"==e.messageState},this.isUploading=function(e){return"BEGIN_UPLOAD"==e.messageState||"SENDING"==e.messageState},this.getFileDownloadUrl=function(t,n){if(t){var i=/(^https?:\/\/)|(^w{3})/.test(t),r=i?t:Configuration.file_download_url+t;return n&&(r+="?file_name="+e.$gb2312utf8.GB2312ToUTF8(n)),r}},this.isShowEmojiIcon=function(){return e.$device.isMac()},this.getRemoteTextFileContent=function(e,t,n){var i=this.getFileDownloadUrl(e);$.get(i,function(e){t&&t(e)}).fail(function(){n&&n()})},this.getTimestamp=function(e){e.length>=19&&(e=e.substring(0,19));var t=new Date(e.replace("-","/"));return t.getTime()},this.padNumber=function(e){return 10>e?"0"+e.toString():e.toString()},this.formatTime=function(e,n){var i=new Date(e),r=i.getFullYear(),o=i.getMonth(),a=i.getUTCDate(),s=i.getHours(),c=i.getMinutes(),u=new Date,p=u.getFullYear(),l=u.getMonth(),d=u.getUTCDate(),f=n.year,h=n.month,g=n.day,m=n.today,v=n.yesterday;return r==p&&o==l&&a==d?m+" "+t.padNumber(s)+":"+t.padNumber(c):u.getTime()-i.getTime()<=864e5?v+" "+t.padNumber(s)+":"+t.padNumber(c):p>r?r+f+t.padNumber(o+1)+h+t.padNumber(a)+g+" "+t.padNumber(s)+":"+t.padNumber(c):r==p&&l>=o?t.padNumber(o+1)+h+t.padNumber(a)+g+" "+t.padNumber(s)+":"+t.padNumber(c):r+f+t.padNumber(o+1)+h+t.padNumber(a)+g+" "+t.padNumber(s)+":"+t.padNumber(c)},this.validateEmail=function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)},this.cssNum=function(e){return parseFloat(e)},this.reverseArray=function(e){return e&&0!==e.length?e.reverse():e},this.icon=i,this.isNull=function(e){return null===e||void 0===e},this.isApiResponseEmpty=function(e){if(!e)return!0;if(0!==e.error_code)return!1;var t=$.extend({},e);return delete t.error_code,delete t.error_string,delete t.uri,$.isEmptyObject(t)},this.format=function(e){var t=[].slice.call(arguments,1),n=0;return e.replace(/%s/g,function(){return t[n++]})}}function n(){var e=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),t=$("<div>").css({width:"100%"}).appendTo(e).outerWidth();return e.remove(),100-t}e.PPTools=t}(Service),function(e){function t(t,n){var i=e.ErrorHint,r=function(n,i,r){t.createAnonymousUser({app_uuid:e.$ppSettings.getAppUuid(),ppcom_trace_uuid:n},i,r)},o=function(n,i,r,o){if(n.user_fullname||n.user_avatar){var a={app_uuid:e.$ppSettings.getAppUuid(),user_uuid:n.user_uuid,user_fullname:n.user_fullname,user_icon:n.user_avatar,user_email:n.user_email};t.updateUser(a,r,o)}else e.$ppSettings.updateUserSettings({user_fullname:i.user_fullname,user_avatar:i.user_avatar}),r&&r()},a=function(n,i,r){t.createDevice({app_uuid:e.$ppSettings.getAppUuid(),user_uuid:n.user_uuid,device_ostype:e.$device.getOSType(),ppcom_trace_uuid:n.ppcom_trace_uuid,device_id:e.$device.getDeviceId()},function(n){t.updateDevice({device_uuid:n.device_uuid,device_ostype:e.$device.getOSType()}),e.$ppSettings.updateUserSettings({device_uuid:n.device_uuid}),i(n)},function(t){var n=25;return t&&t.error_code&&t.error_code==n?(e.$ppSettings.updateUserSettings({device_uuid:t.device_uuid}),void i(t)):void(r&&r(t))})},s=function(t,n,i){return function(){e.$user.setUser(t),View.Style.init(),$(document.body).append((new View.PPContainer).getElement()),e.$messageReceiverModule.start({user_uuid:t.user_uuid,device_uuid:t.device_uuid,app_uuid:e.$ppSettings.getAppUuid()}),setTimeout(function(){n&&n()})}},c=function(t,n,i){var c=t.ppcom_trace_uuid;r(c,function(r){e.$ppSettings.updateUserSettings({user_uuid:r.user_uuid}),o(t,{user_fullname:r.user_fullname,user_avatar:null},null,null),a(t,s(t,n,i),null)},i)},u=function(n,i,r){return e.$tools.validateEmail(n.user_email)?void t.getUserUuid({app_uuid:e.$ppSettings.getAppUuid(),user_icon:n.user_avatar,user_email:n.user_email,user_fullname:n.user_fullname},function(c){t.getUserDetailInfo({uuid:c.user_uuid,type:"DU"},function(t){e.$ppSettings.updateUserSettings({user_uuid:t.uuid}),o(n,{user_fullname:t.fullname,user_avatar:t.icon},null,null),a(n,s(n,i,r),null)},function(e){})},function(){r&&r(e.ErrorHint.ERROR_ILLEGAL_USER_EMAIL)}):void(r&&r(e.ErrorHint.ERROR_ILLEGAL_USER_EMAIL_STYLE))};this.startUp=function(t,n,r){if(e.$device.isIE9OrLowerVersionBrowser())return void(r&&r(i.ERROR_IE9_OR_LOWER_BROWSER));var o={};$.extend(!0,o,t),e.$ppSettings.init(o),View.$settings.init(o),e.$ppSettings.getAppUuid()?(e.$api.init(e.$ppSettings.getAppUuid(),e.$ppSettings.getApiKey(),e.$ppSettings.getApiSecret()),e.$language.setLanguage(e.$ppSettings.getLanguage()),e.$api.getPPComToken(function(t){e.$api.getAppInfo({app_uuid:e.$ppSettings.getAppUuid()},function(t){e.$app.set(t);var i=e.$ppSettings.getUserSettings();i.is_anonymous?c(i,n,r):u(i,n,r)},function(e){r&&r(i.ERROR_SERVICE_NOT_AVALIABLE)})},function(e){r&&r(i.ERROR_SERVICE_NOT_AVALIABLE)})):r&&r(i.ERROR_ILLEGAL_APPUUID)}}t.bootServices=function(t){e.bootMe(t),View.bootMe(t)},e.PPStartUp=t}(Service),function(e){function t(){this._booted=!1,this._onShowEvent=null,this._onHideEvent=null}t.prototype._clearData=function(){e.$uploader.clear(),e.$notification.reset(),Ctrl.$conversationPanel.stopPollingWaitingQueueLength()},t.prototype.boot=function(t,n){if(t&&!this._booted){this._booted=!0;var i=this;e.$startUp.startUp(t,function(){i._booted=!0,$.isFunction(n)&&n(!0)},function(t){i._booted=!1,i._clearData(),e.$errorHint.warn(t),$.isFunction(n)&&n(!1,t)})}},t.prototype.show=function(){if(this._booted){var e=Ctrl.$launcher.get();e&&(e.onClickEvent(),this._onShowEvent&&"function"==typeof this._onShowEvent&&this._onShowEvent())}},t.prototype.hide=function(){if(this._booted){var e=Ctrl.$sheetheader;e&&(e.minimize(),this._onHideEvent&&"function"==typeof this._onHideEvent&&this._onHideEvent())}},t.prototype.onShow=function(e){this._onShowEvent=e},t.prototype.onHide=function(e){this._onHideEvent=e},t.prototype.shutdown=function(){this._booted&&($("#pp-container").remove(),this._booted=!1,this._clearData())},t.prototype.update=function(t){if(!this._booted)return!1;var n=t,i=e.$api,r=e.$user.getUser();return!n||!r||n.app_uuid!=i.getAppUuid()||n.user_email!=r.getInfo().user_email},e.PublicAPI=t}(Service),function(e){function t(){}t.reposity={},t.clear=function(){t.reposity={}},t.prototype.get=function(e){return t.reposity[e]},t.prototype.set=function(e,n){t.reposity[e]=n},t.prototype.remove=function(e){delete t.reposity[e]},e.BaseStorage=t}(Service),function(e){var t=function(){function e(e){return n.parseJSON(e)}function t(e){return JSON.stringify(e)}var n=$;return{parse:e,stringify:t}}();e.$json=t}(Service),function(e){function t(e,t){if(!e){if(t=t||"Assertion failed","undefined"!=typeof Error)throw new Error(t);throw t}}e.assert=t}(fn),Service.$schedule=function(){function e(e,t){var i,o,a,s=e,c=t,u=!1,p=!1;this.after=function(e,t){return i=e,a=t||n,this},this.onCancel=function(e){return o=e,this},this.cancel=function(){u=!0,void 0!==o&&o()},this.finished=function(){return p},this.start=function(){void 0!==r[c]&&$clearTimeout(r[c].timer),$.isFunction(s)&&s();var e=$.isFunction(i)&&$timeout(function(){!u&&i(),p=!0,r[c]=void 0},a);r[c]={task:this,timer:e}}}function t(e,t,n){var r=t,a=n||i;$.isFunction(e)&&r&&void 0===o[r]&&(o[r]={event:e},e(),$timeout(function(){o[r]=void 0},a))}var n=2e3,i=2e3,r=[],o=[];return{schedule:function(t,n){return new e(t,n)},cancelAll:function(){$.each(r,function(e,t){t.finished()||t.cancel()})},cancel:function(e){var t=$.inArray(e,r);-1!==t&&(e&&$clearTimeout(r[e].timer),r[e]=void 0)},once:function(e,n,i){t(e,n,i)}}}(),Service.$task=function(){function e(e,t,n){r[e]=$timeout(t,n||a)}function t(e){r[e]&&($clearTimeout(r[e].timer),r[e]=void 0)}function n(e,t,n){o[e]=setInterval(t,n||a)}function i(e){o[e]&&(clearInterval(o[e]),o[e]=void 0)}var r=[],o=[],a=1e3;return{plan:e,cancel:t,repeat:n,cancelRepeat:i}}(),Service.KEYS={APP_INFO:"app_info"},Service.$monitor=function(){function e(e,t){Service.$pubsub.publish(e,t)}function t(e,t){Service.$pubsub.subscribe(e,t)}var n="Monitor/",i={show:n+"S",hide:n+"H",resume:n+"R",watch:n+"W",unwatch:n+"UW",typing:n+"T"};return{Event:i,report:e,watch:t}}();var __Monitor=Service.$monitor,__MonitorEvent=__Monitor.Event;return function(){Service.$gb2312utf8={Dig2Dec:function(s){var retV=0;if(4==s.length){for(var i=0;4>i;i++)retV+=eval(s.charAt(i))*Math.pow(2,3-i);return retV}return-1},Hex2Utf8:function(s){var retS="",tempS="",ss="";if(16==s.length){tempS="1110"+s.substring(0,4),tempS+="10"+s.substring(4,10),tempS+="10"+s.substring(10,16);for(var sss="0123456789ABCDEF",i=0;3>i;i++)retS+="%",ss=tempS.substring(8*i,8*(eval(i)+1)),retS+=sss.charAt(this.Dig2Dec(ss.substring(0,4))),retS+=sss.charAt(this.Dig2Dec(ss.substring(4,8)));return retS}return""},Dec2Dig:function(e){for(var t="",n=0,i=0;4>i;i++)n=Math.pow(2,3-i),e>=n?(t+="1",e-=n):t+="0";return t},Str2Hex:function(s){for(var c="",n,ss="0123456789ABCDEF",digS="",i=0;i<s.length;i++)c=s.charAt(i),n=ss.indexOf(c),digS+=this.Dec2Dig(eval(n));return digS},GB2312ToUTF8:function(e){var t=escape(e),n=t.split("%"),i="";""!=n[0]&&(i=n[0]);for(var r=1;r<n.length;r++)"u"==n[r].substring(0,1)?(i+=this.Hex2Utf8(this.Str2Hex(n[r].substring(1,5))),n[r].length&&(i+=n[r].substring(5))):(i+=unescape("%"+n[r]),n[r].length&&(i+=n[r].substring(5)));return i}}}(),function(e){!function(e){var t={},n=-1;e.publish=function(e,n){if(!t[e])return!1;for(var i=t[e],r=i?i.length:0;r--;)i[r].func(e,n);return this},e.subscribe=function(e,i){t[e]||(t[e]=[]);var r=(++n).toString();return t[e].push({token:r,func:i}),r},e.unsubscribe=function(e){for(var n in t)if(t[n])for(var i=0,r=t[n].length;r>i;i++)if(t[n][i].token===e)return t[n].splice(i,1),e;return this},e.clear=function(){t={},n=-1}}(e.$pubsub||(e.$pubsub={}))}(Service),Service.$polling=function(){function e(e){var t=$.extend(s,e);t.eventID&&t.apiFunc&&(c[t.eventID]||(c[t.eventID]={handler:void 0},i(t)))}function t(e){e&&e.eventID&&(n(e)||(c[e.eventID].handler&&$clearTimeout(c[e.eventID].handler),c[e.eventID]=void 0))}function n(e){return void 0===c[e.eventID]}function i(e){e.apiFunc.call(Service.$api,e.apiRequestParams,function(t){n(e)||(r(e,t,!0),o(e))},function(t){n(e)||(r(e,t,!1),o(e))})}function r(e,t,n){e.onGet&&e.onGet(t,n)}function o(e){c[e.eventID].handler=$timeout(function(){n(e)||i(e)},e.delay)}var a=3e3,s={eventID:void 0,apiFunc:void 0,apiRequestParams:void 0,delay:a,onGet:void 0},c={};return{run:e,cancel:t}}(),Service.$app=function(){var e,t={GROUP:"GROUP",ALL:"ALL",SMART:"SMART"},n=t.ALL,i=function(t){e=t},r=function(){return e};return{POLICY:t,set:i,policy:function(){return r()&&r().app_route_policy||n},app:r,appName:function(){return r().app_name},appId:function(){return r().app_uuid||r().uuid}}}(),Service.$hovercardWelcome=function(){function e(e){if(e)switch(e=e.toLowerCase()){case"zh-cn":return"zh_cn";case"en":return"en_us"}return"en"}function t(e,t,n){return{appTeamName:e,appWelcomeText:t,activeAdmins:function(){var e=[];return n&&$.each(n,function(t,n){var i=n.uuid,r=n.user_fullname,o=Service.$tools.icon.get(n.user_icon),a=n.is_browser_online,s=n.is_mobile_online,c=n.is_mobile_online||n.is_browser_online;Service.$users.exist(i)?Service.$users.getUser(i).update({user_fullname:r,user_avatar:o,is_online:c}):Service.$users.setUser(i,Service.$users.createUser({is_portal_user:!1,user_uuid:i,user_fullname:r,user_avatar:o,is_browser_online:a,is_mobile_online:s,is_online:c})),e.push(Service.$users.getUser(i).getInfo())}),e}()}}function n(n){return void 0!==r?void $onResult(r,n):void Service.$api.getWelcomeTeam({language:e(Service.$language.getLanguage())},function(e){r=t(e.team,e.welcome,e.list),o=e.welcome,$onResult(r,n)},function(e){$onResult(null,n)})}function i(){return o}var r,o;return{asyncGet:n,getWelcomeText:i}}(),Service.$conversation=function(){function e(e,r,o){function a(e){return o&&o.include?e:n(e)}return o&&o.reuse&&void 0!==i[e]?void $onResult(t(a(i[e])),r):(i[e]=void 0,void Service.$api.getConversationUserList({app_uuid:Service.$ppSettings.getAppUuid(),conversation_uuid:e},function(n){n&&0===n.error_code?i[e]=function(){var e=[];return n.list&&$.each(n.list,function(t,n){var i=Service.$users.adapter(n);e.push(Service.$users.getOrCreateUser(i).getInfo())}),e}():i[e]=[],$onResult(t(a(i[e])),r)},function(n){i[e]=[],$onResult(t(a(i[e])),r)}))}function t(e){return e}function n(e){if(!e)return e;var t,n=e.slice();return $.each(n,function(e,n){n.user_uuid===Service.$user.quickId()&&(t=e)}),void 0!==t&&n.splice(t,1),n}var i={};return{asyncGetUser:e}}(),Service.$messageStore=function(){function e(e,t){n[e]=t}function t(e){if(e){var t,i=n[e];if(i){var r=Modal.$conversationContentGroup.get(i);r&&(t=r.find(e))}return t}}var n={};return{map:e,find:t}}(),Service.$conversationManager=function(){function e(){var e=Service.$pubsub;e.subscribe(Service.$notifyConversation.EVENT.AVALIABLE,function(t,n){Service.$conversationAgency.requestInfo(n,function(t){if(t){var n=!Service.$conversationAgency.isDefaultConversationAvaliable();n?r(t):h(p(t)),e.publish(v.AVALIABLE,t)}})})}function t(){return f(b)}function n(){Service.$conversationAgency.enableDebug(!1),Service.$conversationAgency.request(function(e){r(e),Service.$pubsub.publish(v.AVALIABLE,e)})}function i(e){return d()?void $onResult(d(),e):void Service.$conversationAgency.request(function(t){t?r(t):g(),$onResult(d(),e)})}function r(e){h(p(e,!0)),c(e.token)}function o(e){if(void 0!==e)c(e);else if(void 0!==m)return l(m)}function a(e){return w?void $onResult(f(b),e):void Service.$api.getConversationList({user_uuid:Service.$user.getUser().getInfo().user_uuid,app_uuid:Service.$ppSettings.getAppUuid()},function(t){if(t&&0===t.error_code){var n=(t.list||[]).slice();n&&$.each(n,function(e,t){h(p(t))})}w=!0,$onResult(f(b),e)},function(t){w=!0,$onResult(f(b),e)})}function s(e,t){function n(e){var t;return $.each(b,function(n,i){i.assigned_uuid===e&&(t=i)}),t}if(void 0!==e.user_uuid)throw new Error;var i=void 0!==e.user_uuid?n(e.user_uuid):void 0;return Service.$tools.isNull(i)?void Service.$conversationAgency.create(e,function(e){e?(h(p(e)),$onResult(l(e.uuid),t)):($onResult(void 0,t),g())}):void $onResult(i,t)}function c(e){var t=l(e);void 0!==t&&($.each(b,function(e,t){t.active=!1}),t.ts=Date.now(),t.active=!0,m=e),u(e)}function u(e){var t,n,i=d();void 0!==i&&(t=i.app_welcome,n=i.app_name,i.vip=!1,delete i.app_welcome,delete i.app_name);var r=l(e);r&&(r.vip=!0,t&&(r.app_welcome=t),n&&(r.app_name=n))}function p(e,t){return e.token=e.uuid,e.ts=Service.$tools.getTimestamp(e.updatetime),e.vip="boolean"==typeof t?t:!1,e}function l(e){var t,n=b.length;for(t=0;n>t;++t)if(e===b[t].token)return b[t]}function d(){var e,t=b.length;for(e=0;t>e;++e)if(b[e].vip)return b[e]}function f(e){function t(e,t){var n=e.ts,i=t.ts;return i-n}return!e||e.length<=1?e:e.sort(t)}function h(e){var t;$.each(b,function(n,i){void 0===t&&i.token===e.token&&(t=i)}),void 0===t?b.push(e):(e.vip=t.vip,$.extend(t,e))}function g(){Service.$pubsub.publish(v.WAITING)}var m,v={WAITING:"CONVERSATION_MANAGER/WAITING",AVALIABLE:"CONVERSATION_MANAGER/AVALIABLE"},b=[],w=!1;return{EVENT:v,init:e,all:t,simulateConversationAvaliable:n,asyncGetDefaultConversation:i,activeConversation:o,vipConversation:d,asyncGetList:a,find:l,asyncGetConversation:s}}(),Service.$sheetHeader=function(){function e(e){e=e||p}function t(){return l||p}function n(e){return l?void $onResult(l,e):(l=Service.$app.appName()||p,void $onResult(l,e))}function i(e){d=e}function r(){return d}function o(){f++}function a(){return f}function s(e){f=0>f-e?0:f-e}function c(){return h}function u(e){h=e}var p=Service.Constants.DEFAULT_HEADER_TITLE,l="",d=!0,f=0,h=!1;return{setHeaderTitle:e,getHeaderTitle:t,asyncGetHeaderTitle:n,close:i,closed:r,incrUnreadCount:o,unreadCount:a,decrUnreadCount:s,isShowDropDownButton:c,showDropDownButton:u}}(),Service.$audioContext=function(){function e(e){return void 0!==o&&void 0!==a&&o.id()===e.id()}function t(e){if(void 0!==o&&void 0!==e){if(o.id()===e.id())return;n(o)}return e.canPlay()&&Service.$device.audioMp3()?(o=e,a=new Audio(e.src()),a.onended=function(t){n(e)},a.onerror=function(t){i(e)},a.play(),void Service.$pubsub.publish("audio/"+o.id(),{state:s.PLAYING,audioId:o.id()})):void i(e)}function n(t){e(t)&&(a.currentTime=0,a.pause(),Service.$pubsub.publish("audio/"+t.id(),{state:s.NULL,audioId:t.id()}),a=void 0,o=void 0)}function i(t){e(t)&&(a=void 0,o=void 0),Service.$pubsub.publish("audio/"+t.id(),{state:s.ERROR,audioId:t.id()})}function r(){n(o)}var o,a,s={NULL:0,PLAYING:1,ERROR:2};return{STATE:s,isPlaying:e,play:t,stop:n,close:r}}(),Service.$conversationAgency=function(){function e(e){return u===c.DONE&&s?void $onResult(s,e):(u=c.REQUESTING,void Service.$api.getPPComDefaultConversation({app_uuid:Service.$app.appId(),user_uuid:Service.$user.quickId(),device_uuid:Service.$user.quickDeviceUUID()},function(t){o(t)||(s=t,u=c.DONE),$onResult(s,e)},function(t){$onResult(s,e)}))}function t(e,t){return e?void Service.$api.getConversationInfo({app_uuid:Service.$app.appId(),user_uuid:Service.$user.quickId(),conversation_uuid:e},function(e){$onResult(e,t)},function(e){$onResult(void 0,t)}):void $onResult(void 0,t)}function n(e,t){if(void 0!==e.user_uuid)throw new Error;u=c.REQUESTING,Service.$api.createPPComConversation({device_uuid:Service.$user.quickDeviceUUID(),user_uuid:Service.$user.getUser().getInfo().user_uuid,app_uuid:Service.$ppSettings.getAppUuid(),conversation_type:Service.Constants.MESSAGE.TO_TYPE,member_list:void 0!==e.user_uuid?[e.user_uuid]:void 0},function(e){var n=void 0;o(e)||(n=e,u=c.DONE),$onResult(n,t)},function(e){$onResult(void 0,t)})}function i(){function e(e){u=c.CANCEL}u===c.REQUESTING&&Service.$api.cancelWaitingCreateConversation({app_uuid:Service.$app.appId(),user_uuid:Service.$user.quickId(),device_uuid:Service.$user.quickDeviceUUID()},e,e)}function r(){return void 0!==s}function o(e){return p||0!==e.error_code||Service.$tools.isApiResponseEmpty(e)}function a(e){p=e}var s,c={REQUESTING:0,DONE:1,CANCEL:2},u=c.REQUESTING,p=!1;return{enableDebug:a,request:e,requestInfo:t,create:n,cancel:i,isDefaultConversationAvaliable:r}}(),function(e){function t(t){var n=e.$json,i=e.$tools,r=e.$emoji,o=(e.$users,e.$user),a=e.Constants.MESSAGE_SUBTYPE,s=e.PPMessage.TYPE,c=t,u=function(e){var t="",n=e;switch(n.ms){case a.TEXT:t=i.isShowEmojiIcon()&&r.isEmoji(n.bo)?s.EMOJI:s.TEXT;break;case a.TXT:t=s.TEXT;break;case a.IMAGE:t=s.IMAGE;break;case a.FILE:t=s.FILE;break;case a.AUDIO:t=s.AUDIO}return t},p=function(e){return e.fi!=o.getUser().getInfo().user_uuid||"S2P"==e.tt},l=function(t){return t.ft===e.ApiMessage.TYPE_OG||t.ft===e.ApiMessage.TYPE_AP},d=function(t,n,r){var o=function(){r&&r(t.build(),n)};if(p(c))if(l(c))t.userName(e.Constants.i18n("SYSTEM_MSG")).userIcon(e.Constants.ICON_DEFAULT_USER),o();else{var a={user_uuid:c.fi,user_fullname:c.from_user&&c.from_user.user_fullname?c.from_user.user_fullname:void 0,user_avatar:c.from_user&&c.from_user.user_icon?i.getFileDownloadUrl(c.from_user.user_icon):void 0};e.$users.asyncGetUser(a,function(n){null!=n?t.userName(n.getInfo().user_fullname).userIcon(n.getInfo().user_avatar):t.userName(e.Constants.i18n("DEFAULT_SERVE_NAME")).userIcon(e.Constants.ICON_DEFAULT_USER),o()})}else o()},f=function(e,t){var o=!0;switch(c.ms){case a.TEXT:i.isShowEmojiIcon()&&r.isEmoji(c.bo)?e.emojiMessageCode(c.bo):e.textMessageBody(c.bo);break;case a.TXT:return void i.getRemoteTextFileContent(n.parse(c.bo).fid,function(n){e.textMessageBody(n),t&&t(o)},function(){o=!1,t&&t(o)});case a.IMAGE:e.imageMessageUrl(i.getFileDownloadUrl(n.parse(c.bo).orig));break;case a.FILE:var s=n.parse(c.bo).name,u=n.parse(c.bo).fid,p=i.getFileDownloadUrl(u,s),l=p;e.fileMessageLocalUrl(p).fileMessageName(s).fileMessageServerUrl(l);break;case a.AUDIO:e.audio(n.parse(c.bo));break;default:o=!1}t&&t(o)};this.asyncGetPPMessage=function(t){var n=new e.PPMessage.Builder(u(c)).id(c.id).timestamp(c.ts).messageState("FINISH").conversationId(c.ci).conversation({uuid:c.ci}).rawData(c).userId(c.fi).admin(p(c));f(n,function(e){d(n,e,t)})}}e.ApiMessageAdapter=t}(Service),function(e){function t(e){var t=e;this.getBody=function(){return t}}function n(n){var i={conversation_uuid:n,to_uuid:"",to_type:"",conversation_type:e.Constants.MESSAGE.TO_TYPE,message_type:e.Constants.MESSAGE_TYPE.NOTI,message_subtype:"",from_uuid:"",device_uuid:"",uuid:"",from_type:"DU",app_uuid:e.$ppSettings.getAppUuid()};this.uuid=function(e){return i.uuid=e,this},this.type=function(e){return i.message_subtype=e,this},this.toType=function(e){return i.to_type=e,this},this.toId=function(e){return i.to_uuid=e,this},this.fromUuid=function(e){return i.from_uuid=e,this},this.deviceUuid=function(e){return i.device_uuid=e,this},this.build=function(){var e=$.extend({},i,!0);if(!e.to_uuid)throw new Error("to_uuid == null");if(!e.to_type)throw new Error("to_type == null");return new t(e)}}t.TYPE_OG="OG",t.TYPE_AP="AP",t.Builder=n,e.ApiMessage=t}(Service),Service.$messageSender=function(){function e(e,i){var r=$.extend({},g,i),a=e.getBody();t(a,r,a.conversation.uuid),r.upload?n(a,r):o(a,r)}function t(e,t,n){e.messageConversationId=n,e.messageIsConversationValid=!!n,l(e,h.BUILD_DONE,{conversationId:n})}function n(e,t){var n=Service.$uploader,o=Service.Uploader.ERROR_CODE,a=t.uploadContent,s=t.uploadType,c=Service.Constants.i18n,u=n.upload({type:s,content:a}).progress(function(t){l(e,h.UPLOADING,{uploadProgress:t})}).done(function(n){r(e,t,n.fuuid)}).fail(function(n){switch(e.messageState="ERROR",n){case o.SERVICE_NOT_AVALIABLE:e.extra.errorDescription=c("SERVICE_NOT_AVALIABLE");break;case o.CANCEL:e.extra.errorDescription=c("CANCELED")}i(e,t)}).query().uploadId;l(e,h.BEGIN_UPLOAD,{uploadTaskId:u})}function i(e,t){l(e,h.UPLOAD_FAIL),o(e,t)}function r(e,t,n){l(e,h.UPLOAD_DONE,{fileId:n}),o(e,t)}function o(e,t){if(!e.messageIsConversationValid||"ERROR"===e.messageState)return void c(e,t);var n=new Service.PPMessageAdapter(e).getApiMessageBody();try{Service.$notifyMsg.get(Service.$notification,n).send()}catch(i){Service.$api.sendMessage(n,function(n){a(e,t,n)},function(n){c(e,t)})}}function a(e,t,n){e.messageState="FINISH",n&&s(e,n),l(e,h.SEND_DONE)}function s(e,t){}function c(e,t){e.messageState="ERROR";var n=e.extra.errorDescription;n||(n=Service.Constants.i18n("SEND_ERROR")),e.extra.errorDescription=n,l(e,h.SEND_FAIL)}function u(e){var t=Service.$messageStore.find(e);t&&a(t)}function p(e){var t=Service.$messageStore.find(e);t&&c(t)}function l(e,t,n){f.broadcast(e.messageId,{body:e,state:t,stateInfo:n||{}})}function d(){function e(e,t){Service.$pubsub.publish("msg/send/"+e,t)}var t={BUILD_DONE:"BUILD_DONE",BEGIN_UPLOAD:"BEGIN_UPLOAD",UPLOADING:"UPLOADING",UPLOAD_DONE:"UPLOAD_DONE",UPLOAD_FAIL:"UPLOAD_FAIL",SEND_DONE:"SEND_DONE",SEND_FAIL:"SEND_FAIL"};return{STATE:t,broadcast:e
}}var f=d(),h=f.STATE,g={upload:!1,uploadType:"file",uploadContent:null};return{$messageStateBroadcast:f,send:e,notifySendDone:u,notifySendFail:p}}(),Service.$messageReceiverModule=function(){function e(){function e(){if(!g){var e;(e="hidden")in document?document.addEventListener("visibilitychange",n):(e="mozHidden")in document?document.addEventListener("mozvisibilitychange",n):(e="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",n):(e="msHidden")in document&&document.addEventListener("msvisibilitychange",n),g=void 0!==e,p=e,l=document.title}}function t(){g&&("hidden"===p?document.removeEventListener("visibilitychange",n):"mozHidden"===p?document.removeEventListener("mozvisibilitychange",n):"webkitHidden"===p?document.removeEventListener("webkitvisibilitychange",n):"msHidden"===p&&document.removeEventListener("msvisibilitychange",n)),g=!1,p=void 0,s()}function n(e){h=document[p],h||s()}function i(e){r()&&(u(),f=o(e),c())}function r(){return g&&void 0!==p&&!Service.$device.isMobileBrowser()&&h}function o(e){return Service.Constants.i18n("PPMESSAGE")+": "+e.getMessageSummary()+"... "}function a(e){e&&(document.title=e)}function s(){u(),l&&a(l)}function c(){var e=f,t=e.substring(m,e.length)+e.substring(0,m);m++,a(t),m>e.length&&(m=0),d=$timeout(c,200)}function u(){d&&($clearTimeout(d),d=void 0),f=void 0,m=0}var p,l,d,f,h=!1,g=!1,m=0;return{register:e,unregister:t,notify:i}}var t,n=function(e){return e&&View.$conversationContentContainer.visible()&&!Ctrl.$launcher.get().isLauncherShow()&&Service.$conversationManager.activeConversation()&&Service.$conversationManager.activeConversation().uuid===e},i=function(e){return Modal.$conversationContentGroup.get(e)},r=function(e,r){var o=Service.$pubsub,a=r.getBody(),s=a.conversation.uuid;if(t&&t.notify(r),n(s))o.publish("msgArrived/chat",r);else{var c=i(s);c.addMessage(a),c.incrUnreadCount(),Ctrl.$sheetheader.incrUnread(),Ctrl.$launcher.get().isLauncherShow()?o.publish("msgArrived/launcher",r):View.$groupContent.visible()&&o.publish("msgArrived/group",r)}},o=function(n){n&&(Service.$notification.init({user_uuid:n.user_uuid,device_uuid:n.device_uuid,app_uuid:n.app_uuid}).start(),t&&t.unregister(),t=e(),t.register(),Service.$pubsub.subscribe("ws/msg",r))};return{start:o}}(),function(e){var t=function(){function t(e){return unescape(encodeURIComponent(e))}function n(n){return t(n).length>e.Constants.MESSAGE.TEXT_MAX_LEN}function i(e){return n(e.message.text.body)}function r(t){if(!t||!t.messageType)return!1;var n=e.PPMessage.TYPE;return-1!==$.inArray(t.messageType.toUpperCase(),[n.TEXT,n.EMOJI,n.IMAGE,n.FILE,n.AUDIO])}function o(){if(!a)switch(e.$app.policy()){case e.$app.POLICY.ALL:a=e.PPMessage.TO_TYPE.AP;break;case e.$app.POLICY.GROUP:a=e.PPMessage.TO_TYPE.OG;break;default:a=e.PPMessage.TO_TYPE.AP}return a}var a;return{isTextLengthLargerThan128:n,isMessageTextOverflow:i,isMessage:r,toType:o}}();e.$messageToolsModule=t}(Service),function(e){function t(n){var i=n;this.setConversationId=function(e){return i.messageConversationId=e,this},this.setConversationIdValid=function(e){return i.messageIsConversationValid=e,this},this.setMessageState=function(e){return i.messageState=e,this},this.setRawData=function(e){return i.messageRawData=e,this},this.isConversationValid=function(){return i.messageIsConversationValid},this.getBody=function(){return i},this.getMessageState=function(){return i.messageState},this.getMessageSummary=function(){return t.getMessageSummary(i)},this.send=function(){var t=e.$sendSettingsFactory.get(i);e.$msgStateReceiverFactory.get(i.messageType).listen(i.messageId),e.$messageSender.send(this,t)}}function n(n){var i={messageId:e.$tools.getUUID(),messageTimestamp:Date.now()/1e3,messageType:n,messageToType:e.$messageToolsModule.toType(),messageState:"SENDING",messageConversationId:"",messageIsConversationValid:!0,messageRawData:"",extra:{errorDescription:"",description:""},message:{text:{},file:{},image:{},welcome:{},emoji:{},audio:{},timestamp:{time:Date.now()}},user:{id:null,admin:!1,name:"",avatar:e.Constants.ICON_DEFAULT_USER},conversation:void 0};this.id=function(e){return i.messageId=e,this},this.timestamp=function(e){return i.messageTimestamp=e,this},this.toType=function(e){return i.messageToType=e,this},this.conversationId=function(e){return i.messageConversationId=e,this},this.conversationIsValid=function(e){return i.messageIsConversationValid=e,this},this.rawData=function(e){return i.messageRawData=e,this},this.messageState=function(e){return i.messageState=e,this},this.extraDescription=function(e){return i.extra.description=e,this},this.conversation=function(e){return i.conversation=e,this},this.admin=function(e){return i.user.admin=e,this},this.userName=function(e){return i.user.name=e,this},this.userIcon=function(e){return i.user.avatar=e,this},this.userId=function(e){return i.user.id=e,this},this.welcomeBody=function(e){return i.message.welcome=e,this},this.emojiMessageCode=function(e){return i.message.emoji.code=e,this},this.textMessageBody=function(e){return i.message.text.body=e,this},this.fileBody=function(e){return i.message.file=e,this},this.fileMessageLocalUrl=function(e){return i.message.file.fileUrl=e,this},this.fileMessageName=function(e){return i.message.file.fileName=e,this},this.fileMessageServerUrl=function(e){return i.message.file.fileServerUrl=e,this},this.imageBody=function(e){return i.message.image=e,this},this.imageMessageUrl=function(e){return i.message.image.url=e,this},this.audio=function(e){return i.message.audio=new t.Audio(e),this},this.timestampBody=function(e){return i.message.timestamp=e,this},this.build=function(){var n=$.extend({},i,!0);return void 0===n.conversation&&(n.conversation=e.$conversationManager.activeConversation()),new t(n)}}t.TYPE={TEXT:"TEXT",EMOJI:"EMOJI",IMAGE:"IMAGE",FILE:"FILE",AUDIO:"AUDIO",WELCOME:"WELCOME",TIMESTAMP:"TIMESTAMP"},t.TO_TYPE={AP:"AP",OG:"OG"},t.getMessageSummary=function(n){var i="",r=n,o=t.TYPE,a=e.Constants.i18n;if(!r||!r.messageType)return"";switch(r.messageType){case o.TEXT:i=r.message.text.body;break;case o.EMOJI:i=r.message.emoji.code;break;case o.FILE:i="["+a("FILE")+": "+r.message.file.fileName+"]";break;case o.IMAGE:i="["+a("IMAGE")+"]";break;case o.AUDIO:i="["+a("AUDIO")+"]";break;case o.WELCOME:i="";break;default:i=""}return i},t.Builder=n,e.PPMessage=t}(Service),function(){function e(e){function t(){return h}function n(){return d}function i(){return l}function r(){return!u&&!Service.$tools.isNull(t())}function o(){return p}function a(){u=!0}function s(){p=!0}var c=$.extend({dura:0,fid:void 0,file:void 0},e.mp3),u=!1,p=!1,l=Service.$tools.getUUID(),d=c.dura,f=c.fid,h=(c.file,Service.$tools.isNull(f)?void 0:Service.$tools.getFileDownloadUrl(f));this.id=i,this.src=t,this.duration=n,this.canPlay=r,this.markError=a,this.hasRead=o,this.markRead=s}Service.PPMessage.Audio=e}(),function(e){function t(t){var n=e.$json,i=e.$messageToolsModule,r=t,o=function(t){var n="",r=t;switch(r.messageType){case e.Constants.MESSAGE.TYPE_EMOJI:n=e.Constants.MESSAGE_SUBTYPE.TEXT;break;case e.Constants.MESSAGE.TYPE_TEXT:n=i.isMessageTextOverflow(r)?e.Constants.MESSAGE_SUBTYPE.TXT:e.Constants.MESSAGE_SUBTYPE.TEXT;break;case e.Constants.MESSAGE.TYPE_FILE:n=e.Constants.MESSAGE_SUBTYPE.FILE;break;case e.Constants.MESSAGE.TYPE_IMAGE:n=e.Constants.MESSAGE_SUBTYPE.IMAGE}return n},a=function(e){var t="",n="application/octet-stream";switch(e.messageType){case"FILE":t=e.message.file.file.type||n;break;case"IMAGE":t=e.message.image.file.type||n;break;case"TEXT":t=e.message.image.file.type||n;break;default:t=n}return t},s=function(){return r.messageToType};this.getApiMessageBody=function(){var t=new e.ApiMessage.Builder(r.messageConversationId).uuid(r.messageId).type(o(r)).toType(s()).toId(r.conversation.token).fromUuid(e.$user.getUser().getInfo().user_uuid).deviceUuid(e.$user.getUser().getInfo().device_uuid).build().getBody();switch(r.messageType){case"TEXT":var c={fid:r.message.text.fuuid};t.message_body=i.isMessageTextOverflow(r)?n.stringify(c):r.message.text.body;break;case"EMOJI":t.message_body=r.message.emoji.code;break;case"FILE":var c={fid:r.message.file.fuuid,mime:a(r)};t.message_body=n.stringify(c);break;case"IMAGE":var c={fid:r.message.image.fuuid,mime:a(r)};t.message_body=n.stringify(c)}return t}}e.PPMessageAdapter=t}(Service),function(e){var t=function(){var t=function(t){var n=t;return sendSettings=function(){switch(n.messageType){case"TEXT":return e.$textMessageSendSettings.build(n);case"EMOJI":return e.$emojiMessageSendSettings.build(n);case"IMAGE":return e.$imageMessageSendSettings.build(n);case"FILE":return e.$fileMessageSendSettings.build(n)}}(),sendSettings};return{get:t}}();e.$sendSettingsFactory=t}(Service),function(e){var t=function(){function t(t){var n=t.message.text.body,i=e.$messageToolsModule.isTextLengthLargerThan128(n),r=t.messageIsConversationValid&&i;return{upload:r,uploadType:"txt",uploadContent:n}}return{build:t}}();e.$textMessageSendSettings=t}(Service),function(e){var t=function(){function e(e){return{upload:!0,uploadContent:e.message.file.file}}return{build:e}}();e.$fileMessageSendSettings=t}(Service),function(e){var t=function(){function e(e){return{upload:!0,uploadContent:e.message.image.file}}return{build:e}}();e.$imageMessageSendSettings=t}(Service),function(e){var t=function(){function e(e){return{}}return{build:e}}();e.$emojiMessageSendSettings=t}(Service),Service.$msgStateReceiverFactory=function(){function e(e){switch(e){case"TEXT":return Service.$msgStateTextReceiver;case"EMOJI":return Service.$msgStateEmojiReceiver;case"FILE":return Service.$msgStateFileReceiver;case"IMAGE":return Service.$msgStateImageReceiver;default:return{listen:function(){}}}}return{get:e}}(),Service.$msgStateTextReceiver=function(){function e(e){var t=Service.$pubsub.subscribe("msg/send/"+e,function(e,n){var i=n.body,r=Service.$messageSender.$messageStateBroadcast.STATE;switch(n.state){case r.BUILD_DONE:Ctrl.$conversationContent.appendMessage(i);break;case r.UPLOAD_DONE:i.message.text.fuuid=n.stateInfo.fileId;break;case r.SEND_DONE:Service.$pubsub.unsubscribe(t);break;case r.SEND_FAIL:View.$userTextMessage.onSendFail(i),Service.$pubsub.unsubscribe(t)}})}return{listen:e}}(),Service.$msgStateEmojiReceiver=function(){function e(e){var t=Service.$pubsub.subscribe("msg/send/"+e,function(e,n){var i=n.body,r=Service.$messageSender.$messageStateBroadcast.STATE;switch(n.state){case r.BUILD_DONE:Ctrl.$conversationContent.appendMessage(i),View.$composerContainer.focus();break;case r.SEND_DONE:Service.$pubsub.unsubscribe(t);break;case r.SEND_FAIL:View.$userEmojiMessage.onSendFail(i),Service.$pubsub.unsubscribe(t)}})}return{listen:e}}(),Service.$msgStateFileReceiver=function(){function e(e){var t=Service.$pubsub.subscribe("msg/send/"+e,function(e,n){var i=n.body,r=Service.$messageSender.$messageStateBroadcast.STATE,o="#pp-conversation-part-file-by-user-o2-"+i.messageId;switch(n.state){case r.BEGIN_UPLOAD:i.message.file.fileUploadId=n.stateInfo.uploadTaskId,Ctrl.$conversationContent.appendMessage(i),View.$composerContainer.focus(),$(o).css({opacity:.6});break;case r.UPLOADING:var a=n.stateInfo.uploadProgress;if(0>a)return;100>=a&&$("#pp-uploading-bar-state-"+i.message.file.fileUploadId).css("width",a+"%");break;case r.UPLOAD_DONE:var s=n.stateInfo.fileId;i.message.file.fuuid=s,i.message.file.fileServerUrl=Service.$tools.getFileDownloadUrl(s,i.message.file.fileName),$("#pp-uploading-bar-outer-"+i.message.file.fileUploadId).hide();break;case r.UPLOAD_FAIL:$("#pp-uploading-bar-outer-"+i.message.file.fileUploadId).hide();break;case r.SEND_DONE:$("#pp-conversation-part-file-by-user-o2-"+i.messageId).css({opacity:1}),i.message.file.fileServerUrl&&$("#pp-conversation-part-file-by-user-a-"+i.messageId).attr("href",i.message.file.fileServerUrl),Service.$pubsub.unsubscribe(t);break;case r.SEND_FAIL:$("#pp-conversation-part-file-by-user-timestamp-"+i.messageId).text(i.extra.errorDescription).css({color:"red",display:"block"}),Service.$pubsub.unsubscribe(t)}})}return{listen:e}}(),Service.$msgStateImageReceiver=function(){function e(e){var t=Service.$pubsub.subscribe("msg/send/"+e,function(e,n){var i=n.body,r=Service.$messageSender.$messageStateBroadcast.STATE;switch(n.state){case r.BEGIN_UPLOAD:i.message.image.fileUploadId=n.stateInfo.uploadTaskId,Ctrl.$conversationContent.appendMessage(i),View.$composerContainer.focus(),View.$userImageMessage.onBeginUpload(i.messageId);break;case r.UPLOADING:var o=n.stateInfo.uploadProgress;if(0>o)return;100>=o&&$("#pp-uploading-bar-state-"+i.message.image.fileUploadId).css("width",o+"%");break;case r.UPLOAD_DONE:var a=n.stateInfo.fileId;i.message.image.fuuid=a,i.message.image.fileServerUrl=Service.$tools.getFileDownloadUrl(a),$("#pp-uploading-bar-outer-"+i.message.image.fileUploadId).hide();break;case r.UPLOAD_FAIL:$("#pp-uploading-bar-outer-"+i.message.image.fileUploadId).hide();break;case r.SEND_DONE:View.$userImageMessage.onSendDone(i.messageId,i.message.image.fileServerUrl),Service.$pubsub.unsubscribe(t);break;case r.SEND_FAIL:View.$userImageMessage.onSendFail(i.messageId,i.extra.errorDescription),Service.$pubsub.unsubscribe(t)}})}return{listen:e}}(),Service.$notifyAuth=function(){function e(e,n){function i(){var n=Service.$api,i=Service.$json,r=e.getWsSettings(),o=n.getApiToken(),a=r.user_uuid,s=r.device_uuid,c=r.app_uuid,u=!1,p={title:document.title,location:function(){var e={};for(var t in location)location.hasOwnProperty(t)&&"string"==typeof location[t]&&(e[t]=location[t]);return e}()};e.write(i.stringify({type:t,api_token:o,app_uuid:c,user_uuid:a,device_uuid:s,extra_data:p,is_service_user:u}))}function r(){if(n&&(0===n.error_code||0===n.code)){var t=e.getWsSettings();Service.$api.getUnackedMessages({app_uuid:Service.$ppSettings.getAppUuid(),from_uuid:t.user_uuid,device_uuid:t.device_uuid},function(t){t.list&&t.message&&$.each(t.list,function(n,i){var r=t.message[i],o=null;r&&(o=Service.$json.parse(r),o.pid=i,Service.$notifyMsg.get(e,o).dispatch())})})}}return{auth:i,dispatch:r}}var t="auth";return{get:e}}(),Service.$notifyMsg=function(){function e(e,i){function r(){var n=i;if(n){var r=Service.$json.stringify({type:t,send:n});e.write(r,function(){throw new Error("ws not open")})}}function o(){var e=void 0!==i.what&&i.what===n;e?a(i):s(i)}function a(e){var t=e.extra.uuid;t&&(0===e.code?Service.$messageSender.notifySendDone(t):Service.$messageSender.notifySendFail(t))}function s(e){c.ackMessage({list:[e.pid]}),new Service.ApiMessageAdapter(e).asyncGetPPMessage(function(e,t){t&&u.publish("ws/msg",e)})}var c=Service.$api,u=Service.$pubsub;Service.$debug;return{send:r,dispatch:o}}var t="send",n="SEND";return{get:e}}(),Service.$notification=function(){function e(e,i){n()?(t().send(e),Service.$debug.d("[Message][Send]",e)):i&&i(e)}function t(){return o}function n(){return null!=o&&o.readyState===WebSocket.OPEN}function i(){return r}var r=null,o=null,a=Configuration.web_socket_url,s=!("undefined"==typeof WebSocket),c=null,u=null,p=function(){null!=r&&null!=o&&Service.$notifyAuth.get(Service.$notification).auth()},l=function(e){Service.$debug.d("[WebSocket][Close]: ",e),null!=r&&(o=null,u&&u())},d=function(e){var t=Service.$json,n=Service.$debug,i="string"==typeof e.data&&function(){try{return t.parse(e.data)}catch(i){return void(i&&n.d(i))}}()||"object"==typeof e.data&&e.data;void 0!==i&&(n.d("[Message][Arrived][WsMessage]:",i),Service.$notifyFactory.get(Service.$notification,i).dispatch())},f=function(e){Service.$debug.error("[WebSocket][Error]: ",e),o=null},h=function(){null!=o&&o.close()},g=function(){null!=o&&o.readyState!=WebSocket.CONNECTING&&o.readyState!=WebSocket.CLOSED||m()},m=function(){x()},v=function(){null!=c&&(clearInterval(c),c=null)},b=function(){v(),c=setInterval(g,1e4)},w=function(e){return r=e,this},x=function(){s&&null!=r&&null==o&&(o=new WebSocket(a),o.onopen=p,o.onclose=l,o.onmessage=d,o.onerror=f,b())},y=function(e){u=e,h(),v()};return{init:w,start:x,reset:y,write:e,getWs:t,isWsOk:n,getWsSettings:i,onWebSocketMessage:d}}(),Service.$notifyFactory=function(){function e(e,i){var r,o=t(i);switch(o){case n.MSG:r=Service.$notifyMsg;break;case n.ONLINE:r=Service.$notifyOnline;break;case n.TYPING:r=Service.$notifyTyping;break;case n.AUTH:r=Service.$notifyAuth;break;case n.SYS:r=Service.$notifySys;break;case n.CONVERSATION:r=Service.$notifyConversation;break;default:r=Service.$notifyUnknown}return r.get(e,i.msg?i.msg:i)}function t(e){var t=e.type;if(t===n.MSG)e.msg.mt===n.SYS&&(t=n.SYS);else if(t===n.ACK)switch(e.what){case i.AUTH:t=n.AUTH;break;case i.SEND:t=n.MSG;break;case i.CONVERSATION:t=n.CONVERSATION}return t}var n={AUTH:"AUTH",ACK:"ACK",MSG:"MSG",ONLINE:"ONLINE",SYS:"SYS",TYPING:"TYPING",CONVERSATION:"CONVERSATION"},i={AUTH:"AUTH",SEND:"SEND",CONVERSATION:"CONVERSATION"};return{get:e}}(),Service.$notifyOnline=function(){function e(e,t){function n(){t&&Service.$pubsub.publish("ws/online",t)}return{dispatch:n}}return{get:e}}(),Service.$notifySys=function(){function e(e,n){function i(){n&&r(n)&&e.reset()}function r(e){return e&&e.ms&&e.ms===t}return{dispatch:i}}var t="LOGOUT";return{get:e}}(),Service.$notifyTyping=function(){function e(e,r){function o(n){e.isWsOk()&&(e.write(Service.$json.stringify({type:t,conversation_uuid:n})),__Monitor.report(__MonitorEvent.watch,n))}function a(t){t&&e.isWsOk()&&(e.write(Service.$json.stringify({type:i,conversation_uuid:t})),__Monitor.report(__MonitorEvent.unwatch,t))}function s(){e.isWsOk()&&(e.write(Service.$json.stringify({type:n})),__Monitor.report(__MonitorEvent.typing,n))}function c(){void 0!==r&&Service.$pubsub.publish("ws/typing",r)}return{dispatch:c,watch:o,unWatch:a,typing:s}}var t="typing_watch",n="typing",i="typing_unwatch";return{get:e}}(),Service.$notifyUnknown=function(){function e(e,t){function n(){Service.$debug.d("unknown msg : ",t)}return{dispatch:n}}return{get:e}}(),Service.$notifyConversation=function(){function e(e,i){function r(){i.code===n.NOERR&&Service.$pubsub.publish(t.AVALIABLE,o(i))}function o(e){return e.extra&&e.extra.conversation_uuid}return{dispatch:r}}var t={AVALIABLE:"NOTIFY_CONVERSATION/AVALIABLE"},n={NOERR:0,WAITING:11};return{EVENT:t,get:e}}(),function(){View._booted=!1,View.bootMe=function(e){View._booted&&!e||(View.$settings=new View.PPSettings,View.$textUrlChecker=new View.TextUrlChecker,View._booted=!0)},View._pool={},View.add=function(e,t){View._pool[e]=t},View.find=function(e){return View._pool[e]}}(),function(e){function t(e,t,n){function i(e,t,n,i){var r={};t&&(n?($.each(t,function(e,t){if(void 0!==t||null!==t)switch(e){case"className":r["class"]=t;break;default:r[e]=t}}),!r["class"]&&r.id&&(r["class"]=r.id)):i&&(r.id=i,r["class"]=i));var o=document.createElement(e);for(var a in r)"event"!=a&&"selector"!=a&&o.setAttribute(a,r[a]);if(r.event){var s=i?"#"+i:r.selector,c=["click","mouseover","mouseleave","mousedown","keydown","keyup","change","input propertychange","focus","blur","init"];if(!s)throw new Error("No jQuerySelector");s&&$.each(r.event,function(e,t){if(-1!=$.inArray(e,c))switch(e){case"init":setTimeout(function(){t.apply(this,arguments)});break;case"change":setTimeout(function(){$(s).bind(e,function(e){t.apply(this,$(this))})});break;default:setTimeout(function(){$(s).bind(e,function(e){t.apply(this,arguments)})})}})}return $(o)}var r=t&&"object"==typeof t,o=r?t.id:t,a=i(e,t,r,o),s=n;this.controller=s,this.getElement=function(){return a},this.getHTML=function(){return a[0].outerHTML},this.add=function(e){return a.append(e.getElement()[0].outerHTML),this},this.text=function(e){return a.text(e),this},this.html=function(e){return a.html(e),this},this.show=function(e){return a.css("display",e?"block":"none"),this},this.ctrl=function(e){s=e},this.getController=function(){return s},this.renderTo=function(e){}}e.PPElement=t,e.Element=t}(View),function(e){function t(){e.PPElement.call(this,"style",{id:"pp-styles",type:"text/css"}),this.text("@charset \"UTF-8\" .pp-container,.pp-location{z-index:2147483647;bottom:0}.pp-container p,.pp-p-no-margin{-webkit-margin-before:0!important;-webkit-margin-after:0!important;-webkit-margin-start:0!important;-webkit-margin-end:0!important}.pp-container,.pp-launcher-icon,.pp-location,.pp-sheet-header{position:absolute;right:0}.pp-container a,.pp-container b,.pp-container div,.pp-container p,.pp-container span,.pp-container textarea,.pp-container u{font-family:'Helvetica Neue',Helvetica,Arial,sans-serif!important;font:normal normal 100% 'Helvetica Neue',Helvetica,Arial,sans-serif;font-style:normal;letter-spacing:normal;font-stretch:normal;font-variant:normal;-webkit-text-emphasis:none;text-shadow:none;text-transform:none;-webkit-font-smoothing:antialiased;word-wrap:break-word}.pp-container *,.pp-container :after,.pp-container :before{-webkit-box-sizing:content-box!important;-moz-box-sizing:content-box!important;box-sizing:content-box!important}.pp-conversation-container{display:none}.pp-text-link-user{color:#fff!important}.pp-text-link-admin{color:#455A64!important}.pp-container .pp-box-sizing{-webkit-box-sizing:content-box!important;-moz-box-sizing:content-box!important;box-sizing:content-box!important}.pp-container .pp-box-sizing-borderbox{-webkit-box-sizing:border-box!important;-moz-box-sizing:border-box!important;box-sizing:border-box!important}.pp-fixme{clear:both}.pp-selectable{-o-user-select:text;-moz-user-select:text;-webkit-user-select:text;user-select:text}.pp-unselectable{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.pp-launcher-icon{bottom:0;width:50px;height:50px;max-width:50px;border-radius:25px;box-shadow:0 6px 13px 0 rgba(0,0,0,.23)}.pp-launcher-icon:hover{cursor:pointer}.pp-sheet-header{z-index:2147483002;box-shadow:0 1px 2px 0 rgba(0,0,0,.12);background:#fff;overflow:hidden;top:0;width:100%;height:48px}.pp-sheet-header-title-container{position:absolute;left:0;top:0;width:100%;height:100%;text-align:center;-moz-text-align-last:center;text-align-last:center}.pp-container .pp-sheet-header-title{font-size:16px;line-height:48px;font-weight:500;color:#465C66;letter-spacing:.2px;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline}.pp-sheet-header-button{position:relative;margin:0 20px 0 15px;height:48px;float:right}.pp-sheet-header-button-minimize-container{position:relative;margin:0;height:48px;width:48px;float:right;cursor:pointer}.pp-sheet-header-button:hover{cursor:pointer}.pp-sheet-header-minimize-button-icon{background-position:center center;width:16px;background-repeat:no-repeat;background-size:15px 15px;height:48px;position:relative;margin:auto}.pp-composer-container-action-btn,.pp-launcher-button,.pp-sheet-header .pp-sheet-header-button-icon{background-position:center;background-repeat:no-repeat}.pp-sheet-header .title-container{display:inline-block}.pp-sheet-header .clickable{cursor:pointer}.pp-sheet-header .down-icon{cursor:pointer;display:inline-block;height:10px;margin-left:5px;width:10px}.pp-container .pp-group-content-container{box-sizing:border-box;display:none;position:relative;height:100%;margin:0 auto;padding-bottom:48px;overflow-y:auto;top:48px}.pp-group-item{padding-top:17px;padding-left:17px;cursor:pointer}.pp-group-item *{cursor:pointer}.pp-group-item img{border-radius:50%;float:left;margin-top:5px;display:inline-block;width:42px;height:42px}.pp-group-item .body-container{margin-left:55px;padding-right:17px;border-bottom:1px solid #e7e7e7;height:65px}.pp-group-item .pp-header{margin-bottom:5px}.pp-group-item .pp-timestamp{float:right;font-size:12px;line-height:20px;color:#aaa;width:50px;text-align:right}.pp-group-item .title-container{margin:0 50px 0 0}.pp-group-item .pp-title{color:rgba(96,104,110,.8);font-size:15px;line-height:22px;font-weight:500;display:block;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pp-group-item .pp-summary{color:rgba(96,104,110,.8);font-size:14px;font-weight:400;line-height:19px;height:40px;overflow:hidden;position:relative;padding-right:17px;word-break:break-word}.pp-group-item .pp-content{line-height:19px}.pp-group-item .pp-unread{color:#3d4347;font-weight:500}.pp-group-item .readstate{background-color:red;border-radius:50%;bottom:27px;color:#fff;display:none;font-size:12px;height:16px;width:16px;position:absolute;right:0;text-align:center;top:6px}.pp-group-item-hover{background-color:#f5f5f6}.pp-sheet-header .pp-sheet-conversations-button{float:left;cursor:pointer;display:none;position:relative;margin:0 20px;height:100%}.pp-sheet-header .pp-sheet-header-button-icon{background-size:15px 12px;margin:0 auto;width:18px;height:100%;opacity:.4;float:left}.pp-sheet-header .pp-unread-count{border-radius:50%;border:2px solid #fff;font-size:11px;line-height:16px;background-color:#0074b0;text-align:center;color:#fff;position:absolute;width:16px;height:16px;top:11px;left:11px;cursor:pointer;display:none}.pp-relative-time{cursor:pointer}.pp-emoji-selector{background-color:#fff;width:324px;height:257px;float:right;margin-right:16px;border-radius:3px;border:1px solid #D0D4D8;box-shadow:0 0 3px 1px rgba(0,0,0,.1)}.pp-emoji-selector-triangle{right:25px;border:solid transparent;position:absolute;pointer-events:none;border-color:rgba(170,170,170,0);border-top-color:#aaa;border-width:8px;z-index:2147483646}.pp-emoji-selector-triangle-mask{right:25px;border:solid transparent;position:absolute;pointer-events:none;border-color:rgba(170,170,170,0);border-top-color:#FFF;margin-top:-1px;border-width:8px;z-index:2147483646}.pp-container .pp-emoji-selector-panel-header{background-color:#fff;height:35px;width:100%;border-radius:3px;text-align:center;font-size:24px}.pp-emoji-selector-panel-header span{line-height:30px;width:45px;margin-top:5px;text-align:center;display:inline-block;border-radius:3px 3px 0 0;cursor:pointer;margin-right:5px}.pp-emoji-selector-panel-header span.active{box-shadow:0 -1px 3px 0 rgba(0,0,0,.1);background-color:#FFF}.pp-emoji-selector-content{box-shadow:0 -1px 3px 0 rgba(0,0,0,.1);background-color:#fff;height:212px;width:314px;overflow-y:auto;display:block;border-radius:0 0 3px 3px;position:relative;left:0;top:0;padding:5px}.pp-container .pp-emoji-selector-content span{margin:6px;width:30px;line-height:30px;display:inline-table;cursor:pointer;text-align:center;font-size:21px}.pp-emoji-selector-sibling{background-color:transparent;overflow:hidden;height:259px}.pp-messenger-panel{width:368px;height:100%;position:fixed;right:0;top:0;bottom:0;border-left:1px solid #e7e7e7;z-index:2147483646;box-shadow:0 0 4px 1px rgba(0,0,0,.08)}.pp-container .pp-launcher-badge{position:absolute;right:-7px;top:0;border-radius:50%;font-size:12px;line-height:18px;background-color:#ff3c00;text-align:center;color:#fff;width:18px;height:18px;cursor:pointer;opacity:1;display:block;visibility:visible}.pp-launcher-button,.pp-launcher-button-container{width:48px;height:48px}.pp-launcher-button{border-radius:50%;border-style:solid;border-width:0;position:absolute;bottom:0;right:0;cursor:pointer;border-color:#004c88;box-shadow:0 6px 13px 0 rgba(0,0,0,.23)}.pp-launcher-button-container-inactive{transition:opacity,.1s;opacity:0;visibility:hidden}.pp-launcher-button-container-active{opacity:1;visibility:visible}.pp-launcher-button-minimized{-webkit-animation:pp-launcher-minimize .1s linear 0s both;animation:pp-launcher-minimize .1s linear 0s both;transition:background-image 0s linear .1s}.pp-launcher-button-maximize{-webkit-animation:pp-launcher-maximize .1s linear 0s both;animation:pp-launcher-maximize .1s linear 0s both}.pp-launcher-button-inactive{visibility:hidden}.pp-launcher-container{position:fixed;height:48px;z-index:2147483646}.pp-loading{box-sizing:border-box;display:none;height:100%;margin:0 auto;top:48px}.pp-loading-spinner{width:28px;height:28px;background-size:28px 28px;background-repeat:no-repeat;position:absolute;left:50%;top:50%;margin-left:-14px;animation:loading 1s linear 0s infinite both;-o-animation:loading 1s linear 0s infinite both;-moz-animation:loading 1s linear 0s infinite both;-webkit-animation:loading 1s linear 0s infinite both}.pp-loading-text{color:gray;font-size:14px!important;width:100%;position:absolute;text-align:center;top:calc(50% + 35px)}@-webkit-keyframes loading{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes loading{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes loading{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loading{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes pp-launcher-minimize{0%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0);transform:scale(0)}}@-keyframes pp-launcher-minimize{0%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@-webkit-keyframes pp-launcher-maximize{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}@-keyframes pp-launcher-maximize{0%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}.pp-conversation-content-maximize{opacity:1;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;transition:opacity .1s linear .15s,-webkit-transform .25s ease-in-out;transition:transform .25s ease-in-out,opacity .1s linear .15s;transition:transform .25s ease-in-out,opacity .1s linear .15s,-webkit-transform .25s ease-in-out}.pp-conversation-sheet-minimized{opacity:0;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;transition:opacity .1s linear,visibility 0s linear .25s,-webkit-transform .25s ease-in-out;transition:transform .25s ease-in-out,opacity .1s linear,visibility 0s linear .25s;transition:transform .25s ease-in-out,opacity .1s linear,visibility 0s linear .25s,-webkit-transform .25s ease-in-out}.pp-composer{position:relative;max-width:336px;margin:0 auto}.pp-composer-container-action-btn{height:15px;width:15px;position:relative;float:right;cursor:pointer;top:5px;margin:0 2px 0 0;padding:5px;opacity:.4;background-size:15px 15px}.pp-composer-container-emoji-btn{display:inline;margin-right:2px}.pp-composer-container-tools-container{position:absolute;top:3px;right:6px}.pp-composer-container-warning{bottom:60px;background:0 0;width:100%;text-align:center}.pp-composer-container-form{margin-bottom:0!important;padding:0!important;float:right;width:100%}.pp-container .pp-composer-container-warning-span{font-size:14px;color:red}.pp-container .pp-composer-container-textarea{line-height:20px;border-radius:4px;border:1px solid #cfd8dc;height:100%;width:100%;outline:0!important;color:#455A64;resize:none;font-size:14px;padding:10px 70px 5px 14px;word-break:break-all;overflow:hidden;max-height:210px;min-height:40px}.pp-composer-container-powered-by-container{padding:2px}.pp-container .pp-conversation-part-pulltorefreshbutton{font-size:14px;color:gray;cursor:pointer}.pp-composer-container-input{display:none!important}.pp-container .pp-powered-by{width:100%;color:#b0bec5;text-align:center;clear:both;font-weight:500;line-height:22px;padding:7px;font-size:13px}.pp-powered-by a{text-align:center;cursor:pointer;color:inherit;text-decoration:none}.pp-powered-by u{text-decoration:underline!important}.pp-container .pp-powered-by-span{color:#b6c2c9;float:none;font-size:13px;margin-left:0}.pp-conversation-part{margin-bottom:16px}.pp-conversation-part-welcome-outer-1{display:block;margin-bottom:16px}.pp-conversation-part-welcome-outer-2{border-top:0;border-bottom:1px solid #e4e5e7;padding:0 20px 20px}.pp-conversation-part-welcome-icon{bacground-size:28px 28px;background-repeat:no-repeat;width:28px;height:28px;margin:0 auto 15px}.pp-container .pp-conversation-part-welcome-body{font-weight:400;font-size:14px;color:#90A4AE;line-height:18px;text-align:center;display:block;-moz-user-select:text;-webkit-user-select:text;-ms-user-select:text}.pp-conversation-content{overflow-y:auto;position:absolute;top:48px;bottom:79px;right:0;width:100%;padding:8px;box-sizing:border-box;transition-timing-function:cubic-bezier(.1,.57,.1,1);-webkit-transition-timing-function:cubic-bezier(.1,.57,.1,1);transition-duration:0s;-webkit-transition-duration:0s;transform:translate(0,0) translateZ(0)}.pp-conversation-part-text-by-admin-outer{text-align:left;margin-bottom:16px;clear:both}.pp-conversation-part-text-by-admin-outer-2{position:relative;width:100%}.pp-conversation-part-text-by-admin-avatar{margin-right:5px;border-radius:50%;width:28px;height:28px;float:left;position:relative;overflow:hidden}.pp-conversation-part-text-by-admin-outer-3{position:relative}.pp-conversation-part-text-by-admin-body-container{border-color:#dadee2;border-radius:4px;border-width:1px;border-style:solid;position:relative;max-width:80%;display:inline-block;background-color:#fff;color:#455A64;-moz-user-select:text;-webkit-user-select:text;-ms-user-select:text;top:3px}.pp-container .pp-conversation-part-serve-name{font-size:12px;color:#455A64;text-align:left}.pp-container .pp-conversation-part-text-by-admin-body{font-size:14px;font-weight:400;line-height:20px;padding:12px 17px;text-align:left;word-break:break-all;white-space:pre-wrap}.pp-conversation-part-text-by-admin-triangle{width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-right:4px solid #dadee2;position:relative;float:left;margin-top:10px;margin-right:-1px;top:3px}.pp-container .pp-conversation-part-text-by-admin-timestamp-container{font-size:12px;line-height:20px;color:#c9cbcf;position:relative;top:0;display:inline-block}.pp-conversation-part-emoji-by-admin-outer{text-align:right;margin-bottom:16px;width:100%;position:relative;overflow:hidden}.pp-conversation-part-emoji-by-admin-avatar{margin-right:7px;border-radius:50%;width:28px;height:28px;float:left;position:relative}.pp-conversation-part-emoji-by-admin-body-container{float:left;position:relative}.pp-container .pp-conversation-part-emoji-by-admin-body{font-size:96px;line-height:1.1;float:left;position:relative;margin-top:5px}.pp-container .pp-conversation-part-emoji-by-admin-timestamp{font-size:12px;line-height:20px;color:#c9cbcf;clear:both;display:block;float:left;margin-top:5px}.pp-conversation-part-image-by-user{text-align:right;margin-bottom:16px}.pp-conversation-part-image-by-user-o{text-align:right;margin-bottom:16px;position:relative;overflow:hidden;clear:both}.pp-conversation-part-image-by-user-img{cursor:pointer;border-radius:4px;margin:0 0 5px;padding:0;right:0;max-width:242px;float:right}.pp-container .pp-conversation-part-image-by-user-timestamp{position:relative;float:right;font-size:12px;line-height:20px;color:#c9cbcf;clear:both}.pp-conversation-part-image-by-admin-o{text-align:right;margin-bottom:16px;clear:both}.pp-conversation-part-image-by-admin-o1{position:relative;width:100%}.pp-conversation-part-image-by-admin-avatar{margin-right:7px;border-radius:50%;width:28px;height:28px;float:left;position:relative;overflow:hidden}.pp-conversation-part-image-by-admin-o2{overflow:hidden;position:relative}.pp-conversation-part-image-by-admin-o3{overflow:hidden}.pp-conversation-part-image-by-admin-o4{max-width:242px;float:left;position:relative}.pp-conversation-part-image-by-admin-img{cursor:pointer;border-radius:4px;margin:3px 0 0;padding:0;width:100%}.pp-container .pp-conversation-part-image-by-admin-timestamp-container{position:relative;float:left;font-size:12px;line-height:20px;color:#c9cbcf}.pp-conversation-part-file-by-admin-outer{text-align:right;margin-bottom:16px;clear:both}.pp-conversation-part-file-by-admin-outer-2{position:relative;width:100%}.pp-conversation-part-file-by-admin-avatar{margin-right:7px;border-radius:50%;width:28px;height:28px;float:left;position:relative;overflow:hidden}.pp-conversation-part-file-by-admin-outer-3{overflow:hidden;position:relative}.pp-conversation-part-file-by-admin-outer-4{max-width:80%;float:left;position:relative;margin-top:3px}.pp-conversation-part-file-by-admin-outer-5{display:block;background-color:#0071b2;border-radius:4px;border-width:1px;border-style:solid;padding:5px;overflow:hidden}.pp-conversation-part-file-by-admin-upload-icon{position:relative;float:left;width:32px;height:32px;background-size:16px 15px;background-position:center;background-repeat:no-repeat;border-right:1px solid rgba(255,255,255,.3)}.pp-conversation-part-file-by-admin-outer-6{vertical-align:middle;margin:5px 10px 0;overflow:hidden}.pp-container .pp-conversation-part-file-by-admin-file-link{font-size:14px;font-weight:400;line-height:20px;position:relative;float:left;color:#fff;text-decoration:underline;cursor:pointer;overflow:hidden;word-break:break-all;max-height:20px;margin-left:5px}.pp-container .pp-conversation-part-file-by-admin-timestamp-container{position:relative;float:left;font-size:12px;line-height:20px;color:#c9cbcf}.pp-conversation-part-file-by-user-o{width:100%;position:relative;overflow:hidden}.pp-conversation-part-file-by-user-o2{float:right;padding:5px;background-color:#0071b2;border-radius:4px;border-width:1px;border-style:solid;margin-bottom:5px;max-width:80%}.pp-conversation-part-file-by-user-upload-icon{float:left;width:32px;height:32px;background-size:16px 15px;background-position:center;background-repeat:no-repeat;border-right:1px solid rgba(255,255,255,.3)}.pp-conversation-part-file-by-user-link-container{max-height:20px;overflow:hidden;margin:5px 5px 0 32px}.pp-container .pp-conversation-part-file-by-user a{color:#fff;font-size:14px;font-weight:400;line-height:20px;text-decoration:underline;word-break:break-all;margin:5px 5px 0 10px}.pp-container .pp-conversation-part-file-by-user-timestamp{font-size:12px;line-height:20px;color:#c9cbcf;clear:both;text-align:right}.pp-conversation-part-center{display:table;margin:0 auto 10px}.pp-uploading-bar,.pp-uploading-bar-remove{display:inline-block;vertical-align:middle}.pp-container .pp-conversation-part-timestamp-time{background-color:#cecece;padding:4px;border-radius:4px;font-size:14px}.pp-uploading-bar{border-radius:4px;position:relative;width:50px;height:6px;border:1px solid #ccc;background-color:#fff;margin:0 5px}.pp-uploading-bar-state{transition:width .4s;border-radius:3px;background-color:#0071b2;position:absolute;top:0;left:0;bottom:0}.pp-uploading-bar-remove{background-size:14px 14px;background-repeat:no-repeat;opacity:.8;cursor:pointer;width:14px;height:14px;right:-22px;top:2px}.pp-container .pp-uploading-bar-outer{color:#c9cbcf;font-size:14px;display:block;float:right}.pp-launcher-preview-outer{height:100px;max-width:274px;float:right;margin-right:52px;width:100%;position:relative;margin-top:-60px}.pp-launcher-preview-outer-2{padding:10px;position:relative;float:right;cursor:pointer}.pp-launcher-preview-outer-3{border-radius:10px;background:#fff;padding:13px;position:relative;box-shadow:0 6px 13px 0 rgba(0,0,0,.23)}.pp-launcher-preview-close{background-size:18px 18px;background-repeat:no-repeat;cursor:pointer;width:20px;height:20px;float:left;margin-top:-20px;margin-left:-20px;display:none}.pp-launcher-preview{position:relative}.pp-launcher-preview-p-outer{overflow:hidden;max-height:37px;min-height:18px}.pp-launcher-preview-p{word-break:break-all;line-height:19px;color:#333}.pp-launcher-preview-triangle-container{float:right;margin-right:-15px;position:relative}.pp-launcher-preview-triangle{width:0;height:0;border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff;margin-left:calc(100% - 12px);margin-top:18px}.pp-no-conversations-icon{background-size:79px 59px;background-repeat:no-repeat;display:block;width:79px;height:59px;margin:0 auto 10px}.pp-container .pp-no-conversations-p{color:#CDCFD2;width:96px;margin:auto;font-size:16px;text-align:center}.pp-no-conversations{margin-top:200px}.pp-composer-container{width:100%;background:0 0;position:absolute;bottom:0;right:0;padding:5px}.pp-composer-send-button{border-radius:4px;margin-left:8px;height:40px;float:right;text-decoration:none;padding:0 9px;display:inline-block;color:#fff;cursor:pointer;background:#CCC}.pp-admin-avatar,.pp-admin-avatar img{margin:0 auto;border-radius:50%}.pp-composer-send-button p{font-size:14px;line-height:25px}.pp-app-profile-container{padding:16px 16px 0}.pp-app-profile{padding:20px 12px 26px;background-color:#fff;overflow:hidden;box-shadow:0 0 3px rgba(0,0,0,.2);border-radius:5px}.pp-active-admins{text-align:center;color:#364850;padding-top:24px}.pp-container .pp-app-profile-text{padding:14px 30px 0;text-align:center;font-weight:400;font-size:13px;color:#78909C;line-height:19px}.pp-container .pp-app-profile-team{text-align:center;color:#455a64;font-weight:500;font-size:15px;line-height:1.8}.pp-active-admin{display:inline-block}.pp-admin-avatar img{width:48px;height:48px}.pp-active-admin .state{margin-top:10px;font-size:12px}.pp-active-admin .online{color:#A6D84F}.pp-active-admin .offline{color:#F90}.pp-container .pp-active-admin-name{font-size:12px;color:#90A4AE;text-align:center;padding-top:7px;width:80px;overflow:hidden;text-overflow:ellipsis}.pp-launcher-hovercard{background-color:#fafafb;border-radius:5px;border:1px solid rgba(0,0,0,.1);box-shadow:0 0 10px rgba(0,0,0,.08);width:340px;position:absolute;bottom:64px;right:-5px}.pp-launcher-hovercard-welcome{background-color:#fff;border-radius:5px 5px 0 0;border-bottom:1px solid #dfe0e1;box-shadow:0 1px 1px #f0f0f1;padding:26px 20px;overflow:hidden;cursor:pointer}.pp-launcher-hovercard-close{opacity:1;transition:opacity .2s ease-in-out;cursor:pointer;position:absolute;top:-30px;right:-1px;border-radius:40px;box-shadow:0 0 20px rgba(0,0,0,.12);padding:6px 10px 5px 22px;font-size:12px;color:#fff;background-position:10px center;line-height:12px;background-size:8px 8px;background-repeat:no-repeat}.pp-launcher-hovercard-textarea{padding:18px 16px;font-size:16px;border-radius:0 0 5px 5px;height:42px;cursor:pointer}.pp-container .pp-launcher-hovercard-textarea-textarea{width:100%;height:42px;background-color:#fff;font-weight:400;color:#455a64;resize:none;border:1px solid #cfd8dc;font-size:14px;line-height:20px;padding:10px 70px 5px 14px;border-radius:4px;outline:0}.pp-container .pp-textarea-focus{border-color:#74BEFF;box-shadow:0 0 4px 0 rgba(75,171,255,.38)}.pp-launcher-hovercard-admins{width:107px;position:relative;float:left;height:50px;padding-bottom:35px;cursor:pointer;text-align:center}.pp-launcher-hovercard-text{float:right;width:174px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;cursor:pointer}.pp-container .pp-launcher-hovercard-app-name{font-weight:700;font-size:14px;color:#37474f;margin-bottom:7px;cursor:pointer}.pp-container .pp-launcher-hovercard-welcome-text{font-size:12px;color:#78909c;line-height:1.5;cursor:pointer}.pp-launcher-hovercard:after,.pp-launcher-hovercard:before{top:100%;right:20px;border:solid transparent;content:' ';height:0;width:0;position:absolute;pointer-events:none}.pp-launcher-hovercard:before{border-color:rgba(204,204,204,0);border-top-color:rgba(0,0,0,.14);border-width:9px;margin-left:-6px}.pp-launcher-hovercard:after{border-color:rgba(250,250,251,0);border-top-color:#fafafb;border-width:8px;margin-left:-5px;right:21px}.pp-launcher-hovercard .groups-header{margin:30 auto 20;text-align:center;font-size:20px;color:#000}.pp-launcher-hovercard .groups-footer{margin:30 auto;text-align:center;clear:both;color:#989494}.pp-launcher-hovercard .groups-body{width:290px;margin:10 auto}.pp-launcher-hovercard .groups-body .item{background-color:#F3F3F3;border:1px solid #FBF0F0;border-radius:5px;box-shadow:2px 2px 1px #E6E3E3;clear:both;cursor:pointer;height:50px;margin-bottom:20px;padding:5 5 5 15px}.pp-launcher-hovercard .groups-body .left{float:left;width:50px}.pp-launcher-hovercard .groups-body .img-container{display:inline-block;margin-left:-22px;position:relative}.pp-launcher-hovercard .groups-body .img-container:first-child{margin-left:0}.pp-launcher-hovercard .groups-body .right{float:left;margin-left:10px}.pp-launcher-hovercard .group-name{margin-top:5px;font-size:16px;color:#3E3C3C}.pp-launcher-hovercard .online-time{font-size:14px;margin-top:5px;color:gray}.pp-launcher-hovercard img{width:46px;height:46px;margin:0 auto;border-radius:50%;border:2px solid #fff}.pp-launcher-admin-avatar{position:relative;display:inline-block;top:0;cursor:pointer;margin-left:-22px}.pp-launcher-admin-avatar:first-child{margin-left:0}.pp-launcher-admin-avatar img{width:46px;height:46px;margin:0 auto;border-radius:50%;border:2px solid #fff}.pp-container img.grayscale{-webkit-filter:grayscale(1);-webkit-filter:grayscale(100%);filter:grayscale(100%);filter:gray}#pp-container .pp-image-viewable{cursor:-webkit-zoom-in;cursor:zoom-in}#pp-container .pp-image-viewer-overlay{z-index:2147483647;position:fixed;top:0;right:0;bottom:0;left:0;background:#000;cursor:-webkit-zoom-out;cursor:zoom-out;opacity:0}#pp-container .pp-zoomed-image{z-index:2147483648;position:fixed;cursor:-webkit-zoom-out;cursor:zoom-out;transition:all .3s ease}.pp-container .group-member-hovercard{background-color:#fafafb;border-radius:5px;border:1px solid rgba(0,0,0,.1);left:42px;box-shadow:0 0 10px rgba(0,0,0,.08);position:absolute;width:260px;-webkit-box-sizing:initial!important;-moz-box-sizing:initial!important;box-sizing:initial!important}.pp-container .group-member-hovercard .body{background-color:#fff;border-radius:5px 5px 0 0;border-bottom:1px solid #dfe0e1;box-shadow:0 1px 1px #f0f0f1;padding:13px 10px 1px;overflow:hidden;cursor:pointer}.pp-container .group-member-hovercard .img-container{display:inline-block;top:0;width:60px;position:relative;float:left;height:50px;padding-bottom:35px;cursor:pointer;text-align:center}.pp-container .group-member-hovercard img{width:60px;height:60px;margin:0 auto;border-radius:50%;border:2px solid #fff}.pp-container .group-member-hovercard .info{float:right;width:164px;cursor:pointer}.pp-container .group-member-hovercard .name{font-weight:700;font-size:14px;color:#37474f;margin-bottom:7px;cursor:pointer}.pp-container .group-member-hovercard .signature{font-size:12px;color:#78909c;line-height:1.5;cursor:pointer}.pp-container .group-member-hovercard .textarea-container{padding:9px 8px;font-size:16px;border-radius:0 0 5px 5px;height:36px;cursor:pointer}.pp-container .group-member-hovercard textarea{width:100%;height:36px;background-color:#fff;font-weight:400;color:#455a64;resize:none;border:1px solid #cfd8dc;font-size:14px;line-height:20px;padding:7px 35px 5px 10px;border-radius:4px;outline:0}.pp-container .group-member-hovercard textarea:focus{border-color:#74BEFF;box-shadow:0 0 4px 0 rgba(75,171,255,.38)}.pp-container .group-member-hovercard .arrow-down{width:0;height:0;border-left:9px solid transparent;border-right:9px solid transparent;border-top:8px solid #000;display:inline-block;right:10px}.pp-container .group-member-hovercard .arrow-up{width:0;height:0;border-left:9px solid transparent;border-right:9px solid transparent;border-bottom:8px solid #000}.pp-container .group-member-hovercard *,.pp-container .group-member-hovercard:after,.pp-container .group-member-hovercard:before{-webkit-box-sizing:content-box!important;-moz-box-sizing:content-box!important;box-sizing:content-box!important}.pp-container .group-member-hovercard textarea{-webkit-box-sizing:border-box!important;-moz-box-sizing:border-box!important;box-sizing:border-box!important}.pp-container .group-members{background-color:#FFF;box-shadow:0 0 10px rgba(0,0,0,.08);display:none;max-height:-moz-calc(100% - 48px);max-height:-webkit-calc(100% - 48px);max-height:calc(100% - 48px);opacity:0;overflow-y:auto;padding-bottom:10px;position:relative;right:0;width:100%}.pp-container .group-members-container{max-height:100%;width:320px;margin:0 auto}.pp-container .group-members .member{float:left;height:101px;margin-left:20px;margin-right:20px;padding-top:20px}.pp-container .group-members .pp-wrapper{position:relative}.pp-container .group-members img.pp-avatar{border-radius:50%;border:2px solid #3F65D6;cursor:pointer;height:60px;width:60px}.pp-container .group-members img.pp-state{bottom:5px;display:none;position:absolute;right:5px}.pp-container .group-members img.pp-state.pp-active{display:block}.pp-container .group-members .member .name{color:#888;font-size:14px;max-height:19px;max-width:60px;overflow:hidden;padding-top:5px;text-align:center;text-overflow:ellipsis}.pp-container .pp-conversation-part-error{color:red;display:block}.pp-container .pp-conversation-part-emoji-by-user{position:relative;top:0;font-size:12px;line-height:20px;color:#c9cbcf;margin-right:6px}.pp-container .pp-conversation-part-emoji-by-user .pp-emoji-container{text-align:right;margin-bottom:16px}.pp-container .pp-conversation-part-emoji-by-user .pp-emoji{display:block;font-size:96px;line-height:1.1;text-align:right}.pp-conversation-part-text-by-user-outer{text-align:right;margin-bottom:16px}.pp-conversation-part-text-by-user-outer .pp-wrapper{text-align:right}.pp-container .pp-conversation-part-text-by-user-timestamp-outer{position:relative;top:0;font-size:12px;line-height:20px;color:#c9cbcf;margin-right:6px}.pp-conversation-part-text-by-user-triangle{width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:4px solid #21abe1;position:relative;top:50%;float:right;margin-left:-1px;margin-top:10px}.pp-conversation-part-text-by-user-body-outer{border-radius:4px;border-width:1px;border-style:solid;position:relative;max-width:80%;display:inline-block;background-color:#21abe1;color:#fff;min-height:36px}.pp-container .pp-conversation-part-text-by-user-body{font-size:14px;font-weight:400;line-height:20px;padding:12px 17px;text-align:left;-moz-user-select:text;-webkit-user-select:text;-ms-user-select:text;white-space:pre-wrap}.pp-container .msg-audio-admin .pp-avatar{border-radius:50%;width:28px;height:28px;float:left;position:relative;overflow:hidden;clear:both}.pp-container .msg-audio-admin .pp-content{float:left;width:80%;margin-left:5px;margin-bottom:16px}.pp-container .msg-audio-admin .pp-name{color:#455A64;display:block;font-size:12px;text-align:left}.pp-container .msg-audio-admin .pp-voice{position:relative}.pp-container .msg-audio-admin .pp-body{border-color:#dadee2;border-radius:4px;border-width:1px;border-style:solid;cursor:pointer;position:relative;padding:10px;max-width:80%;display:inline-block;background-color:#fff;color:#455A64;top:3px}.pp-container .msg-audio-admin .pp-triangle{width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-right:4px solid #dadee2;position:relative;float:left;margin-top:10px;margin-right:-1px;top:3px}.pp-container .msg-audio-admin i{width:23px;height:23px;vertical-align:middle;display:inline-block}.pp-container .msg-audio-admin .pp-dura{font-size:14px;margin-left:10px}.pp-container .msg-audio-admin .pp-unread{border-radius:50%;background-color:red;display:inline-block;width:7px;height:7px;margin-left:10px;margin-bottom:2px}.pp-container .msg-audio-admin .pp-desc{font-size:12px;margin-left:5px;display:block;margin-top:5px}@media (max-width:736px){.pp-messenger-panel,.pp-sheet-header{top:0;width:100%;border-left:1px solid #e7e7e7;right:0}.pp-messenger-panel{bottom:0;background-color:#fff;z-index:2147483646}.pp-sheet-header{box-shadow:0 1px 2px 0 rgba(0,0,0,.08);background:#fff;position:fixed;border-bottom:1px solid #e7e7e7;z-index:2147483647}.pp-sheet-header-button{position:relative;margin:0;height:48px;width:48px;float:right}.pp-sheet-header-button-icon{background-size:13px 13px;background-repeat:no-repeat;width:16px;height:100%;background-position:center center;margin:auto}.pp-conversation-part-welcome-outer-2{border-top:0;padding:0 20px 20px;border-image:initial}.pp-emoji-icon{font-family:AppleColorEmoji;margin:6px;width:30px;line-height:30px;display:inline-table;cursor:pointer;text-align:center;font-size:21px}.pp-composer-container{width:100%;background:0 0;position:fixed;bottom:0;right:0;padding:5px}.pp-no-conversations-icon{background-color:#fff}.pp-powered-by{display:none}.pp-conversation-content{bottom:49px}.pp-composer{max-width:100%;margin:0 10px}}@media (max-width:480px){.pp-emoji-selector{max-width:280px;width:100%;height:175px}.pp-emoji-selector-content{max-width:270px;width:100%;height:130px}.pp-emoji-selector-panel-header{max-width:280px;width:100%}.pp-emoji-selector-sibling{height:177px}}");
}extend(t,e.PPElement),e.CssStyle=t}(View),function(e){function t(t,n){e.PPElement.call(this,"div",t,n)}extend(t,e.PPElement),e.PPDiv=t,e.Div=t}(View),function(e){function t(t,n){e.PPElement.call(this,"span",t,n)}extend(t,e.PPElement),e.Span=t}(View),function(e){function t(t,n){e.PPElement.call(this,"p",t,n)}extend(t,e.PPElement),e.P=t}(View),function(e){function t(t,n){e.PPElement.call(this,"img",t,n)}extend(t,e.PPElement),e.Img=t}(View),View.$sheetHeader=function(){function e(){var e=Ctrl.$sheetheader,t=View.PPDiv,n=View.PPElement,i=Configuration.assets_path+"img/icon-conversations.png",r=function(){return new t("pp-sheet-header-title-container").add(new View.Div({className:"title-container"}).add(new n("b",{id:s,"class":s+" pp-selectable"})))},o=function(){return new n("a",{id:c,"class":c,title:Service.Constants.i18n("MINIZE_BUTTON_HINT")}).add(new t({id:"pp-sheet-header-button-icon",style:"background-image: url("+Configuration.assets_path+"img/icon-minimize.png)"}))},u=function(){return new n("a",{"class":"pp-sheet-conversations-button"}).add(new t({"class":"pp-sheet-header-button-icon",style:"background-image: url("+i+")"})).add(new t({"class":"pp-unread-count pp-font pp-box-sizing"}))},p=function(){$("#"+a).bind("click",e.onSheetHeaderClicked)},d=function(){var t=".pp-sheet-header-button .pp-sheet-header-button-icon";$("#"+c).bind("mouseover",function(){$(t).css("opacity",1)}).bind("mouseleave",function(){$(t).css("opacity",.4)}).bind("click",e.minimize)},f=function(){var e=l;$(e).bind("mouseover",function(){$(e).css("opacity",1)}).bind("mouseleave",function(){$(e).css("opacity",.4)}).bind("click",function(){Ctrl.$conversationList.show()})},h=function(){var e=".pp-sheet-conversations-button .pp-unread-count";$(e).bind("mouseover",function(){$(l).mouseover()}).bind("mouseleave",function(){$(l).mouseleave()}).bind("click",function(){$(l).click()})};t.call(this,{id:a,"class":a+" pp-box-sizing pp-unselectable"},e),this.add(r()).add(u()).add(o()),$timeout(function(){e.onSheetHeaderInit(),p(),d(),f(),h()})}function t(){if(!Service.$sheetHeader.isShowDropDownButton()){Service.$sheetHeader.showDropDownButton(!0);var e=$(d);e.append(new View.Element("i",{className:"down-icon",style:"background: url("+Configuration.assets_path+"img/icon-down.png) 0 -795px"}).getHTML()).addClass("clickable").on("click",function(){var e=Ctrl.$groupMembers;e.isShow()?(i(),e.hide()):(r(),e.show())})}}function n(){Service.$sheetHeader.showDropDownButton(!1);var e=$(d);e.find("i").detach(),e.removeClass("clickable"),e.off("click")}function i(){$(d).find("i").attr("style","background: url("+Configuration.assets_path+"img/icon-down.png) 0 -795px")}function r(){$(d).find("i").attr("style","background: url("+Configuration.assets_path+"img/icon-down.png) 0 -2362px")}function o(){return $("#"+a).height()}extend(e,View.PPDiv);var a="pp-sheet-header",s="pp-sheet-header-title",c="pp-sheet-header-button",u=".pp-unread-count",p=".pp-sheet-conversations-button",l=p+" .pp-sheet-header-button-icon",d=".pp-sheet-header .title-container",f=function(){return new e},h=function(e){e>0?$(u).show().text(e):$(u).hide()},g=function(){$(p).show()},m=function(){$(p).hide()},v=function(e){$("#"+s).text(e)};return{build:f,height:o,setUnreadCount:h,showGroupButton:g,hideGroupButton:m,showDropDownButton:t,hideDropDownButton:n,changeDropDownButtonToHideState:i,changeDropDownButtonToShowState:r,setTitle:v}}(),View.$groupContent=function(){function e(){View.PPDiv.call(this,{"class":t}),Service.$pubsub.subscribe("msgArrived/group",function(e,t){var n=t.getBody().conversation.uuid,i=View.$groupContentItem;i.showUnread(n,Modal.$conversationContentGroup.get(n).unreadCount()),i.description(n,t.getMessageSummary())})}extend(e,View.PPDiv);var t="pp-group-content-container",n="."+t,i=function(){return $(n).show(),this},r=function(){return $(n).hide(),this},o=function(e){$(n).empty();var t="";return $.each(e,function(e,n){t+=View.$groupContentItem.build(n).getHTML()}),$(n).append(t),this},a=function(){return $(n).is(":empty")},s=function(){return $(n).is(":visible")},c=function(){return new e};return{build:c,show:i,hide:r,update:o,focus:focus,empty:a,visible:s}}(),View.$groupContentItem=function(){function e(e){View.PPDiv.call(this,{"class":"pp-group-item",group_uuid:e.uuid});var t=e.name,i="",o=e.uuid,a=e.icon,s=e.summary,c=function(){return new View.Img({src:a})},u=function(){return new View.PPDiv({"class":"body-container"}).add(new View.PPDiv({"class":"pp-body"}).add(new View.PPDiv({"class":"pp-header"}).add(new View.PPDiv({"class":"pp-timestamp"}).add(new View.Span({"class":"pp-unread"}).text(i))).add(new View.PPDiv({"class":"title-container"}).add(new View.PPDiv({"class":"pp-title"}).text(t)))).add(new View.PPDiv({"class":n}).add(new View.PPDiv({"class":"readstate"})).add(new View.Div({className:"pp-content"}).text(s))))},p=function(){var e=r(o),t="pp-group-item-hover";e.bind("mouseover",function(){e.addClass(t)}).bind("mouseleave",function(){e.removeClass(t)}).click("click",function(){Ctrl.$conversationList.showItem(o)})};this.add(c()).add(u()),$timeout(p)}function t(e,t){r(e).find(i).text(t)}extend(e,View.PPDiv);var n="pp-summary",i="."+n+" .pp-content",r=function(e){return $(".pp-group-content-container").find("div[group_uuid="+e+"]")},o=function(e,t){t>0&&r(e).find(".readstate").text(t>99?99:t).show()},a=function(e){r(e).find(".readstate").hide()},s=function(e){return $(".pp-group-content-container div[group_uuid="+e+"] img")},c=function(e,t){return e&&t?void s(e).attr("src",t.user_avatar).attr("user_uuid",t.user_uuid):s(e).attr("src")},u=function(t){return new e(t)};return{build:u,showUnread:o,hideUnread:a,groupIcon:c,description:t}}(),View.$groupMembers=function(){function e(e){Service.$conversation.asyncGetUser(e,function(e){t(e)})}function t(e){var t=e||[],n="";$(d).find(".group-members").length||a(),$(h).empty(),$.each(t,function(e,t){n+=View.$groupMember.build(t).getHTML()}),$(h).append(n),$(f).show().animate({opacity:1,top:48},v),s(t)}function n(e,t){var n=$(f),i="boolean"==typeof t?t:!0,r=function(){n.hide(),$(h).empty(),View.$groupMemberHovercard.remove()};i?n.animate({opacity:0,top:0},v,r):r()}function i(){var e=$(f);return 0!==e.length&&e.is(":visible")}function r(e){$(f).css("opacity",e)}function o(){var e=$(f).height()+View.$sheetHeader.height()+Service.$tools.scrollbarWidth>=window.innerHeight;return e?Service.$tools.scrollbarWidth:0}function a(){$(d).append(p().getHTML())}function s(e){Service.$device.isMobileBrowser()?c(e):u(e)}function c(e){$(g).on("click",function(e){var t=$(this).attr("user_uuid");View.$loading.show(),Ctrl.$groupMembers.hide(),Ctrl.$groupMembers.onMemberClicked(t,function(){View.$loading.hide()})})}function u(e){$(g).bind("mouseover",function(t){t.stopImmediatePropagation(),b=!0,Service.$task.cancel(x);var n=l(e,$(this).attr("user_uuid"));View.$groupMemberHovercard.remove(),View.$groupMemberHovercard.show(n,{e:t,el:$(this)})}).bind("mouseleave",function(e){b=!1}),$(f).bind("click",function(e){!b&&View.$groupMemberHovercard.remove()}).bind("mouseover",function(e){View.$groupMemberHovercard.isShow()&&!View.$groupMemberHovercard.isMouseover()&&Service.$task.plan(x,function(){!b&&!View.$groupMemberHovercard.isMouseover()&&View.$groupMemberHovercard.remove()})})}function p(){return new View.Div({className:"group-members"}).add(new View.Div({className:"group-members-container"}))}function l(e,t){var n;return $.each(e,function(e,i){t===i.user_uuid&&(n=i)}),n}var d="#pp-conversation-container",f=".pp-container .group-members",h=".pp-container .group-members-container",g=f+" img.pp-avatar",m=250,v=m,b=!1,w="rm-group-member-hovercard",x=w;return{build:a,isShow:i,show:e,hide:n,opacity:r,scrollbarWidth:o,_show:t}}(),View.$groupMember=function(){function e(e){var i=new View.PPDiv({className:"member"});return i.add(t(e)),i.add(n(e)),i}function t(e){var t=new View.Div({className:"pp-wrapper"}),n=e.is_online;return t.add(new View.Img({className:"pp-avatar"+(n?"":" grayscale"),src:e.user_avatar,user_uuid:e.user_uuid})),n&&(e.is_mobile_online?t.add(new View.Img({className:"pp-state pp-active",src:i})):e.is_mobile_online),t}function n(e){return new View.Div({className:"name"}).text(e.user_fullname)}var i=Configuration.assets_path+"img/state_mobile_online.png";return{build:e}}(),View.$groupMemberHovercard=function(){function e(e,t){var n=l(t);$(w).append(i(e,n).getHTML()),f(e,n)}function t(){n()&&$(y).detach(),h(),P=!1}function n(){return $(y).length>0}function i(e,t){var n=new v(e,t);return n.add(r(e)).add(s(e)).add(c(t.direction,t.arrowRight)),f(e,t),n}function r(e){return new View.Div({className:"body"}).add(o(e)).add(a(e))}function o(e){var t=e.user_avatar;return new View.Div({className:"img-container"}).add(new View.Img({src:t}))}function a(e){var t=e.user_fullname,n=e.user_signature;return new View.Div({className:"info"}).add(new View.Div({className:"name"}).text(t)).add(new View.Div({className:"signature"}).text(n))}function s(e){var t=Service.Constants.i18n("HOVER_CARD_TEXTAREA_HINT");return new View.Div({className:"textarea-container"}).add(new View.Element("textarea",{placeholder:t}))}function c(e,t){var n,i=new View.Element("style",{type:"text/css",className:x+"-style"});switch(e){case"up":n=u(t);break;case"down":n=p(t)}return i.text(n),i}function u(e){return".pp-container .group-member-hovercard:after, .pp-container .group-member-hovercard:before{top: -16px;right: "+e+'px;border: solid transparent;content: " ";height: 0;width: 0;position: absolute;pointer-events: none;}.pp-container .group-member-hovercard:before {border-color: rgba(204,204,204,0);border-bottom-color: rgba(0,0,0,0.07);border-width: 9px;margin-left: -5px;top: -18px;}.pp-container .group-member-hovercard:after {border-color: rgba(250,250,251,0);border-bottom-color: #fff;border-width: 9px;margin-left: -6px;}'}function p(e){return".pp-container .group-member-hovercard:after, .pp-container .group-member-hovercard:before{top:100%;right:"+e+'px;border: solid transparent;content: " ";height: 0;width: 0;position: absolute;pointer-events: none;}.pp-container .group-member-hovercard:before{border-color: rgba(204, 204, 204, 0);border-top-color: rgba(0, 0, 0, 0.14);border-width: 9px;margin-left: -6px;}.pp-container .group-member-hovercard:after {border-color: rgba(250, 250, 251, 0);border-top-color: #fafafb;border-width: 8px;margin-left: -5px;right:'+(e+1)+"px;}"}function l(e){var t=window.innerHeight,n=e.el.offset().top-$(window).scrollTop(),i=t-n,r=C,o=T;return i-o>=r?{direction:"up",top:n+o,arrowRight:d(e.e)}:{direction:"down",top:n-r,arrowRight:d(e.e)}}function d(e){var t=64,n=32,i=$(window).width()-e.clientX-t,r=n-e.offsetX;return i-r-5}function f(e,t){$(_).on("focus",function(n){g(t,function(){Ctrl.$groupMembers.onMemberClicked(e.user_uuid)})}),$(y).on("mouseover",function(e){P=!0}).on("mouseleave",function(e){P=!1})}function h(){$(_).off("focus"),$(y).off("mouseover").off("mouseleave")}function g(e,t){var n=46,i=18,r=40,o=10,a=100,s=368,c=300,u=50,p=window.innerHeight,l=p-u,d=$(y).offset().top-u-$(window).scrollTop()+(p-($(_).offset().top-$(window).scrollTop()))-(a-n)-i;$(y).animate({width:s,height:l,left:0,top:u},c),$(S).animate({opacity:0},c),$(_).animate({height:r}),$(E).animate({height:r,"margin-top":d,"margin-left":o,"margin-right":o},c,function(){View.$groupMembers.opacity(0),$(y).animate({opacity:0},c,function(){Ctrl.$groupMembers.hide(!1),View.$composerContainer.focus(),$onResult(void 0,t)})})}function m(){return P}function v(e,t){View.Div.call(this,{className:x,style:"top:"+t.top+"px"})}var b=".pp-container",w="#pp-conversation-container",x="group-member-hovercard",y=b+" ."+x,_=y+" textarea",S=y+" .body",E=y+" .textarea-container",C=156,T=60,P=!1;return{show:e,remove:t,isShow:n,isMouseover:m}}(),View.$loading=function(){function e(){var e=View.PPDiv;e.call(this,{id:t,"class":t+" pp-box-sizing"}),this.add(new e({id:"pp-loading-spinner",style:"background-image:url("+Configuration.assets_path+"img/spinner.png)"})).add(new View.P({className:"pp-loading-text"}))}extend(e,View.PPDiv);var t="pp-loading",n="#"+t,i=".pp-loading-text",r=function(){$(n).fadeIn()},o=function(){$(n).fadeOut(),$(i).hide().text("")},a=function(e){e&&$(i).show().text(e)},s=function(){return new e};return{build:s,show:r,hide:o,text:a}}(),View.$launcher=function(){function e(){var e=Ctrl.$launcher.get(),t=e.shouldShowLauncherWhenInit(),n=View.PPDiv;n.call(this,{id:"pp-launcher","class":"pp-launcher"},e);var i=this,r="background-image: url("+Configuration.assets_path+"img/icon-newacquire.png);background-color:"+View.Style.Color.launcher_background_color,o=e.getLauncherBottomMargin(),a=e.getLauncherRightMargin(),s="bottom:"+o+"; right:"+a;this.add(new n({id:"pp-launcher-container",style:s,event:{init:function(){e.onLauncherInit()}}},e).add(new n("pp-launcher-button-container").add(new n({id:"pp-launcher-button","class":"pp-launcher-button pp-unselectable",style:r,event:{click:function(){i.controller.onClickEvent()},mouseover:function(){i.controller.onMouseOverEvent()},mouseleave:function(){i.controller.onMouseLeaveEvent()}}}))).add(new n({id:"pp-launcher-badge","class":"pp-launcher-badge pp-font",style:"display:none"},e)).add(View.$launcherPreview.init().build()).add(View.$hoverCard.build())).show(t)}extend(e,View.PPDiv);var t="#pp-launcher-button",n="pp-launcher-button-maximize",i="pp-launcher-button-minimized",r="#pp-launcher-button-container",o="pp-launcher-button-container-active",a="pp-launcher-button-container-inactive",s=function(){return new e},c=function(){$(t).removeClass(n).addClass(i),$(r).removeClass(o).addClass(a)},u=function(){$(t).removeClass(i).addClass(n),$(r).removeClass(a).addClass(o)},p=function(){View.$launcherPreview.text("").hide(),$("#pp-messenger").show(),View.$conversation.show(),Ctrl.$hoverCard.get().hideHoverCardNow()};return{build:s,hideLauncher:c,showLauncher:u,showMessageBox:p}}(),function(e){function t(){var t=e.PPDiv;t.call(this,{id:"pp-container","class":"pp-container pp-box-sizing pp-location"}),this.add(new e.CssStyle).add(e.$launcher.build()).add(new e.PPMessenger)}extend(t,e.PPDiv),e.PPContainer=t}(View),View.$launcherPreview=function(){function e(){return Service.$pubsub.subscribe("msgArrived/launcher",function(e,t){Service.$device.inMobile()||d.show().text(t.getMessageSummary())}),d}function t(){return new o}function n(){return $(u).show(),d}function i(){return $(u).hide(),d}function r(e){return $(l).text(e),d}function o(){function e(){var e=$("#"+s),t=$("#"+c);t.bind("mouseover",function(){e.show()}).bind("mouseleave",function(){e.hide()}),e.bind("click",function(){i()})}var t=View.Div;t.call(this,{id:a,style:"display:none"}),this.add(new t("pp-launcher-preview-outer").add(new t({id:c}).add(new t("pp-launcher-preview-outer-3").add(new t({id:s,style:"background-image:url("+Configuration.assets_path+"img/icon-preview-close.png)"})).add(new t("pp-launcher-preview-p-outer").add(new View.Span({className:p}))))).add(new t("pp-launcher-preview-triangle"))),$timeout(e)}var a="pp-launcher-preview",s="pp-launcher-preview-close",c="pp-launcher-preview-outer-2",u="#"+a,p="pp-launcher-preview-p",l="."+p,d={build:t,init:e,show:n,hide:i,text:r};return d}(),function(e){function t(){e.PPDiv.call(this,{id:"pp-messenger",style:"display:none"},null),this.add(new e.PPDiv("pp-messenger-box-container").add(e.$conversation.build()))}extend(t,e.PPDiv),e.PPMessenger=t}(View),View.$poweredBy=function(){function e(){return new n}function t(){$(r).on("click",function(){Ctrl.$emojiSelector.get().showSelector(!1),Ctrl.$groupMembers.hide()})}function n(){View.PPDiv.call(this,{id:i});var e=Service.Constants.i18n("PPMESSAGE"),t='Powered by <u class="pp-font">'+e+"</u>";this.add(new View.PPElement("a",{href:Configuration.portal,target:"_blank"}).add(new View.Span({"class":"pp-powered-by-span pp-font"}).html(t)))}var i="pp-powered-by",r="#"+i;return{build:e,bindEvent:t}}(),View.$conversation=function(){function e(){View.PPDiv.call(this,{id:t,style:"background-color:"+View.Style.Color.base,"class":"pp-messenger-panel pp-box-sizing"}),this.add(View.$sheetHeader.build()).add(View.$groupContent.build()).add(View.$conversationContentContainer.build()).add(View.$loading.build())}var t="pp-conversation",n="#"+t,i="pp-conversation-content-maximize",r="pp-conversation-sheet-minimized";return{build:function(){return new e},show:function(){$(n).removeClass(r).addClass(i)},hide:function(){$(n).removeClass(i).addClass(r)}}}(),View.$composerContainer=function(){function e(){var e=Ctrl.$composerContainer.get();View.PPDiv.call(this,{id:i,style:"background-color:"+View.Style.Color.base,"class":i+" pp-box-sizing-borderbox pp-font"},e);var t=this;this.add(t.getUploadingWarningHtml(e)).add(t.getComposerEmojiContainerHtml(e)).add(new View.PPDiv({id:"pp-composer"}).add(t.getComposerSendButtonContainer(e)).add(t.getComposerFormContainerHtml(e))).add(View.$poweredBy.build()),$timeout(View.$poweredBy.bindEvent),this.calcInputTextAreaRows()}extend(e,View.PPDiv),e.prototype.getUploadingWarningHtml=function(e){return new View.PPDiv("pp-composer-container-warning").add(new View.PPElement("span",{id:"pp-composer-container-warning-span","class":"pp-composer-container-warning-span pp-font"})).show(!1)},e.prototype.getComposerEmojiContainerHtml=function(e){var t=new View.PPDiv({style:"position: relative"});return t.add(new View.$emojiSelector.build),t.add(new View.PPDiv({"class":"pp-emoji-selector-sibling",id:"pp-emoji-selector-sibling",event:{click:function(){e.onEmojiSelectorSiblingClicked()},init:function(){$("#pp-emoji-selector-sibling").css("display","none")}}},e)),t},e.prototype.getComposerFormContainerHtml=function(e){var t=new View.PPDiv({style:"position: relative; overflow: hidden;"}),n=Service.$device.isMobileBrowser(),i=this,o=new View.PPElement("form",{id:"pp-composer-container-form",name:"pp-composer-container-form",enctype:"multipart/form-data",target:"pp-composer-uploadframe",method:"post"}),a=Service.Constants.i18n(n?"START_CONVERSATION_MOBILE_HINT":"START_CONVERSATION_HINT"),s="pp-composer-container-textarea pp-box-sizing-borderbox pp-font";return Service.$device.isIE()&&(s+=" pp-composer-container-textarea-min-height"),o.add(new View.PPElement("textarea",{id:r,"class":s,"data-min-rows":1,placeholder:a,style:e.getTextareaPaddingStyle(),rows:1,event:{keydown:function(t){e.onChatTextareaKeyDown(t)},focus:function(){e.onChatTextareaFocus()},blur:function(){e.onTextareaFocusOut()},init:function(){e.onTextareaInit()},"input propertychange":function(){e.onTextareaChange()}}},e)),o.add(new View.PPElement("input",{id:"pp-composer-container-content-txt",name:"content_txt",type:"hidden"})),o.add(new View.PPElement("input",{name:"upload_type",type:"hidden",value:"content_txt"})),o.add(new View.PPElement("iframe",{id:"pp-composer-uploadframe",name:"pp-composer-uploadframe",style:"display:none"})),o.add(i.getComposerToolsContainerHtml(e)),t.add(o),t},e.prototype.getComposerToolsContainerHtml=function(e){var t=new View.PPDiv("pp-composer-container-tools-container"),n="background-image: url("+Configuration.assets_path+"img/icon-emoji.png)";t.add(new View.PPElement("strong",{id:"pp-composer-container-emoji-btn","class":"pp-composer-container-action-btn pp-composer-container-emoji-btn pp-box-sizing",style:e.isShowEmojiIcon()?"display:block;"+n:"display:none",event:{click:function(){e.onEmojiSelectorBtnClicked()},mouseover:function(){e.onEmojiSelectorBtnMouseOver()},mouseleave:function(){e.onEmojiSelectorBtnMouseLeave()}}}));var i="background-image: url("+Configuration.assets_path+"img/icon-upload.png)";return t.add(new View.PPElement("strong",{id:"pp-composer-container-file-selector","class":"pp-composer-container-action-btn pp-box-sizing",style:i,event:{click:function(){e.onFileSelectorBtnClicked()},mouseover:function(){e.onFileSelectorBtnMouseOver()},mouseleave:function(){e.onFileSelectorBtnMouseLeave()}}},e)),t.add(new View.PPElement("input",{id:"pp-composer-container-input",type:"file",event:{change:function(t){e.onFileSelect(t)}}},e)),t},e.prototype.getComposerSendButtonContainer=function(e){var t=e.isSendButtonShow(),n=Service.Constants.i18n("SEND");return new View.PPDiv({id:"pp-composer-send-button","class":"pp-composer-send-button pp-unselectable",style:"display:"+(t?"block":"none"),event:{mousedown:function(t){e.onSendButtonMouseDown(t)},init:function(){e.onSendButtonInit()}}}).add(new View.PPElement("p",{style:"padding-top: 7.5px;","class":"pp-p-no-margin"}).text(n))},e.prototype.calcInputTextAreaRows=function(){$(document).one("focus.textarea",o,function(){var e=this.value;this.value="",n=this.scrollHeight||this[0].scrollHeight,this.value=e,t=this.rows}).on("input.textarea",o,function(){c(),s()})};var t,n,i="pp-composer-container",r="pp-composer-container-textarea",o="#"+r,a=function(){return Service.$device.inMobile()?28:Service.$device.isIE()?17:23},s=function(){var e=1,t=n,i=jQuery(o)[0],r=a();i&&i.rows&&i.scrollHeight&&(i.rows=e,i.rows=e+Math.ceil((i.scrollHeight-t)/r))},c=function(){Service.$schedule.once(Service.$notifyTyping.get(Service.$notification).typing,"typing",2e3)};return{build:function(){return new e},fixInputRows:function(){s(),View.$emojiSelector.changeBottomMarginByInputHeight($(o).height())},focus:function(){$(o).focus()},blur:function(){$(o).blur()}}}(),View.$conversationContent=function(){function e(e){var n=Ctrl.$conversationContent.init();if(View.PPDiv.call(this,{id:t,"class":t+" pp-unselectable pp-box-sizing-borderbox",style:"background-color:"+View.Style.Color.base,event:{click:function(){n.onConversationContentClicked()},init:function(){n.onConversationContentInit()}}},n),e&&e.length>0)for(var i=0;i<e.length;++i)this.add(new View.PPConversationPart(e[i]))}extend(e,View.PPDiv);var t="pp-conversation-content",n="#"+t;return{build:function(t){return new e(t)},scrollToBottom:function(){$(n).stop().animate({scrollTop:$(n)[0].scrollHeight},600,"swing")},html:function(e){$(n).html(e)},append:function(e){$(n).append(e)},show:function(e){e?$(n).show():$(n).fadeIn()}}}(),View.$conversationContentContainer=function(){var e="pp-conversation-container",t="."+e,n=function(){$(t).hide()},i=function(e){e?$(t).show():$(t).fadeIn()},r=function(){return $(t).is(":visible")},o=function(){return new View.PPDiv(e).add(View.$conversationContent.build()).add(View.$composerContainer.build())};return{hide:n,show:i,visible:r,build:o}}(),function(e){function t(t){var n=new Ctrl.PPUploadingBarCtrl,i="";switch(t.messageType){case"FILE":i=t.message.file.fileUploadId;break;case"IMAGE":i=t.message.image.fileUploadId}e.PPElement.call(this,"span",{id:"pp-uploading-bar-outer-"+i,"class":"pp-uploading-bar-outer pp-font"},n),this.text(Service.Constants.i18n("UPLOADING_HINT")),this.add(new e.PPDiv({id:"pp-uploading-bar-"+i,"class":"pp-uploading-bar"}).add(new e.PPDiv({id:"pp-uploading-bar-state-"+i,"class":"pp-uploading-bar-state"}))).add(new e.PPElement("span",{id:"pp-uploading-bar-remove-"+i,"class":"pp-uploading-bar-remove",style:"background-image:url("+Configuration.assets_path+"img/icon-upload-remove.png)",event:{click:function(){n.onUploadingBarRemoveBtnClicked(i,t)}}})),setTimeout(function(){n.init(t,i)})}extend(t,e.PPElement),e.PPUploadingBar=t}(View),View.$hoverCard=function(){function e(){var e=Ctrl.$hoverCard.get();View.PPDiv.call(this,{"class":"pp-launcher-hovercard",id:"pp-launcher-hovercard",style:"display:none; transform-origin: 315px 100% 0px; transform: translate(0px 0px) scale(0.8, 0.8); opacity:0;",event:{mouseover:function(){e.onMouseOver()},mouseleave:function(){e.onMouseLeave()},click:function(){e.onHoverCardClicked()},init:function(){e.onHoverCardInit()}}},e)}return extend(e,View.PPDiv),{build:function(){return new e},smoothTranisationToMessagePanel:function(){var e=300,t=window.innerHeight,n="#pp-conversation",i="#pp-launcher-hovercard-welcome",r="#pp-launcher-hovercard-textarea",o="#pp-launcher-hovercard",a="#pp-messenger";$(n).removeClass("pp-conversation-content-maximize").removeClass("pp-conversation-sheet-minimized"),$(n).css({boxShadow:"none"}),$(i).animate({opacity:0,marginBottom:"+=100"},{duration:100}),$(r).animate({paddingBottom:"31"},{duration:e}),$(o).css({border:"none",borderLeft:"1px solid #dadee2"}).animate({width:368,paddingTop:t,borderRadius:0,right:-20,bottom:-19},{duration:e}),$(a).css({opacity:0,display:"block"}).delay(e).animate({opacity:1},{duration:0,complete:function(){$(i).removeAttr("style"),$(r).removeAttr("style"),$(o).removeAttr("style").hide(),$(a).removeAttr("style"),$(n).css({boxShadow:""})}})}}}(),function(e){e.$hoverCardContentCategorySingle=function(){function t(e){e=e||[],$("#pp-launcher-hovercard-admins").empty().append(a(e).getHTML())}var n=function(t){var n=Ctrl.$hoverCard.get(),s="#pp-launcher-hovercard",c=$(s);n.updateInitState(!0),c.empty().css("cursor","pointer").append(i(n).getElement()[0].outerHTML).append(new e.PPDiv("pp-launcher-hovercard-welcome").add(a(t.activeAdmins)).add(r(t.appTeamName,t.appWelcomeText)).getElement()[0].outerHTML).append(o(n).getElement()[0].outerHTML)},i=function(t){var n="pp-launcher-hovercard-close",i="background-image: url("+Configuration.assets_path+"img/icon-close-white.png)",r="background-color: "+e.Style.Color.hovercard_close_btn,o=t.isShowCloseButton()?"display:block":"display:none",a=Service.Constants.i18n("CLOSE");return new e.PPDiv({"class":n+" pp-font",selector:"."+n,style:i+";"+r+";"+o,event:{click:function(e){t.onHovercardCloseButtonClickEvent(e)}}}).text(a)},r=function(t,n){return new e.PPDiv("pp-launcher-hovercard-text").add(new e.PPDiv("pp-launcher-hovercard-app-name").text(t)).add(new e.PPDiv("pp-launcher-hovercard-welcome-text").text(n))},o=function(t){var n=Service.Constants.i18n("HOVER_CARD_TEXTAREA_HINT");return new e.PPDiv({id:"pp-launcher-hovercard-textarea",className:"pp-launcher-hovercard-textarea pp-box-sizing"}).add(new e.PPElement("textarea",{placeholder:n,id:"pp-launcher-hovercard-textarea-textarea",className:"pp-launcher-hovercard-textarea-textarea pp-box-sizing-borderbox",event:{focus:function(){t.onTextareaFocus()},blur:function(){t.onTextareaUnFocus()}}}))},a=function(t){var n=new e.PPDiv("pp-launcher-hovercard-admins"),i=2147483003,r=s(t),o="width:"+r+"; height:"+r,a=3;return t&&$.each(t,function(t,r){a>t&&n.add(new e.PPDiv({"class":"pp-launcher-admin-avatar",style:"z-index:"+i--,user_uuid:r.user_uuid}).add(new e.PPElement("img",{src:r.user_avatar,style:o})))}),n},s=function(e){var t="46px";if(e){var n=e.length;switch(n){case 1:t="84px";break;case 2:t="56px";break;default:t="46px"}}return t};return{updateHoverCard:n,updateUsers:t}}()}(View),View.$imageViewer=function(){function e(e,t){View.PPDiv.call(this,{"class":"pp-image-viewer"}),this.add(new View.PPDiv({"class":"pp-image-viewer-overlay"})).add(new View.PPElement("img",{"class":"pp-zoomed-image",src:e,style:t}))}extend(e,View.PPDiv);var t,n,i,r,o=".pp-image-viewer-overlay",a="#pp-container",s=".pp-image-viewer",c=".pp-image-viewer img",u=20,p=function(e){t=e,f(t),h(window.innerWidth,window.innerHeight,t),r="width:"+n.width+"px;height:"+n.height+"px;left:"+n.left+"px;top:"+n.top+"px"},l=function(){$(window).on("resize.pp-image-viewer",y),$(o).bind("click",w),$(s+" img").bind("click",w),$(document).on("keyup.pp-image-viewer",x)},d=function(){$(document).off("keyup.pp-image-viewer"),$(window).on("resize.pp-image-viewer")},f=function(e){n={width:e.width(),height:e.height(),left:e.offset().left-$(document).scrollLeft(),top:e.offset().top-$(document).scrollTop()}},h=function(e,t,n){var r=n[0],o=e-2*u,a=t-2*u,s=Math.min(o/r.naturalWidth,a/r.naturalHeight);s>1&&(s=1);var c=r.naturalWidth*s,p=r.naturalHeight*s,l=e/2-c/2,d=t/2-p/2;i={width:c,height:p,left:l,top:d}},g=function(t){return p(t),$(a).append(new e(t[0].src,r).getElement()[0].outerHTML),l(),$(c).animate(i,{duration:100,queue:!1,easing:"easeInQuart"}),$(o).animate({opacity:.8,queue:!1,easing:"easeInQuart"},200),this},m=function(){$(s).remove()},v=function(e,n){h(e,n,t),$(c).css(i)},b=function(){f(t),$(c).animate(n,{queue:!1,duration:200}),$(o).animate({opacity:0},{queue:!1,duration:500}),setTimeout(function(){m()},700),d()},w=function(){b()},x=function(e){27===e.keyCode&&b()},y=function(e){v(window.innerWidth,window.innerHeight)};return{show:g}}(),function(e){function t(t){var n=new Ctrl.AppProfileContainerCtrl(t),i=this;e.PPDiv.call(this,"pp-app-profile-container",n);var r=n.getAppTeamName(),o=n.getWelcomeText(),a=n.getActiveAdmins();this.add(new e.PPDiv("pp-app-profile").add(new e.PPDiv("pp-app-profile-activity").add(new e.PPDiv({id:"pp-app-profile-team","class":"pp-app-profile-team pp-font pp-selectable"}).text(r))).add(i.appendActiveAdminsHtmlElements(a)).add(new e.PPDiv({id:"pp-app-profile-text","class":"pp-app-profile-text pp-font pp-selectable"}).add(new e.PPElement("p").text(o))))}extend(t,e.PPDiv),t.prototype.appendActiveAdminsHtmlElements=function(t){var n=new e.PPDiv("pp-active-admins");return t&&$.each(t,function(t,i){i=Service.$users.getUser(i.user_uuid)&&Service.$users.getUser(i.user_uuid).getInfo(),n.add(new e.AppProfileContainerActiveAdmin(i))}),n},e.AppProfileContainer=t}(View),function(e){function t(t){e.PPDiv.call(this,{"class":"pp-active-admin",user_uuid:t.user_uuid});var n=t.is_online,i="state "+(n?"online":"offline"),r=function(e){return"["+(e?Service.Constants.i18n("ONLINE"):Service.Constants.i18n("OFFLINE"))+"]"},o=r(n);this.add(new e.PPDiv("pp-admin-avatar").add(new e.PPElement("img",{src:t.user_avatar}))).add(new e.PPDiv({"class":"pp-active-admin-name pp-font pp-selectable"}).text(t.user_fullname)).add(new e.PPDiv({"class":i+" pp-font"}).text(o)),Service.$pubsub.subscribe("user/infochange/"+t.user_uuid,function(e,n){var i=n.getInfo(),r=$("#pp-active-admins").find("div[user_uuid="+t.user_uuid+"]");r.length&&(r.find("img").attr("src",i.user_avatar),r.find(".pp-active-admin-name").text(i.user_fullname))}),Service.$pubsub.subscribe("user/infochange/state/"+t.user_uuid,function(e,n){var i=n.getInfo(),o=$("#pp-active-admins").find("div[user_uuid="+t.user_uuid+"]");if(o.length){var a=o.find(".state");i.is_online?a.removeClass("offline").addClass("online"):a.removeClass("online").addClass("offline"),a.text(r(i.is_online))}})}extend(t,e.PPDiv),e.AppProfileContainerActiveAdmin=t}(View),function(e){function t(t){var n=t.messageId;switch(e.PPDiv.call(this,{id:"pp-conversation-part-"+n,"class":"pp-conversation-part"}),t.messageType){case"WELCOME":t&&this.add(new e.AppProfileContainer(t));break;case"TEXT":this.add(t.user.admin?new e.PPConversationPartTextByAdmin(t):e.$userTextMessage.build(t));break;case"EMOJI":this.add(t.user.admin?new e.PPConversationPartEmojiByAdmin(t):e.$userEmojiMessage.build(t));break;case"IMAGE":this.add(t.user.admin?e.$adminImageMessage.build(t):e.$userImageMessage.build(t));break;case"AUDIO":t.user.admin&&this.add(e.$adminAudioMessage.build(t));break;case"FILE":this.add(t.user.admin?new e.PPConversationPartFileByAdmin(t):new e.PPConversationPartFileByUser(t));break;case"TIMESTAMP":this.add(new e.PPConversationPartTimestamp(t))}}extend(t,e.PPDiv),e.PPConversationPart=t}(View),View.$pulltoRefresh=function(){function e(e){var n=Ctrl.$pulltoRefreshController.get(),i=void 0!==e?e:n.getLoadHistortyHintText();View.PPDiv.call(this,{id:t,"class":t+" pp-conversation-part-center"}),this.text(i)}extend(e,View.PPDiv);var t="pp-conversation-part-pulltorefreshbutton",n="."+t,i=function(t){return new e(t)},r=function(){$(n).hide()},o=function(){$(n).show()},a=function(){return $(n)};return{build:i,hide:r,show:o,el:a}}(),function(e){function t(t){e.PPDiv.call(this,"pp-conversation-part-emoji-by-admin"),Service.$pubsub.subscribe("user/infochange/"+t.user.id,function(e,n){var i="#pp-conversation-part-"+t.messageId,r=n.getInfo();$(i).find(".pp-conversation-part-emoji-by-admin-avatar").attr("src",r.user_avatar),$(i).find(".pp-conversation-part-serve-name").text(r.user_fullname)}),this.add(new e.PPDiv("pp-conversation-part-emoji-by-admin-outer").add(new e.PPElement("img",{src:t.user.avatar,id:"pp-conversation-part-emoji-by-admin-avatar"})).add(new e.PPDiv("pp-conversation-part-emoji-by-admin-body-container").add(new e.PPDiv({
id:"","class":"pp-conversation-part-serve-name pp-font"}).text(t.user.name)).add(new e.PPElement("span",{id:"pp-conversation-part-emoji-by-admin-body","class":"pp-conversation-part-emoji-by-admin-body pp-selectable"}).text(t.message.emoji.code)).add(new e.PPElement("span",{id:"pp-conversation-part-emoji-by-admin-timestamp-"+t.messageId,"class":"pp-conversation-part-emoji-by-admin-timestamp pp-selectable pp-font"}).text())))}extend(t,e.PPDiv),e.PPConversationPartEmojiByAdmin=t}(View),View.$userEmojiMessage=function(){function e(e){return new n(e)}function t(e){$(r+e.messageId).find(".extra").text(e.extra.errorDescription).css({color:"red"}).show()}function n(e){View.PPDiv.call(this,o);var t=Service.$tools.isMessageSendError(e),n=t?e.extra.errorDescription:e.extra.description;this.add(new View.PPDiv({className:"pp-emoji-container"}).add(new View.PPDiv({className:"pp-emoji "+a}).text(e.message.emoji.code)).add((new View.PPDiv).add(new View.PPElement("span",{className:"extra "+a,style:t?"color:red; display:block;":"color:#c9cbcf; display:none;"}).text(n))))}var i="pp-conversation-part-",r="#"+i,o=i+"emoji-by-user",a="pp-selectable";return{build:e,onSendFail:t}}(),function(e){function t(t){e.PPDiv.call(this,"pp-conversation-part-file-by-admin");var n=t.user.avatar,i=t.user.name,r=t.user.id,o=t.message.file.fileUrl,a=t.message.file.fileName,s=t.messageId,c=function(e,t){var n="#pp-conversation-part-"+s,i=t.getInfo();$(n).find(".pp-conversation-part-file-by-admin-avatar").attr("src",i.user_avatar),$(n).find(".pp-conversation-part-serve-name").text(i.user_fullname)};Service.$pubsub.subscribe("user/infochange/"+r,c),this.add(new e.PPDiv("pp-conversation-part-file-by-admin-outer").add(new e.PPDiv("pp-conversation-part-file-by-admin-outer-2").add(new e.PPElement("img",{"class":"pp-conversation-part-file-by-admin-avatar",src:n})).add(new e.PPDiv("pp-conversation-part-file-by-admin-outer-3").add(new e.PPDiv({id:"","class":"pp-conversation-part-serve-name pp-font"}).text(i)).add(new e.PPDiv("pp-conversation-part-file-by-admin-outer-4").add(new e.PPDiv("pp-conversation-part-file-by-admin-outer-5").add(new e.PPDiv({id:"pp-conversation-part-file-by-admin-upload-icon",style:"background-image:url("+Configuration.assets_path+"img/icon-upload-white.png)"})).add(new e.PPDiv("pp-conversation-part-file-by-admin-outer-6").add(new e.PPElement("a",{href:o,download:a,"class":"pp-conversation-part-file-by-admin-file-link pp-font",title:a}).text(a)))).add(new e.PPDiv("pp-conversation-part-file-by-admin-timestamp-container").add(new e.PPElement("span",{"class":"pp-selectable pp-font",id:"pp-conversation-part-file-by-admin-timestamp-"+s}).text()))))))}extend(t,e.PPDiv),e.PPConversationPartFileByAdmin=t}(View),function(e){function t(t){e.PPDiv.call(this,{id:"pp-conversation-part-file-by-user-"+t.messageId,"class":"pp-conversation-part-file-by-user"});var n=Service.$tools,i=n.isMessageSendError(t),r=i?t.extra.errorDescription:t.extra.description,o=n.isUploading(t),a=Service.$device.isIE();this.add(new e.PPDiv({id:"pp-conversation-part-file-by-user-o-"+t.messageId,"class":"pp-conversation-part-file-by-user-o"}).add(new e.PPDiv({id:"pp-conversation-part-file-by-user-o2-"+t.messageId,"class":"pp-conversation-part-file-by-user-o2",style:i?"opacity: 0.6":""}).add(new e.PPDiv({id:"pp-conversation-part-file-by-user-upload-icon",style:"background-image:url("+Configuration.assets_path+"img/icon-upload-white.png)"})).add(new e.PPDiv({"class":"pp-conversation-part-file-by-user-link-container",style:a?"margin-left: 0px;":null}).add(new e.PPElement("a",{id:"pp-conversation-part-file-by-user-a-"+t.messageId,"class":"pp-font",title:t.message.file.fileName,style:i?"cursor:default":"cursor:pointer",href:t.message.file.fileServerUrl?t.message.file.fileServerUrl:void 0}).text(t.message.file.fileName)))).add(new e.PPDiv({id:"pp-conversation-part-file-by-user-timestamp-"+t.messageId,"class":"pp-conversation-part-file-by-user-timestamp pp-selectable pp-font",style:i?"color:red; display:block;":"color:#c9cbcf; display:none;"}).text(r).show(i)).add(new e.PPDiv({"class":"pp-fixme"}).add(new e.PPUploadingBar(t).show(o))))}extend(t,e.PPDiv),e.PPConversationPartFileByUser=t}(View),function(e){e.$adminImageMessage=function(){function t(t){e.PPDiv.call(this,"pp-conversation-part-image-by-admin");var n="#pp-conversation-part-"+t.messageId+" .pp-conversation-part-image-by-admin-img",r=function(){i()?e.$imageViewer.show($(n)):window.open(t.message.image.url)},o=function(){return i()?null:"cursor:pointer"};Service.$pubsub.subscribe("user/infochange/"+t.user.id,function(e,n){var i="#pp-conversation-part-"+t.messageId,r=n.getInfo();$(i).find(".pp-conversation-part-image-by-admin-avatar").attr("src",r.user_avatar),$(i).find(".pp-conversation-part-serve-name").text(r.user_fullname)}),this.add(new e.PPDiv("pp-conversation-part-image-by-admin-o").add(new e.PPDiv("pp-conversation-part-image-by-admin-o1").add(new e.PPElement("img",{src:t.user.avatar,"class":"pp-conversation-part-image-by-admin-avatar"})).add(new e.PPDiv("pp-conversation-part-image-by-admin-o2").add(new e.PPDiv("pp-conversation-part-image-by-admin-o3").add(new e.PPDiv({"class":"pp-conversation-part-serve-name pp-font"}).text(t.user.name)).add(new e.PPDiv("pp-conversation-part-image-by-admin-o4").add(new e.PPElement("img",{src:t.message.image.url,selector:n,"class":"pp-conversation-part-image-by-admin-img pp-image-viewable",style:o(),event:{click:r}})))).add(new e.PPDiv("pp-conversation-part-image-by-admin-timestamp-container").add(new e.PPElement("span",{"class":"pp-selectable pp-font",id:"pp-conversation-part-image-by-admin-timestamp-"+t.messageId}).text())))))}extend(t,e.PPDiv);var n=function(e){return new t(e)},i=function(){return!0};return{build:n}}()}(View),function(e){e.$userImageMessage=function(){function t(t){e.PPDiv.call(this,"pp-conversation-part-image-by-user");var i=Service.$tools.isUploading(t),r=t.messageId,o="#pp-conversation-part-"+r+" .pp-conversation-part-image-by-user-img",a=Service.$tools.isMessageSendError(t),s=a?t.extra.errorDescription:t.extra.description,c=Service.$tools.isMessageSendError(t)||i,u=(t.message.image.url,n()),p="pp-conversation-part-image-by-user-img"+(u?" pp-image-viewable":""),l=function(e){u?f($(o)):window.open($(o).attr("src"))},d=function(){var e="";return e+=c?"opacity: .6":"",u||(e+="cursor:pointer"),e},f=function(t){e.$imageViewer.show(t)};this.add(new e.PPDiv("pp-conversation-part-image-by-user-o").add(new e.PPElement("img",{id:"pp-conversation-part-image-by-user-img-"+t.messageId,"class":p,src:t.message.image.data||t.message.image.url,style:d(),event:{click:l}})).add(new e.PPDiv({id:"pp-conversation-part-image-by-user-timestamp-"+t.messageId,"class":"pp-conversation-part-image-by-user-timestamp pp-selectable"}).add(new e.PPElement("span",{id:"pp-conversation-part-image-by-user-timestamp-span-"+t.messageId,"class":"pp-conversation-part-image-by-user-timestamp-span pp-font",style:a?"color:red; display:block;":"color:#c9cbcf; display:none;"}).text(s)).show(!i)).add(new e.PPDiv({"class":"pp-fixme"}).add(new e.PPUploadingBar(t).show(i))))}extend(t,e.PPDiv);var n=function(){return!0},i=function(e){return new t(e)},r=function(e){return"#pp-conversation-part-image-by-user-img-"+e},o=function(e){return"#pp-conversation-part-image-by-user-timestamp-"+e},a=function(e){return"#pp-conversation-part-image-by-user-timestamp-span-"+e},s=function(e){var t=r(e);$(t).css({opacity:.6})},c=function(e,t){$(r(e)).css({opacity:.6,cursor:"default"}),$(o(e)).show(),$(a(e)).text(t).css({color:"red",display:"block"})},u=function(e,t){$(r(e)).css({opacity:1})};return{build:i,onBeginUpload:s,onSendFail:c,onSendDone:u}}()}(View),function(e){function t(t){e.PPDiv.call(this,"pp-conversation-part-text-by-admin");var n=e.$textUrlChecker.match(t.message.text.body).trustAsHtml(),i="37px";Service.$pubsub.subscribe("user/infochange/"+t.user.id,function(e,n){var i="#pp-conversation-part-"+t.messageId,r=n.getInfo();$(i).find(".pp-conversation-part-text-by-admin-avatar").attr("src",r.user_avatar),$(i).find(".pp-conversation-part-serve-name").text(r.user_fullname)}),this.add(new e.PPDiv("pp-conversation-part-text-by-admin-outer").add(new e.PPDiv("pp-conversation-part-text-by-admin-outer-2").add(new e.PPElement("img",{id:"pp-conversation-part-text-by-admin-avatar",src:t.user.avatar})).add(new e.PPDiv("pp-conversation-part-text-by-admin-outer-3").add((new e.PPDiv).add(new e.PPDiv({id:"",style:"margin-left:"+i,"class":"pp-conversation-part-serve-name pp-font"}).text(t.user.name)).add(new e.PPDiv("pp-conversation-part-text-by-admin-body-container").add(new e.PPDiv({id:"pp-conversation-part-text-by-admin-body","class":"pp-conversation-part-text-by-admin-body pp-font pp-text-link-admin pp-selectable"}).html(n))).add(new e.PPDiv("pp-conversation-part-text-by-admin-triangle"))).add(new e.PPDiv("pp-conversation-part-text-by-admin-timestamp-container").add(new e.PPElement("span",{"class":"pp-selectable pp-font",id:"pp-conversation-part-text-by-admin-timestamp-"+t.messageId}))))))}extend(t,e.PPDiv),e.PPConversationPartTextByAdmin=t}(View),View.$userTextMessage=function(){function e(e){return new n(e)}function t(e){$(o+e.messageId).find(".extra").text(e.extra.errorDescription).css({color:"red"}).show()}function n(e){i.call(this,"pp-conversation-part-text-by-user");var t=Service.$tools.isMessageSendError(e),n=t?e.extra.errorDescription:e.extra.description,r=View.$textUrlChecker.match(e.message.text.body).trustAsHtml();this.add(new i("pp-conversation-part-text-by-user-outer").add(new i("pp-wrapper").add(new i("pp-conversation-part-text-by-user-body-outer").add(new i({id:"pp-conversation-part-text-by-user-body","class":"pp-conversation-part-text-by-user-body pp-font pp-text-link-user pp-selectable"}).html(r))).add(new i("pp-conversation-part-text-by-user-triangle"))).add(new i("pp-conversation-part-text-by-user-timestamp-outer").add(new View.Span({"class":"extra pp-selectable",style:t?"color:red; display:block":"color:#c9cbcf; display:none"}).text(n))))}var i=View.PPDiv,r="pp-conversation-part-",o="#"+r;return{build:e,onSendFail:t}}(),View.$adminAudioMessage=function(){function e(e){function t(){$timeout(function(){l.canPlay()||o(g),l.hasRead()&&r(g)})}function a(e){var t=45,n=120,i=300,r=1;return e>i&&(e=i),0>e&&(e=r),t+(n-t)*e/i}function s(e,t){var r=Service.$audioContext.STATE,a=Service.$pubsub;switch(t.state){case r.NULL:i(g,t.audioId),c&&a.unsubscribe(c),c=void 0;break;case r.ERROR:i(g,t.audioId),c&&a.unsubscribe(c),c=void 0,l.markError(),o(g);break;case r.PLAYING:n(g,t.audioId)}}View.Div.call(this,{className:"msg-audio-admin"});var c,p="url("+Configuration.assets_path+"img/icon-down.png) 0 -2427px",l=e.message.audio,d=l.duration(),f=d+"''",h=u(e.messageId),g=e.messageId,m=function(e){var t=l.id(),n=Service.$audioContext;return n.isPlaying(l)?n.stop(l):(c=Service.$pubsub.subscribe("audio/"+t,s),l.markRead(),r(g),n.play(l)),!0};this.add(new View.Img({src:e.user.avatar,className:"pp-avatar"})).add(new View.Div({className:"pp-content"}).add(new View.Span({className:"pp-name"}).text(e.user.name)).add(new View.Div({className:"pp-voice",uuid:l.id()}).add(new View.Div({className:"pp-triangle"})).add(new View.Div({className:"pp-body",style:"width:"+a(d)+"px",selector:h,event:{click:m}}).add(new View.Element("i",{style:"background:"+p}))).add(new View.Span({className:"pp-dura"}).text(f)).add(new View.Div({className:"pp-unread"}))).add(new View.Span({className:"pp-desc"}))),t()}function t(t){return new e(t)}function n(e){var t=[8.3,13,23],n=s(e),i="voice-"+e,r=0;Service.$task.repeat(i,function(){n.css("width",t[r++%t.length])},500)}function i(e){Service.$task.cancelRepeat("voice-"+e),s(e).css("width",23)}function r(e){$(c(e)).find(".pp-unread").hide()}function o(e){a(e).css("color","red").text(Service.Constants.i18n("AUDIO_PLAY_ERROR")).show()}function a(e){return $(c(e)).find(".pp-desc")}function s(e){return $(c(e)).find(".pp-body").find("i")}function c(e){return"#pp-conversation-part-"+e}function u(e){return c(e)+" .pp-body"}return extend(e,View.Div),{build:t,playAudioAnimation:n,stopAudioAnimation:i}}(),function(e){function t(t){e.PPDiv.call(this,{id:"pp-conversation-part-timestamp-"+t.messageId,"class":"pp-conversation-part-center pp-font"}),this.add(new e.PPDiv({"class":"pp-conversation-part-timestamp-time"}).text(t.message.timestamp.timeStr))}extend(t,e.PPDiv),e.PPConversationPartTimestamp=t}(View),function(e){function t(t,n,i){e.PPElement.call(this,"span",{title:t.title,selector:".pp-emoji-selector-panel-header span:eq("+n+")",event:{click:function(){i.selectGroup(n)},mouseleave:function(){i.onEmojiGroupIconMouseLeave(n)},mouseover:function(){i.onEmojiGroupIconMouseOver(n)}}}),this.text(t.value)}extend(t,e.PPElement),e.PPEmojiSelectorGroupIcon=t}(View),function(e){function t(t,n){if(e.PPDiv.call(this,{id:"pp-emoji-selector-panel-header",style:"background-color:"+e.Style.Color.base},n),t&&t.length>0)for(var i=0;i<t.length;++i)this.add(new e.PPEmojiSelectorGroupIcon(t[i],i,n))}extend(t,e.PPDiv),e.PPEmojiSelectorPanelHeader=t}(View),function(e){function t(t,n,i){e.PPElement.call(this,"span",{title:t.title,selector:"#pp-emoji-selector-content > span:eq("+n+")",event:{click:function(){i.onEmojiIconClicked(n,t)},mouseover:function(){i.onEmojiIconMouseOver(n,t)},mouseleave:function(){i.onEmojiIconMouseLeave(n,t)}}},i),this.text(t.value)}extend(t,e.PPElement),e.PPEmojiIcon=t}(View),function(e){function t(t){e.PPDiv.call(this,{id:"pp-emoji-selector-content","class":"pp-emoji-selector-content pp-box-sizing"},t),setTimeout(function(){t.selectGroup(0)})}extend(t,e.PPDiv),e.PPEmojiSelectorContent=t}(View),function(e){e.$emojiSelector=function(){function t(){var t=Ctrl.$emojiSelector.get();e.PPDiv.call(this,{id:n,"class":i+" pp-box-sizing pp-unselectable",event:{init:function(){$(r).css({display:"none"})}}},t),this.add(new e.PPEmojiSelectorPanelHeader(t.getDefaultEmojiGroup(),t)).add(new e.PPEmojiSelectorContent(t)).add(new e.PPDiv("pp-emoji-selector-triangle")).add(new e.PPDiv("pp-emoji-selector-triangle-mask"))}extend(t,e.PPDiv);var n="pp-emoji-selector",i=n,r="#"+n,o="#pp-composer-container-tools-container";return{build:function(){return new t},changeBottomMarginByInputHeight:function(e){var t=e+3;$(o).css("bottom",t)}}}()}(View),function(e){function t(e,t,n){this.source=e,this.include=t,this.matchIndexArray=n}function n(){}t.prototype.trustAsHtml=function(e){if(!this.include)return this._encodeHtmlEntity(this.source);var t=this.source,n=this.matchIndexArray,i="",r=0,o=this;return $.each(n,function(n,a){i+=o._encodeHtmlEntity(t.substring(r,a.begin));var s=/^https?:\/\//.test(a.url)?a.url:"http://"+a.url;i+="<a href='"+s+"' target='_blank'",e&&(i+=" class='"+e+"'"),i+=">",i+=a.url,i+="</a>",r=a.end}),r<t.length&&(i+=this._encodeHtmlEntity(t.substring(r,t.length))),i},t.prototype._encodeHtmlEntity=function(e){var t=e;return t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")},n.UrlPattern=/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[a-zA-Z0-9\/\-\.=_&%#?:;|]{2,}|www\.[^\s"']+\.[a-zA-Z0-9\/\-\.=_&%#?:;|]{2,})/g,n.prototype.match=function(e){for(var i,r=[],o=n.UrlPattern;null!==(i=o.exec(e));)r.push({begin:i.index,end:o.lastIndex,url:i[0]});return new t(e,0!=r.length,r)},e.TextUrlChecker=n}(View),View.Style=function(){function e(){return i.Color=t(),i}function t(){if(void 0!==n)return n;var e=Service.$app.app()&&Service.$app.app().ppcom_launcher_color||"#54C6D6",t="#fafafb",i="#E4E4E4";return{launcher_background_color:e,base:t,base_darker:i,hovercard_close_btn:"rgba(40,45,50,.4)"}}var n,i={init:e};return i}(),function(e){function t(){this._ppSettings=null}t.DEFAULT_BOTTOM_MARGIN="20px",t.DEFAULT_RIGHT_MARGIN="20px",t.prototype.init=function(e){return this._ppSettings=e,this},t.prototype.getLauncherBottomMargin=function(){return this._getValueFromPPSettingsView("launcher_bottom_margin",t.DEFAULT_BOTTOM_MARGIN)},t.prototype.getLauncherRightMargin=function(){return this._getValueFromPPSettingsView("launcher_right_margin",t.DEFAULT_RIGHT_MARGIN)},t.prototype.isShowLauncher=function(){return this._getValueFromPPSettingsView("launcher_is_show",!0)},t.prototype._getValueFromPPSettingsView=function(e,t){var n=t;return this._ppSettings&&this._ppSettings.view&&e in this._ppSettings.view&&(n=this._ppSettings.view[e]),n},e.PPSettings=t}(View),function(e){function t(e){var t=e;this.empty=function(e){$(e).empty()},this.show=function(e,t){$(e).css("display",t?"block":"none")},this.getModal=function(){return t},this.setModal=function(e){t=e}}e.PPBaseCtrl=t}(Ctrl),function(e){function t(t){e.PPBaseCtrl.call(this);var n=t.message.welcome;this.getAppTeamName=function(){return n.appTeamName},this.getWelcomeText=function(){return n.appWelcomeText},this.getActiveAdmins=function(){return n.activeAdmins}}extend(t,e.PPBaseCtrl),e.AppProfileContainerCtrl=t}(Ctrl),Ctrl.$composerContainer=function(){function e(){Ctrl.PPBaseCtrl.call(this);var e=Service.$tools,t=Service.$device,n=Service.Constants,i=(t.isMobileBrowser(),"#pp-composer-container"),r="#pp-composer-container-emoji-btn",o="#pp-composer-container-textarea",a="#pp-composer-container-file-selector",s="#pp-composer-container-warning",c=function(){var e=$(o)[0];if(e.setSelectionRange)e.focus(),e.setSelectionRange(0,0);else if(e.createTextRange){var t=e.createTextRange();t.moveStart("character",0),t.select()}};this.getTextareaPaddingStyle=function(){return this.isShowEmojiIcon()?"padding: 10px 70px 5px 14px":"padding: 10px 45px 5px 14px"},this.hide=function(){$(i).css("margin-bottom","-59px")},this.show=function(e){$(i).animate({"margin-bottom":"0px"},200,function(){e&&e()})},this.onEmojiSelectorSiblingClicked=function(){Ctrl.$emojiSelector.get().showSelector(!1)},this.onEmojiSelectorBtnClicked=function(){Ctrl.$emojiSelector.get().toggleSelector()},this.onEmojiSelectorBtnMouseOver=function(){$(r).css("opacity",1)},this.onEmojiSelectorBtnMouseLeave=function(){$(r).css("opacity",.4)},this.onFileSelectorBtnClicked=function(){Ctrl.$emojiSelector.get().showSelector(!1),$("#pp-composer-container-input").trigger("click")},this.onFileSelectorBtnMouseOver=function(){$(a).css("opacity",1)},this.onFileSelectorBtnMouseLeave=function(){$(a).css("opacity",.4)},this.onChatTextareaFocus=function(){Ctrl.$groupMembers.hide(),View.$conversationContent.scrollToBottom(),$(o).addClass("pp-textarea-focus")},this.onTextareaFocusOut=function(){$(o).removeClass("pp-textarea-focus")},this.onTextareaChange=function(){if(this.isSendButtonShow()){var e=$(o).val(),t=e&&e.length>0;this.disableSendButton(!t)}},this.onChatTextareaKeyDown=function(e){13==e.which&&(e.preventDefault(),this.sendText())},this.sendText=function(){var e=$(o).val();e&&(Ctrl.$emojiSelector.get().showSelector(!1),$(o).val(""),$(o).focus(),View.$composerContainer.fixInputRows(),$(o)[0].rows=1,new Service.PPMessage.Builder("TEXT").textMessageBody(e).build().send()),this.disableSendButton(!0)},this.onTextareaInit=function(){t.isIE()&&$(o).val("")},this.onFileSelect=function(t){var i=$(t).val(),r=e.isImage(i),o=t.files[0],a=new FileReader;if(a.onloadend=function(e){if(r)e.target&&e.target.result&&new Service.PPMessage.Builder("IMAGE").imageBody({file:o,url:i,data:e.target.result}).build().send();else{var t=i,n=-1;(n=i.lastIndexOf("\\"))>0&&(t=i.substring(n+1)),new Service.PPMessage.Builder("FILE").fileBody({fileUrl:i,file:o,fileName:t,fileSize:e.total}).build().send()}},a.onerror=function(e){Service.$debug.d("FileReader upload file error. filePath: %s, error: %s.",i,e)},t&&t.files[0]){var c=t.files[0].size;if(c>n.MAX_UPLOAD_SIZE){var u=n.i18n("MAXIMUM_UPLOAD_SIZE_HINT")+n.MAX_UPLOAD_SIZE_STR;$(s).css("display","block"),$("#pp-composer-container-warning-span").text(u),setTimeout(function(){$(s).animate({opacity:.01},3e3,function(){$(s).css("display","none"),$(s).css("opacity","1.0")})},2e3)}else a.readAsDataURL(t.files[0]);$(t).val("")}},this.isShowEmojiIcon=function(){return e.isShowEmojiIcon()},this.isSendButtonShow=function(){return!1},this.onSendButtonInit=function(){this.disableSendButton(!0)},this.onSendButtonMouseDown=function(e){e.stopImmediatePropagation(),e.preventDefault(),this.sendText()},this.disableSendButton=function(e){$("#pp-composer-send-button").css("background",e?"#CCCCCC":"#0074b0")},this.resetCursor=c}extend(e,Ctrl.PPBaseCtrl);var t=null,n=function(){return null==t&&(t=new e),t};return{get:n}}(),Ctrl.$conversationContent=function(){function e(e){o=e,Ctrl.$conversationPanel.mode(Ctrl.$conversationPanel.MODE.CONTENT),Ctrl.$hoverCard.get().notifyUserActiveClickPPCom(),__Monitor.report(__MonitorEvent.show,o),e&&e.uuid&&Service.$notifyTyping.get(Service.$notification).watch(e.uuid),t(e)}function t(e){View.$conversationContent.html(View.$pulltoRefresh.el());var t=u()&&u().getMessages()||[],n="";$.each(t,function(e,i){n+=new View.PPConversationPart(t[e]).getElement()[0].outerHTML}),View.$conversationContent.append(n);var i=Modal.$conversationContentGroup.get(r());Ctrl.$sheetheader.decrUnread(i.unreadCount()),i.clearUnread(),__Monitor.report(__MonitorEvent.resume,o)}function n(e){e&&e.uuid&&Service.$notifyTyping.get(Service.$notification).unWatch(e.uuid),Service.$audioContext.close(),e&&__Monitor.report(__MonitorEvent.hide,e)}function i(){View.$conversationContentContainer.hide(),n(o),o=void 0}function r(){return o&&o.uuid}var o,a=200,s="#pp-conversation-content",c=function(){return Service.$pubsub.subscribe("msgArrived/chat",function(e,t){var n=t.getBody();n.conversation.uuid;g(n),View.$conversationContent.scrollToBottom()}),Service.$pubsub.subscribe("ws/typing",function(e,t){if(View.$conversationContentContainer.visible()){var n=r();if(n){var i,o="typing",a=o,s=Ctrl.$sheetheader,c=View.$sheetHeader.setTitle,u=s.getHeaderTitle;Service.$schedule.schedule(function(){i=u(),c(Service.Constants.i18n("TYPING"))},a).after(function(){c(i)}).onCancel(function(){c(i)}).start()}}}),Service.$pubsub.subscribe("ws/online",function(e,t){if(Service.$users.exist(t.user_uuid)&&("UNCHANGED"!=t.mobile||"UNCHANGED"!=t.browser)){var n=Service.$users.getUser(t.user_uuid).getInfo();"UNCHANGED"!=t.mobile&&(n.is_mobile_online="ONLINE"==t.mobile),"UNCHANGED"!=t.browser&&(n.is_browser_online="ONLINE"==t.browser);var i=n.is_mobile_online||n.is_browser_online;i!==n.is_online&&Service.$users.getUser(n.user_uuid).update({user_uuid:n.user_uuid,is_online:i})}}),this},u=function(e){var t=e||r();return t&&Modal.$conversationContentGroup.get(t)},p=function(e,t){var n=$(s),i=n[0].scrollHeight,r="";$.each(e,function(t,n){r+=new View.PPConversationPart(e[t]).getElement()[0].outerHTML}),n.prepend(r),n.scrollTop(n[0].scrollHeight-i),t&&t()},l=function(e,t){var n=r();n&&f(n,function(n){e&&e(),u()&&u().setLoadable(n.length>0),p(n,function(){t&&t(n)})})},d=function(){Ctrl.$emojiSelector.get().showSelector(!1),Ctrl.$groupMembers.hide(),Service.$device.isMobileBrowser()&&View.$composerContainer.blur()},f=function(e,t){u().getConversationHistory(e,t)},h=function(){$(s).append(View.$pulltoRefresh.build().getHTML())},g=function(e){var t=u(e.conversation.uuid);if(t){var n=t.addMessage(e);n&&$(s).append(new View.PPConversationPartTimestamp(n).getElement()[0].outerHTML),$(s).append(new View.PPConversationPart(e).getElement()[0].outerHTML)}},m=function(e){u()&&u().updateMessageIdsArray(e)},v=function(i,r,s){var c=r&&r.delay&&r.delay||a,u=r&&r.fadeIn&&r.fadeIn||!0,p=function(){$timeout(function(){Ctrl.$pulltoRefreshController.get(Ctrl.$conversationContent).loadable(b()).onend(d).bindEvent(),Service.$device.isMobileBrowser()||View.$composerContainer.focus(),View.$conversationContentContainer.show(u),s&&s()},c)};if(Service.$device.isIOS()&&Service.$device.disableScroll(),i&&i.token){var l=o;l!==i?(n(l),e(i)):t(i),p()}},b=function(){return u()&&u().isLoadable()};return{init:c,show:v,hide:i,onConversationContentClicked:d,onConversationContentInit:h,appendMessage:g,loadHistorys:l,updateMessageIdsArray:m,isLoadable:b}}(),Ctrl.$conversationList=function(){function e(){function e(e){var t=[];return e&&$.each(e,function(e,n){var i,r,o,a=n.token,s=n.conversation_data||n;i=Service.$tools.icon.get(s.conversation_icon),r=s.conversation_name,t.push({uuid:a,icon:i,name:r,summary:o})}),t}function t(e){e&&$.each(e,function(e,t){var n=t.token,i=Modal.$conversationContentGroup.get(n),r=View.$groupContentItem;i.unreadCount()>0?r.showUnread(n,i.unreadCount()):r.hideUnread(n)})}Ctrl.$conversationPanel.mode(Ctrl.$conversationPanel.MODE.LIST),View.$loading.show(),Service.$conversationManager.asyncGetList(function(n){View.$groupContent.update(e(n)).show(),Ctrl.$conversationContent.hide(),View.$loading.hide(),t(n),i(n).load(function(e,t){View.$groupContentItem.description(e,t)})})}function t(e){function t(){View.$loading.show(),View.$groupContent.hide()}function n(t){i(e)}function i(e){if(void 0!==e){var t=Service.$conversationManager;t.activeConversation(e),Ctrl.$conversationContent.show(t.activeConversation(),{},o)}else r()}function r(){View.$loading.hide(),View.$groupContent.show()}function o(){Ctrl.$conversationPanel.mode(Ctrl.$conversationPanel.MODE.CONTENT),View.$loading.hide(),View.$composerContainer.focus()}var a=Service.$conversationManager,s=a.find(e);a.TYPE;void 0!==s&&(t(),n(s))}function n(){}function i(e){function t(t){e&&$.each(e,function(e,n){var i=Modal.$conversationContentGroup.get(n.token);if(i&&!i.isEmpty()){var r=i.getMessages()[i.getMessages().length-1];return void(t&&t(n.token,Service.PPMessage.getMessageSummary(r)))}n.latest_message&&new Service.ApiMessageAdapter(Service.$json.parse(n.latest_message.message_body)).asyncGetPPMessage(function(e,i){i&&t&&t(n.token,i?e.getMessageSummary():"")})})}return{load:t}}return{show:e,showItem:t,hide:n}}(),Ctrl.$conversationPanel=function(){function e(e){if(void 0===e)return s;switch(s=e){case a.LIST:t(),r();break;case a.CONTENT:View.$sheetHeader.showDropDownButton(),View.$sheetHeader.showGroupButton(),r();break;case a.WAITING:t(),View.$groupContent.hide(),Ctrl.$conversationContent.hide(),View.$loading.show(),Ctrl.$sheetheader.setHeaderTitle(Service.Constants.i18n("WAITING_AVALIABLE_CONVERSATION")),i()}}function t(){Service.$schedule.cancelAll(),View.$sheetHeader.hideGroupButton(),View.$sheetHeader.hideDropDownButton(),Ctrl.$groupMembers.hide()}function n(){var t=Service.$pubsub,n=Service.$conversationManager,i=n.EVENT.WAITING,r=n.EVENT.AVALIABLE,o=200;t.subscribe(i,function(t,n){$timeout(function(){!Ctrl.$launcher.get().isLauncherShow()&&e(a.WAITING)},o)}),t.subscribe(r,function(t,n){e()===a.WAITING&&(Ctrl.$sheetheader.setHeaderTitle(),View.$groupContent.hide(),Ctrl.$conversationContent.show(Service.$conversationManager.activeConversation(),{fadeIn:!1,delay:0},function(){e(a.CONTENT),View.$loading.hide(),View.$composerContainer.focus()}))})}function i(){Service.$polling.run({eventID:c,apiFunc:Service.$api.getWaitingQueueLength,apiRequestParams:{app_uuid:Service.$app.appId()},onGet:o})}function r(){Service.$polling.cancel({eventID:c}),Service.$conversationAgency.cancel(),View.$loading.hide()}function o(e,t){if(t){var n=Service.$tools.format(Service.Constants.i18n("WAITING_LENGTH_HINT"),e.length);View.$loading.text(n)}}var a={LIST:"LIST",CONTENT:"CONTENT",WAITING:"WAITING"},s=a.CONTENT,c="POLLING_QUEUE_LENGTH_EVENT_ID";return n(),{MODE:a,mode:e,stopPollingWaitingQueueLength:r}}(),Ctrl.$emojiSelector=function(){function e(){Ctrl.PPBaseCtrl.call(this);var e=-1,t=this,n="#pp-composer-container-textarea",i="#pp-emoji-selector",r=function(e){var t="#pp-emoji-selector-content > span:eq("+e+")";return $(t)},o=function(e){var t=".pp-emoji-selector-panel-header span:eq("+e+")";return $(t)},a=function(e){return t.getDefaultEmojiGroup()[e].title};this._showSelector=!1,this.toggleSelector=function(){this._showSelector=!this._showSelector,this.showSelector(this._showSelector),View.$composerContainer.focus()},this.showSelector=function(e){this._showSelector=e,this.show(i,this._showSelector),this.show("#pp-emoji-selector-sibling",this._showSelector)},this.getDefaultEmojiGroup=function(){return[{value:Service.$emoji.getEmojiCode("People","smile").value,title:"People"},{value:Service.$emoji.getEmojiCode("Nature","cherry_blossom").value,title:"Nature"},{value:Service.$emoji.getEmojiCode("Objects","bell").value,title:"Objects"},{value:Service.$emoji.getEmojiCode("Places","blue_car").value,title:"Places"},{value:Service.$emoji.getEmojiCode("Symbols","capital_abcd").value,title:"Symbols"}]},this.onEmojiIconClicked=function(e,t){var i=r(e)[0].textContent;if($(n).val()){var o=document.getElementById("pp-composer-container-textarea").selectionStart,a=$(n).val(),s=a.substring(0,o)+i+a.substring(o);$(n).val(s),$(n)[0].focus(),$(n)[0].setSelectionRange(o+i.length,o+i.length),View.$composerContainer.fixInputRows()}else this.showSelector(!1),new Service.PPMessage.Builder("EMOJI").emojiMessageCode(i).build().send()},this.onEmojiIconMouseOver=function(e,t){r(e).css({"background-color":"#E4E4E4"})},this.onEmojiIconMouseLeave=function(e,t){r(e).css({"background-color":"#FFF"})},this.onEmojiGroupIconMouseLeave=function(t){e!=t&&o(t).css("background-color",View.Style.Color.base)},this.onEmojiGroupIconMouseOver=function(t){e!=t&&o(t).css("background-color",View.Style.Color.base_darker)},this._filterEmojiFunc=function(e){var t=this;if(Service.$device.isIE()){var n=$.inArray(e,t._IE_EMOJI_FILTER_ARRAY);return n>=0}if(Service.$device.isWindowsPlatform()&&Service.$device.isFirefox()){var n=$.inArray(e,t._WINDOWS_FIREFOX_EMOJI_FILTER_ARRAY);return n>=0}return!1},this.selectGroup=function(t){if(e!=t){var n=[],i=e,r=a(t);e=t;var s=Service.$emoji.getEmojiGroup(r,this._filterEmojiFunc);for(var c in s){var u=s[c];n.push({value:u.value,title:u.title})}-1!=i&&o(i).removeClass("active"),o(t).removeAttr("style").addClass("active"),this.empty(".pp-emoji-selector-content");var p=this,l="";$.each(n,function(e,t){l+=new View.PPEmojiIcon(t,e,p).getElement()[0].outerHTML}),$(".pp-emoji-selector-content").append(l)}}}var t;return{get:function(){return t||(t=new e),t}}}(),Ctrl.$groupMembers=function(){function e(){var e=i();View.$sheetHeader.changeDropDownButtonToShowState(),View.$groupMembers.show(e)}function t(e){var t=i();View.$sheetHeader.changeDropDownButtonToHideState(),View.$groupMembers.hide(t,e)}function n(){return View.$groupMembers.isShow()}function i(){var e=Service.$conversationManager.activeConversation();return e&&e.token}function r(e,t){Service.$conversationManager.asyncGetConversation({user_uuid:e},function(e){e&&Service.$conversationManager.activeConversation(e.token),Ctrl.$conversationContent.show(e),$onResult(void 0,t)})}return{show:e,hide:t,isShow:n,onMemberClicked:r}}(),Ctrl.$hoverCard=function(){function e(){Ctrl.PPBaseCtrl.call(this);var e,n,i=null,r=!1,o=!1,a=!1,s=this,c="#pp-launcher-hovercard",u="#pp-launcher-hovercard-textarea-textarea",p="pp-textarea-focus",l=function(){return null!=i?($clearTimeout(i),void(i=null)):void 0},d=function(){return null!=i},f=function(){return!1},h=function(){o=!1},g=function(){return n&&n.interceptLauncherClickEvent(s)};this.onHoverCardInit=function(){},this.asyncPrepareHoverCardInfo=function(i){return this.isInited()?void $onResult(!0,i):void Service.$conversationManager.asyncGetDefaultConversation(function(r){if(r){s.updateInitState(!0);var o=View.$hoverCardContentCategorySingle,a=Ctrl.$hoverCardCategorySingle,c=t(r.app_name,r.app_welcome,r.user_list);o.updateHoverCard(c),a.delegateHoverCardInitEvent(c),e=o,n=a}$onResult(!!r,i)})},this.isInited=function(){return a},this.updateInitState=function(e){a=e},this.onTextareaFocus=function(){$(u).addClass(p)},this.onTextareaUnFocus=function(){$(u).removeClass(p)},this.onMouseOver=function(){this.showHoverCard()},this.onMouseLeave=function(){this.hideHoverCard()},this.onHoverCardClicked=function(){h(),n&&n.delegateHoverCardClickEvent(this)},this.smoothTranisationToMessagePanel=function(){View.$hoverCard.smoothTranisationToMessagePanel(),Ctrl.$conversationContent.show(Service.$conversationManager.activeConversation(),{fadeIn:!1,delay:0},function(){View.$composerContainer.focus()})},this.hideHoverCard=function(){i=$timeout(function(){
s.hideHoverCardNow()},500)},this.hideHoverCardNow=function(){if(!o){var e=$(c);e.css({transform:"315px 100%"}).animate({scale:.8,x:0,y:0,opacity:0},90,function(){e.hide(),r=!1,l()})}},this.showHoverCard=function(){if(d())return void l();if(!r&&a){var e=$(c);e.stop().clearQueue().removeAttr("style"),e.show().css({transformOrigin:"315 100%",x:0,y:0}).animate({opacity:0,scale:.8,x:0,y:0},{duration:0}).animate({scale:1,x:0,y:0},{queue:!1,duration:250}).animate({opacity:1},{duration:170}),n&&n.onShow(),r=!0}},this.onHovercardCloseButtonClickEvent=function(e){e.stopImmediatePropagation(),h(),s.hideHoverCardNow()},this.isShowCloseButton=f,this.notifyUserActiveClickPPCom=h,this.interceptLauncherClickEvent=g}function t(e,t,n){return{appTeamName:e,appWelcomeText:t,activeAdmins:function(){var e=[];return n&&$.each(n,function(t,n){var i=Service.$users.adapter(n);i.user_uuid!==Service.$user.getUser().getInfo().user_uuid&&e.push(Service.$users.getOrCreateUser(i).getInfo())}),e}()}}extend(e,Ctrl.PPBaseCtrl);var n=null,i=function(){return n||(n=new e),n};return{get:i}}(),function(e){e.$hoverCardCategorySingle=function(){function t(){var e=Service.$conversationManager.vipConversation();e&&Service.$conversation.asyncGetUser(e.token,function(e){View.$hoverCardContentCategorySingle.updateUsers(e)},{reuse:!0})}function n(e){return!1}function i(t){e.$launcher.get().hideLauncher(),View.$launcherPreview.text("").hide(),t.smoothTranisationToMessagePanel()}function r(e){}return{delegateHoverCardClickEvent:i,delegateHoverCardInitEvent:r,interceptLauncherClickEvent:n,onShow:t}}()}(Ctrl),Ctrl.$launcher=function(){function e(){var e=this,n=function(){Ctrl.$hoverCard.get().showHoverCard()},s=function(){Ctrl.$hoverCard.get().hideHoverCard()};this.onClickEvent=function(){if(!Ctrl.$hoverCard.get().interceptLauncherClickEvent()){var t=Ctrl.$hoverCard.get();t.asyncPrepareHoverCardInfo(function(t){e.showMessageBox()})}},this.shouldShowLauncherWhenInit=function(){return View.$settings.isShowLauncher()},this.showMessageBox=function(){e.hideLauncher(),View.$launcher.showMessageBox(),Ctrl.$conversationPanel.mode()===Ctrl.$conversationPanel.MODE.CONTENT&&Ctrl.$conversationContent.show(Service.$conversationManager.activeConversation(),{fadeIn:!1,delay:0},function(){View.$composerContainer.focus()})},this.onMouseOverEvent=function(){if(a=!0,this.shouldShowHoverCardOnMouseOver()){var e=Ctrl.$hoverCard.get();e.asyncPrepareHoverCardInfo(function(e){e&&n()})}},this.onMouseLeaveEvent=function(){a=!1,s()},this.isMouseOver=function(){return a},this.recordOpenConversationItem=function(e){r=e},this.getLauncherIcon=function(){return i||Service.Constants.ICON_DEFAULT_LAUNCHER},this.getLauncherBottomMargin=function(){return View.$settings.getLauncherBottomMargin()},this.getLauncherRightMargin=function(){return View.$settings.getLauncherRightMargin()},this.shouldShowHoverCardOnMouseOver=function(){return!Service.$device.isMobileBrowser()&&Ctrl.$conversationPanel.mode()===Ctrl.$conversationPanel.MODE.CONTENT},this.launcherInit=function(){},this.setLauncherIcon=function(e){i=e,$("#pp-launcher-icon").attr("src",this.getLauncherIcon())},this.isLauncherShow=function(){return this.shouldShowLauncherWhenInit()&&!$("#pp-launcher-button").hasClass("pp-launcher-button-minimized")},this.onLauncherInit=function(){},this.setUnreadBadgeNum=function(e){var t=e>0;o=t?e>99?99:e:0,t?$("#pp-launcher-badge").show():$("#pp-launcher-badge").hide(),$("#pp-launcher-badge").text(o)},this.getUnreadBadgeNum=function(){return o},this.clear=function(){o=0,i="",r=""},this.hideLauncher=function(){View.$launcher.hideLauncher(),this.setUnreadBadgeNum(0),this.setLauncherIcon(""),t=void 0},Service.$pubsub.subscribe("msgArrived/launcher",function(n,i){e.setUnreadBadgeNum(e.getUnreadBadgeNum()+1),e.setLauncherIcon(i.getBody().user.avatar),e.recordOpenConversationItem(i.getBody()),t=i.getBody()})}var t,n,i="",r="",o=0,a=!1,s=function(){return n||(n=new e),n};return{get:s}}(),Ctrl.$pulltoRefreshController=function(){function e(){Ctrl.PPBaseCtrl.call(this);var e,t=Service.Constants,n=Service.$device,i=n.isMobileBrowser(),r=i?t.i18n("LOAD_HISTORY_MOBILE_HINT"):t.i18n("LOAD_HISTORY_HINT"),o=t.i18n("LOADING_HISTORY"),a=t.i18n("NO_MORE_HISTORY"),s=!0,c=this,u="#pp-conversation-part-pulltorefreshbutton",p="#pp-conversation-content",l=null,d=function(){$(p).pullToRefresh().on("start.pulltorefresh",function(e,t){Service.$debug.d("Start!! "+e+", "+t)}).on("move.pulltorefresh",function(e,t){Service.$debug.d("Move.. "+e+", "+t)}).on("end.pulltorefresh",function(e){Service.$debug.d("End.. "+e),l&&l(e)}).on("refresh.pulltorefresh",function(e,t){Service.$debug.d("Refresh.. "+e+", "+t),g()})},f=function(){$(u).remove()},h=function(t){var n=e.isLoadable(),i=n?r:a;$(p).prepend(View.$pulltoRefresh.build(i).getHTML()),m(n),c.bindEvent()},g=function(){s&&($(u).text(o),m(!1),e.loadHistorys(function(){f()},function(e){h(e)}))},m=function(e){s=e,$(u).css("cursor",s?"pointer":"default")};this.getLoadHistortyHintText=function(){return r},this.onLoadHistoryButtonClick=function(){i||g()},this.loadable=function(e){return m(e),$(u).text(e?r:a),this},this.bindEvent=function(){return i?d():View.$pulltoRefresh.el().bind("click",c.onLoadHistoryButtonClick),this},this.onend=function(e){return l=e,this},this.init=function(t){return t&&(e=t),this}}extend(e,Ctrl.PPBaseCtrl);var t=null,n=function(n){return null==t&&(t=new e),t.init(n)};return{get:n}}(),Ctrl.$sheetheader=function(){function e(){u.isIOS()&&u.enableScroll(),View.$launcher.showLauncher(),View.$conversation.hide(),Service.$schedule.cancelAll(),Service.$sheetHeader.close(!1),c()}function t(){return Service.$sheetHeader.getHeaderTitle()}function n(){Ctrl.$emojiSelector.get().showSelector(!1)}function i(e){e=e||t(),Service.$sheetHeader.setHeaderTitle(e),View.$sheetHeader.setTitle(e)}function r(){return Service.$sheetHeader.closed()}function o(){Service.$sheetHeader.asyncGetHeaderTitle(function(e){i(e)}),Service.$conversationManager.asyncGetList(function(e){var t=(e||[]).length;t>1&&View.$sheetHeader.showGroupButton()})}function a(){Service.$sheetHeader.incrUnreadCount(),View.$sheetHeader.setUnreadCount(Service.$sheetHeader.unreadCount())}function s(e){Service.$sheetHeader.decrUnreadCount(e),View.$sheetHeader.setUnreadCount(Service.$sheetHeader.unreadCount())}function c(){var e=Service.$conversationAgency,t=e.isRequestingGroupConversation(),n=300;Ctrl.$conversationPanel.stopPollingWaitingQueueLength(),$timeout(function(){i(),t&&Ctrl.$conversationList.show(),!e.isDefaultConversationAvaliable()&&Ctrl.$conversationPanel.mode(Ctrl.$conversationPanel.MODE.CONTENT)},n)}var u=Service.$device;return{onSheetHeaderInit:o,getHeaderTitle:t,onSheetHeaderClicked:n,setHeaderTitle:i,minimize:e,closed:r,incrUnread:a,decrUnread:s}}(),function(e){function t(){e.PPBaseCtrl.call(this);this.init=function(e,t){},this.onUploadingBarRemoveBtnClicked=function(e,t){Service.$uploader.cancel(e)}}extend(t,e.PPBaseCtrl),e.PPUploadingBarCtrl=t}(Ctrl),function(e){function t(e){var t=Service.$api,n=Service.$json,i=Service.$tools,r=e,o=this,a=Service.$device.isMobileBrowser(),s=!1,c=!0,u=0,p=function(e){if(e){var t=Service.PPMessage.Builder,n={appTeamName:e.appTeamName,appWelcomeText:e.appWelcomeText,activeAdmins:e.activeAdmins},i=new t("WELCOME").messageState("FINISH").conversationId(Service.$tools.getUUID()).welcomeBody(n).build().getBody();return i}},l=function(e){if(a);else if(e)return p(e)},d=function(e,t){return t&&(s=!0,e.push(t)),e},f=function(){return d([],l())},h=f(),g=[],m=function(e){return-1!=$.inArray(e,g)},v=function(e){return e.messageId?m(e.messageId):!1},b=20,w=0,x=b,y=null,_=function(e,i){return e?void t.getMessageHistory({conversation_uuid:e,page_offset:w,page_size:x,max_id:y},function(e){w++,y=y?y:e.list.length>0?e.list[0].uuid:null;var t=[];!function r(e,i,o,a){i>e?new Service.ApiMessageAdapter(n.parse(o[e].message_body)).asyncGetPPMessage(function(n,s){s&&!v(n.getBody())&&t.push(n.getBody()),r(e+1,i,o,a)}):a&&a()}(0,e.list.length,e.list,function(){var e=I(t);k(e),i&&i(e)})},function(e){i&&i([])}):void(i&&i([]))},S=300,E=S,C=null,T=null,P=function(e){var t=C,n=e.messageTimestamp,i=Service.$messageToolsModule.isMessage(e);return C=i&&n?n:C,i&&n?t?!(E>=n-t):!0:!1},I=function(e){if(!e)return e;if(0===e.length)return null!=T&&(e.push(A(T)),T=null),e;var t=[],n=T||e[0].messageTimestamp;return $.each(e,function(e,i){var r=n-i.messageTimestamp>E;r&&t.unshift(A(n)),t.unshift(i),n=i.messageTimestamp}),T=e[e.length-1].messageTimestamp,t},k=function(e){if(e&&0!=e.length){var t=e.slice().reverse();$.each(t,function(e,t){h.unshift(t)})}},A=function(e){var t=1e3*e,n=Service.Constants.I18N[Service.$language.getLanguage()].timeFormat(t);return new Service.PPMessage.Builder("TIMESTAMP").id(i.getUUID()).timestampBody({time:t,timeStr:n}).messageState("FINISH").build().getBody()};this.updateMessageIdsArray=function(e){m(e)||g.push(e)},this.clear=function(){h=[],g=[],w=0,y=null,C=null},this.getConversationHistory=function(e,t){_(e,t)},this.addMessage=function(e){if(e.messageId&&v(e))return null;var t=P(e),n=null;return t&&(n=A(e.messageTimestamp),h.push(n)),h.push(e),Service.$messageStore.map(e.messageId,r),e.messageId&&o.updateMessageIdsArray(e.messageId),n},this.find=function(e){if(m(e)){for(var t=h.length;t--;)if(h[t].messageId===e)return h[t];return e}},this.isEmpty=function(){return 0==h.length},this.getMessages=function(){return h},this.setLoadable=function(e){c=e},this.isLoadable=function(){return c},this.canAddWelcomeInfo=function(){return this.isEmpty()&&!s},this.addWelcomeInfo=function(e){var t=l(e);return d(this.getMessages(),t),t},this.unreadCount=function(){return u},this.incrUnreadCount=function(){u++},this.clearUnread=function(){u=0},this.token=function(){return r}}e.ConversationContentModal=t}(Modal),Modal.$conversationContentGroup=function(){function e(e,t){if(!t)throw new Error("Modal == null");if(n(e))throw new Error("Modal "+e+" exist!");r[e]=t}function t(e){var t;return t=n(e)?r[e]:r[e]=i(e)}function n(e){return void 0!==r[e]}function i(e){return new Modal.ConversationContentModal(e)}var r={};return{get:t,set:e,exist:n}}(),Service.PPStartUp.bootServices(),fn}function PPModule(e){var t,n=function(e){return PPMessage(e)},i=function(e){return r()||(t=n(e),a.fn=t),t},r=function(){return void 0!==t},o=function(){t=void 0},a={version:"0.2.0.6",boot:function(t,n){t=t||window.ppSettings,t&&i(e).Service.$publicApi.boot(t,n)},show:function(){r(e)&&i(e).Service.$publicApi.show()},hide:function(){r(e)&&i(e).Service.$publicApi.hide()},onShow:function(t){r(e)&&i(e).Service.$publicApi.onShow(t)},onHide:function(t){r(e)&&i(e).Service.$publicApi.onHide(t)},shutdown:function(){r(e)&&i(e).Service.$publicApi.shutdown(),o()},update:function(t){t=t||window.ppSettings,r(e)&&i(e).Service.$publicApi.update(t)&&(a.shutdown(),a.boot(t))}};return a}function JQueryModule(){return function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=oe.type(e);return"function"===n||oe.isWindow(e)?!1:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(oe.isFunction(t))return oe.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return oe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ge.test(t))return oe.filter(t,e,n);t=oe.filter(t,e)}return oe.grep(e,function(e){return Z.call(t,e)>-1!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return oe.each(e.match(ye)||[],function(e,n){t[n]=!0}),t}function a(){X.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a),oe.ready()}function s(){this.expando=oe.expando+s.uid++}function c(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Pe,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Te.test(n)?oe.parseJSON(n):n}catch(r){}Ce.set(e,t,n)}else n=void 0;return n}function u(e,t,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return oe.css(e,t,"")},c=s(),u=n&&n[3]||(oe.cssNumber[t]?"":"px"),p=(oe.cssNumber[t]||"px"!==u&&+c)&&ke.exec(oe.css(e,t));if(p&&p[3]!==u){u=u||p[3],n=n||[],p=+c||1;do o=o||".5",p/=o,oe.style(e,t,p+u);while(o!==(o=s()/c)&&1!==o&&--a)}return n&&(p=+p||+c||0,r=n[1]?p+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=p,i.end=r)),r}function p(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],n):n}function l(e,t){for(var n=0,i=e.length;i>n;n++)$e.set(e[n],"globalEval",!t||$e.get(t[n],"globalEval"))}function d(e,t,n,i,r){for(var o,a,s,c,u,d,f=t.createDocumentFragment(),h=[],g=0,m=e.length;m>g;g++)if(o=e[g],o||0===o)if("object"===oe.type(o))oe.merge(h,o.nodeType?[o]:o);else if(Re.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(Me.exec(o)||["",""])[1].toLowerCase(),c=Le[s]||Le._default,a.innerHTML=c[1]+oe.htmlPrefilter(o)+c[2],d=c[0];d--;)a=a.lastChild;oe.merge(h,a.childNodes),a=f.firstChild,a.textContent=""}else h.push(t.createTextNode(o));for(f.textContent="",g=0;o=h[g++];)if(i&&oe.inArray(o,i)>-1)r&&r.push(o);else if(u=oe.contains(o.ownerDocument,o),a=p(f.appendChild(o),"script"),u&&l(a),n)for(d=0;o=a[d++];)Oe.test(o.type||"")&&n.push(o);return f}function f(){return!0}function h(){return!1}function g(){try{return X.activeElement}catch(e){}}function m(e,t,n,i,r,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)m(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=h;else if(!r)return e;return 1===o&&(a=r,r=function(e){return oe().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=oe.guid++)),e.each(function(){oe.event.add(this,t,r,i,n)})}function v(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function w(e){var t=Ge.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function x(e,t){var n,i,r,o,a,s,c,u;if(1===t.nodeType){if($e.hasData(e)&&(o=$e.access(e),a=$e.set(t,o),u=o.events)){delete a.handle,a.events={};for(r in u)for(n=0,i=u[r].length;i>n;n++)oe.event.add(t,r,u[r][n])}Ce.hasData(e)&&(s=Ce.access(e),c=oe.extend({},s),Ce.set(t,c))}}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ne.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function _(e,t,n,i){t=J.apply([],t);var r,o,a,s,c,u,l=0,f=e.length,h=f-1,g=t[0],m=oe.isFunction(g);if(m||f>1&&"string"==typeof g&&!ie.checkClone&&Fe.test(g))return e.each(function(r){var o=e.eq(r);m&&(t[0]=g.call(this,r,o.html())),_(o,t,n,i)});if(f&&(r=d(t,e[0].ownerDocument,!1,e,i),o=r.firstChild,1===r.childNodes.length&&(r=o),o||i)){for(a=oe.map(p(r,"script"),b),s=a.length;f>l;l++)c=r,l!==h&&(c=oe.clone(c,!0,!0),s&&oe.merge(a,p(c,"script"))),n.call(e[l],c,l);if(s)for(u=a[a.length-1].ownerDocument,oe.map(a,w),l=0;s>l;l++)c=a[l],Oe.test(c.type||"")&&!$e.access(c,"globalEval")&&oe.contains(u,c)&&(c.src?oe._evalUrl&&oe._evalUrl(c.src):oe.globalEval(c.textContent.replace(ze,"")))}return e}function S(e,t,n){for(var i,r=t?oe.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||oe.cleanData(p(i)),i.parentNode&&(n&&oe.contains(i.ownerDocument,i)&&l(p(i,"script")),i.parentNode.removeChild(i));return e}function E(e,t){var n=oe(t.createElement(e)).appendTo(t.body),i=oe.css(n[0],"display");return n.detach(),i}function $(e){var t=X,n=qe[e];return n||(n=E(e,t),"none"!==n&&n||(We=(We||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=We[0].contentDocument,t.write(),t.close(),n=E(e,t),We.detach()),qe[e]=n),n}function C(e,t,n){var i,r,o,a,s=e.style;return n=n||Qe(e),a=n?n.getPropertyValue(t)||n[t]:void 0,""!==a&&void 0!==a||oe.contains(e.ownerDocument,e)||(a=oe.style(e,t)),n&&!ie.pixelMarginRight()&&Xe.test(a)&&Ye.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o),void 0!==a?a+"":a}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function P(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in it)return e}function I(e,t,n){var i=ke.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function k(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=oe.css(e,n+Ae[o],!0,r)),i?("content"===n&&(a-=oe.css(e,"padding"+Ae[o],!0,r)),"margin"!==n&&(a-=oe.css(e,"border"+Ae[o]+"Width",!0,r))):(a+=oe.css(e,"padding"+Ae[o],!0,r),"padding"!==n&&(a+=oe.css(e,"border"+Ae[o]+"Width",!0,r)));return a}function A(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Qe(e),a="border-box"===oe.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=C(e,t,o),(0>r||null==r)&&(r=e.style[t]),Xe.test(r))return r;i=a&&(ie.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+k(e,t,n||(a?"border":"content"),i,o)+"px"}function D(e,t){for(var n,i,r,o=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(o[a]=$e.get(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&De(i)&&(o[a]=$e.access(i,"olddisplay",$(i.nodeName)))):(r=De(i),"none"===n&&r||$e.set(i,"olddisplay",r?n:oe.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function N(e,t,n,i,r){return new N.prototype.init(e,t,n,i,r)}function M(){return e.setTimeout(function(){rt=void 0}),rt=oe.now()}function O(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=Ae[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function L(e,t,n){for(var i,r=(V.tweeners[t]||[]).concat(V.tweeners["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,t,e))return i}function R(e,t,n){var i,r,o,a,s,c,u,p,l=this,d={},f=e.style,h=e.nodeType&&De(e),g=$e.get(e,"fxshow");n.queue||(s=oe._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--,oe.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=oe.css(e,"display"),p="none"===u?$e.get(e,"olddisplay")||$(e.nodeName):u,"inline"===p&&"none"===oe.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",l.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],at.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;h=!0}d[i]=g&&g[i]||oe.style(e,i)}else u=void 0;if(oe.isEmptyObject(d))"inline"===("none"===u?$(e.nodeName):u)&&(f.display=u);else{g?"hidden"in g&&(h=g.hidden):g=$e.access(e,"fxshow",{}),o&&(g.hidden=!h),h?oe(e).show():l.done(function(){oe(e).hide()}),l.done(function(){var t;$e.remove(e,"fxshow");for(t in d)oe.style(e,t,d[t])});for(i in d)a=L(h?g[i]:0,i,l),i in g||(g[i]=a.start,h&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function U(e,t){var n,i,r,o,a;for(n in e)if(i=oe.camelCase(n),r=t[i],o=e[n],oe.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=oe.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function V(e,t,n){var i,r,o=0,a=V.prefilters.length,s=oe.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var t=rt||M(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,o=1-i,a=0,c=u.tweens.length;c>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&c?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{},easing:oe.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||M(),duration:n.duration,tweens:[],createTween:function(t,n){var i=oe.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),p=u.props;for(U(p,u.opts.specialEasing);a>o;o++)if(i=V.prefilters[o].call(u,e,p,u.opts))return oe.isFunction(i.stop)&&(oe._queueHooks(u.elem,u.opts.queue).stop=oe.proxy(i.stop,i)),i;return oe.map(p,L,u),oe.isFunction(u.opts.start)&&u.opts.start.call(e,u),oe.fx.timer(oe.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function H(e){return e.getAttribute&&e.getAttribute("class")||""}function j(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(ye)||[];if(oe.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function B(e,t,n,i){function r(s){var c;return o[s]=!0,oe.each(e[s]||[],function(e,s){var u=s(t,n,i);return"string"!=typeof u||a||o[u]?a?!(c=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),c}var o={},a=e===Ct;return r(t.dataTypes[0])||!o["*"]&&r("*")}function F(e,t){var n,i,r=oe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&oe.extend(!0,e,i),e}function G(e,t,n){for(var i,r,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){c.unshift(r);break}if(c[0]in n)o=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==c[0]&&c.unshift(o),n[o]):void 0}function z(e,t,n,i){var r,o,a,s,c,u={},p=e.dataTypes.slice();if(p[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=p.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=p.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(a=u[c+" "+o]||u["* "+o],!a)for(r in u)if(s=r.split(" "),s[1]===o&&(a=u[c+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[r]:u[r]!==!0&&(o=s[0],p.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(l){return{state:"parsererror",error:a?l:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function W(e,t,n,i){var r;if(oe.isArray(t))oe.each(t,function(t,r){n||kt.test(e)?i(e,r):W(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==oe.type(t))i(e,t);else for(r in t)W(e+"["+r+"]",t[r],n,i)}function q(e){return oe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],X=e.document,Q=Y.slice,J=Y.concat,K=Y.push,Z=Y.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},re="2.2.4",oe=function(e,t){return new oe.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,ce=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:re,constructor:oe,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Q.call(this)},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return oe.each(this,e)},map:function(e){return this.pushStack(oe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:Y.sort,splice:Y.splice},oe.extend=oe.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||oe.isFunction(a)||(a={}),s===c&&(a=this,s--);c>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],i=e[t],a!==i&&(u&&i&&(oe.isPlainObject(i)||(r=oe.isArray(i)))?(r?(r=!1,o=n&&oe.isArray(n)?n:[]):o=n&&oe.isPlainObject(n)?n:{},a[t]=oe.extend(u,o,i)):void 0!==i&&(a[t]=i));return a},oe.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!oe.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=oe.trim(e),e&&(1===e.indexOf("use strict")?(t=X.createElement("script"),t.text=e,X.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(se,"ms-").replace(ce,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,r=0;if(n(e))for(i=e.length;i>r&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?oe.merge(i,"string"==typeof e?[e]:e):K.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:Z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,a=e.length,s=!n;a>o;o++)i=!t(e[o],o),i!==s&&r.push(e[o]);return r},map:function(e,t,i){var r,o,a=0,s=[];if(n(e))for(r=e.length;r>a;a++)o=t(e[a],a,i),null!=o&&s.push(o);else for(a in e)o=t(e[a],a,i),null!=o&&s.push(o);return J.apply([],s)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),oe.isFunction(e)?(i=Q.call(arguments,2),r=function(){return e.apply(t||this,i.concat(Q.call(arguments)))},r.guid=e.guid=e.guid||oe.guid++,r):void 0},now:Date.now,support:ie}),"function"==typeof Symbol&&(oe.fn[Symbol.iterator]=Y[Symbol.iterator]),oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var pe=function(e){function t(e,t,n,i){var r,o,a,s,c,u,l,f,h=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!i&&((t?t.ownerDocument||t:H)!==D&&A(t),t=t||D,M)){if(11!==g&&(u=ve.exec(e)))if(r=u[1]){if(9===g){if(!(a=t.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(h&&(a=h.getElementById(r))&&U(t,a)&&a.id===r)return n.push(a),n}else{if(u[2])return K.apply(n,t.getElementsByTagName(e)),n;if((r=u[3])&&y.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(r)),n}if(y.qsa&&!z[e+" "]&&(!O||!O.test(e))){if(1!==g)h=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(we,"\\$&"):t.setAttribute("id",s=V),l=$(e),o=l.length,c=de.test(s)?"#"+s:"[id='"+s+"']";o--;)l[o]=c+" "+d(l[o]);f=l.join(","),h=be.test(e)&&p(t.parentNode)||t}if(f)try{return K.apply(n,h.querySelectorAll(f)),n}catch(m){}finally{s===V&&t.removeAttribute("id")}}}return T(e.replace(se,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>_.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[V]=!0,e}function r(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)_.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||q)-(~e.sourceIndex||q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function p(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function l(){}function d(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=B++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,c,u,p=[j,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(u=t[V]||(t[V]={}),c=u[t.uniqueID]||(u[t.uniqueID]={}),(s=c[i])&&s[0]===j&&s[1]===o)return p[2]=s[2];if(c[i]=p,p[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function g(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function m(e,t,n,i,r){for(var o,a=[],s=0,c=e.length,u=null!=t;c>s;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),u&&t.push(s)));return a}function v(e,t,n,r,o,a){return r&&!r[V]&&(r=v(r)),o&&!o[V]&&(o=v(o,a)),i(function(i,a,s,c){var u,p,l,d=[],f=[],h=a.length,v=i||g(t||"*",s.nodeType?[s]:s,[]),b=!e||!i&&t?v:m(v,d,e,s,c),w=n?o||(i?e:h||r)?[]:a:b;if(n&&n(b,w,s,c),r)for(u=m(w,f),r(u,[],s,c),p=u.length;p--;)(l=u[p])&&(w[f[p]]=!(b[f[p]]=l));if(i){if(o||e){if(o){for(u=[],p=w.length;p--;)(l=w[p])&&u.push(b[p]=l);o(null,w=[],u,c)}for(p=w.length;p--;)(l=w[p])&&(u=o?ee(i,l):d[p])>-1&&(i[u]=!(a[u]=l))}}else w=m(w===a?w.splice(h,w.length):w),o?o(null,a,w,c):K.apply(a,w)})}function b(e){for(var t,n,i,r=e.length,o=_.relative[e[0].type],a=o||_.relative[" "],s=o?1:0,c=f(function(e){return e===t},a,!0),u=f(function(e){return ee(t,e)>-1},a,!0),p=[function(e,n,i){var r=!o&&(i||n!==P)||((t=n).nodeType?c(e,n,i):u(e,n,i));return t=null,r}];r>s;s++)if(n=_.relative[e[s].type])p=[f(h(p),n)];else{if(n=_.filter[e[s].type].apply(null,e[s].matches),n[V]){for(i=++s;r>i&&!_.relative[e[i].type];i++);return v(s>1&&h(p),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,i>s&&b(e.slice(s,i)),r>i&&b(e=e.slice(i)),r>i&&d(e))}p.push(n)}return h(p)}function w(e,n){var r=n.length>0,o=e.length>0,a=function(i,a,s,c,u){var p,l,d,f=0,h="0",g=i&&[],v=[],b=P,w=i||o&&_.find.TAG("*",u),x=j+=null==b?1:Math.random()||.1,y=w.length;for(u&&(P=a===D||a||u);h!==y&&null!=(p=w[h]);h++){if(o&&p){for(l=0,a||p.ownerDocument===D||(A(p),s=!M);d=e[l++];)if(d(p,a||D,s)){c.push(p);break}u&&(j=x)}r&&((p=!d&&p)&&f--,i&&g.push(p))}if(f+=h,r&&h!==f){for(l=0;d=n[l++];)d(g,v,a,s);if(i){if(f>0)for(;h--;)g[h]||v[h]||(v[h]=Q.call(c));v=m(v)}K.apply(c,v),u&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(c)}return u&&(j=x,P=b),g};return r?i(a):a}var x,y,_,S,E,$,C,T,P,I,k,A,D,N,M,O,L,R,U,V="sizzle"+1*new Date,H=e.document,j=0,B=0,F=n(),G=n(),z=n(),W=function(e,t){return e===t&&(k=!0),0},q=1<<31,Y={}.hasOwnProperty,X=[],Q=X.pop,J=X.push,K=X.push,Z=X.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),pe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),le=new RegExp(oe),de=new RegExp("^"+ie+"$"),fe={
ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),ye=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},_e=function(){A()};try{K.apply(X=Z.call(H.childNodes),H.childNodes),X[H.childNodes.length].nodeType}catch(Se){K={apply:X.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}y=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},A=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:H;return i!==D&&9===i.nodeType&&i.documentElement?(D=i,N=D.documentElement,M=!E(D),(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",_e,!1):n.attachEvent&&n.attachEvent("onunload",_e)),y.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=r(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=me.test(D.getElementsByClassName),y.getById=r(function(e){return N.appendChild(e).id=V,!D.getElementsByName||!D.getElementsByName(V).length}),y.getById?(_.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&M){var n=t.getElementById(e);return n?[n]:[]}},_.filter.ID=function(e){var t=e.replace(xe,ye);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(xe,ye);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),_.find.TAG=y.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):y.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},_.find.CLASS=y.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&M?t.getElementsByClassName(e):void 0},L=[],O=[],(y.qsa=me.test(D.querySelectorAll))&&(r(function(e){N.appendChild(e).innerHTML="<a id='"+V+"'></a><select id='"+V+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+V+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+V+"+*").length||O.push(".#.+[+~]")}),r(function(e){var t=D.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(y.matchesSelector=me.test(R=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(e){y.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),L.push("!=",oe)}),O=O.length&&new RegExp(O.join("|")),L=L.length&&new RegExp(L.join("|")),t=me.test(N.compareDocumentPosition),U=t||me.test(N.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return k=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!y.sortDetached&&t.compareDocumentPosition(e)===n?e===D||e.ownerDocument===H&&U(H,e)?-1:t===D||t.ownerDocument===H&&U(H,t)?1:I?ee(I,e)-ee(I,t):0:4&n?-1:1)}:function(e,t){if(e===t)return k=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],c=[t];if(!r||!o)return e===D?-1:t===D?1:r?-1:o?1:I?ee(I,e)-ee(I,t):0;if(r===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;s[i]===c[i];)i++;return i?a(s[i],c[i]):s[i]===H?-1:c[i]===H?1:0},D):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&A(e),n=n.replace(pe,"='$1']"),y.matchesSelector&&M&&!z[n+" "]&&(!L||!L.test(n))&&(!O||!O.test(n)))try{var i=R.call(e,n);if(i||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&A(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&A(e);var n=_.attrHandle[t.toLowerCase()],i=n&&Y.call(_.attrHandle,t.toLowerCase())?n(e,t,!M):void 0;return void 0!==i?i:y.attributes||!M?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(k=!y.detectDuplicates,I=!y.sortStable&&e.slice(0),e.sort(W),k){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return I=null,e},S=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=S(t);return n},_=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&le.test(n)&&(t=$(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&F(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var u,p,l,d,f,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!c&&!s,w=!1;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&b){for(d=m,l=d[V]||(d[V]={}),p=l[d.uniqueID]||(l[d.uniqueID]={}),u=p[e]||[],f=u[0]===j&&u[1],w=f&&u[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(w=f=0)||h.pop();)if(1===d.nodeType&&++w&&d===t){p[e]=[j,f,w];break}}else if(b&&(d=t,l=d[V]||(d[V]={}),p=l[d.uniqueID]||(l[d.uniqueID]={}),u=p[e]||[],f=u[0]===j&&u[1],w=f),w===!1)for(;(d=++f&&d&&d[g]||(w=f=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++w||(b&&(l=d[V]||(d[V]={}),p=l[d.uniqueID]||(l[d.uniqueID]={}),p[e]=[j,w]),d!==t)););return w-=r,w===i||w%i===0&&w/i>=0}}},PSEUDO:function(e,n){var r,o=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[V]?o(n):o.length>1?(r=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=ee(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=C(e.replace(se,"$1"));return r[V]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(xe,ye),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:i(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xe,ye).toLowerCase(),function(t){var n;do if(n=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},_.pseudos.nth=_.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})_.pseudos[x]=c(x);return l.prototype=_.filters=_.pseudos,_.setFilters=new l,$=t.tokenize=function(e,n){var i,r,o,a,s,c,u,p=G[e+" "];if(p)return n?0:p.slice(0);for(s=e,c=[],u=_.preFilter;s;){i&&!(r=ce.exec(s))||(r&&(s=s.slice(r[0].length)||s),c.push(o=[])),i=!1,(r=ue.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(se," ")}),s=s.slice(i.length));for(a in _.filter)!(r=fe[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):G(e,c).slice(0)},C=t.compile=function(e,t){var n,i=[],r=[],o=z[e+" "];if(!o){for(t||(t=$(e)),n=t.length;n--;)o=b(t[n]),o[V]?i.push(o):r.push(o);o=z(e,w(r,i)),o.selector=e}return o},T=t.select=function(e,t,n,i){var r,o,a,s,c,u="function"==typeof e&&e,l=!i&&$(e=u.selector||e);if(n=n||[],1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&y.getById&&9===t.nodeType&&M&&_.relative[o[1].type]){if(t=(_.find.ID(a.matches[0].replace(xe,ye),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=fe.needsContext.test(e)?0:o.length;r--&&(a=o[r],!_.relative[s=a.type]);)if((c=_.find[s])&&(i=c(a.matches[0].replace(xe,ye),be.test(o[0].type)&&p(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&d(o),!e)return K.apply(n,i),n;break}}return(u||C(e,l))(i,t,!M,n,!t||be.test(e)&&p(t.parentNode)||t),n},y.sortStable=V.split("").sort(W).join("")===V,y.detectDuplicates=!!k,A(),y.sortDetached=r(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);oe.find=pe,oe.expr=pe.selectors,oe.expr[":"]=oe.expr.pseudos,oe.uniqueSort=oe.unique=pe.uniqueSort,oe.text=pe.getText,oe.isXMLDoc=pe.isXML,oe.contains=pe.contains;var le=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&oe(e).is(n))break;i.push(e)}return i},de=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},fe=oe.expr.match.needsContext,he=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ge=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?oe.find.matchesSelector(i,e)?[i]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;n>t;t++)if(oe.contains(r[t],this))return!0}));for(t=0;n>t;t++)oe.find(e,r[t],i);return i=this.pushStack(n>1?oe.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&fe.test(e)?oe(e):e||[],!1).length}});var me,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,be=oe.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||me,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ve.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),he.test(i[1])&&oe.isPlainObject(t))for(i in t)oe.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return r=X.getElementById(i[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?void 0!==n.ready?n.ready(e):e(oe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))};be.prototype=oe.fn,me=oe(X);var we=/^(?:parents|prev(?:Until|All))/,xe={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({has:function(e){var t=oe(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(oe.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=fe.test(e)||"string"!=typeof e?oe(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?oe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?Z.call(oe(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.uniqueSort(oe.merge(this.get(),oe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return le(e,"parentNode")},parentsUntil:function(e,t,n){return le(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return le(e,"nextSibling")},prevAll:function(e){return le(e,"previousSibling")},nextUntil:function(e,t,n){return le(e,"nextSibling",n)},prevUntil:function(e,t,n){return le(e,"previousSibling",n)},siblings:function(e){return de((e.parentNode||{}).firstChild,e)},children:function(e){return de(e.firstChild)},contents:function(e){return e.contentDocument||oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(n,i){var r=oe.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=oe.filter(i,r)),this.length>1&&(xe[e]||oe.uniqueSort(r),we.test(e)&&r.reverse()),this.pushStack(r)}});var ye=/\S+/g;oe.Callbacks=function(e){e="string"==typeof e?o(e):oe.extend({},e);var t,n,i,r,a=[],s=[],c=-1,u=function(){for(r=e.once,i=t=!0;s.length;c=-1)for(n=s.shift();++c<a.length;)a[c].apply(n[0],n[1])===!1&&e.stopOnFalse&&(c=a.length,n=!1);e.memory||(n=!1),t=!1,r&&(a=n?[]:"")},p={add:function(){return a&&(n&&!t&&(c=a.length-1,s.push(n)),function i(t){oe.each(t,function(t,n){oe.isFunction(n)?e.unique&&p.has(n)||a.push(n):n&&n.length&&"string"!==oe.type(n)&&i(n)})}(arguments),n&&!t&&u()),this},remove:function(){return oe.each(arguments,function(e,t){for(var n;(n=oe.inArray(t,a,n))>-1;)a.splice(n,1),c>=n&&c--}),this},has:function(e){return e?oe.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return r=s=[],n||(a=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||u()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(n){oe.each(t,function(t,o){var a=oe.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,i):i}},r={};return i.pipe=i.then,oe.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=Q.call(arguments),a=o.length,s=1!==a||e&&oe.isFunction(e.promise)?a:0,c=1===s?e:oe.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?Q.call(arguments):r,i===t?c.notifyWith(n,i):--s||c.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&oe.isFunction(o[r].promise)?o[r].promise().progress(u(r,n,t)).done(u(r,i,o)).fail(c.reject):--s;return s||c.resolveWith(i,o),c.promise()}});var _e;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){(e===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,e!==!0&&--oe.readyWait>0||(_e.resolveWith(X,[oe]),oe.fn.triggerHandler&&(oe(X).triggerHandler("ready"),oe(X).off("ready"))))}}),oe.ready.promise=function(t){return _e||(_e=oe.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?e.setTimeout(oe.ready):(X.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a))),_e.promise(t)},oe.ready.promise();var Se=function(e,t,n,i,r,o,a){var s=0,c=e.length,u=null==n;if("object"===oe.type(n)){r=!0;for(s in n)Se(e,t,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,oe.isFunction(i)||(a=!0),u&&(a?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(oe(e),n)})),t))for(;c>s;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:u?t.call(e):c?t(e[0],n):o},Ee=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Ee(e))return{};var t=e[this.expando];return t||(t={},Ee(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[t]=n;else for(i in t)r[i]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,oe.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{oe.isArray(t)?i=t.concat(t.map(oe.camelCase)):(r=oe.camelCase(t),t in o?i=[t,r]:(i=r,i=i in o?[i]:i.match(ye)||[])),n=i.length;for(;n--;)delete o[i[n]]}(void 0===t||oe.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!oe.isEmptyObject(t)}};var $e=new s,Ce=new s,Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pe=/[A-Z]/g;oe.extend({hasData:function(e){return Ce.hasData(e)||$e.hasData(e)},data:function(e,t,n){return Ce.access(e,t,n)},removeData:function(e,t){Ce.remove(e,t)},_data:function(e,t,n){return $e.access(e,t,n)},_removeData:function(e,t){$e.remove(e,t)}}),oe.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=Ce.get(o),1===o.nodeType&&!$e.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),c(o,i,r[i])));$e.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Ce.set(this,e)}):Se(this,function(t){var n,i;if(o&&void 0===t){if(n=Ce.get(o,e)||Ce.get(o,e.replace(Pe,"-$&").toLowerCase()),void 0!==n)return n;if(i=oe.camelCase(e),n=Ce.get(o,i),void 0!==n)return n;if(n=c(o,i,void 0),void 0!==n)return n}else i=oe.camelCase(e),this.each(function(){var n=Ce.get(this,i);Ce.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&Ce.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ce.remove(this,e)})}}),oe.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=$e.get(e,t),n&&(!i||oe.isArray(n)?i=$e.access(e,t,oe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=oe.queue(e,t),i=n.length,r=n.shift(),o=oe._queueHooks(e,t),a=function(){oe.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return $e.get(e,n)||$e.access(e,n,{empty:oe.Callbacks("once memory").add(function(){$e.remove(e,[t+"queue",n])})})}}),oe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?oe.queue(this[0],e):void 0===t?this:this.each(function(){var n=oe.queue(this,e,t);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=oe.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=$e.get(o[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var Ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ke=new RegExp("^(?:([+-])=|)("+Ie+")([a-z%]*)$","i"),Ae=["Top","Right","Bottom","Left"],De=function(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},Ne=/^(?:checkbox|radio)$/i,Me=/<([\w:-]+)/,Oe=/^$|\/(?:java|ecma)script/i,Le={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Le.optgroup=Le.option,Le.tbody=Le.tfoot=Le.colgroup=Le.caption=Le.thead,Le.th=Le.td;var Re=/<|&#?\w+;/;!function(){var e=X.createDocumentFragment(),t=e.appendChild(X.createElement("div")),n=X.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ue=/^key/,Ve=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,He=/^([^.]*)(?:\.(.+)|)/;oe.event={global:{},add:function(e,t,n,i,r){var o,a,s,c,u,p,l,d,f,h,g,m=$e.get(e);if(m)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=oe.guid++),(c=m.events)||(c=m.events={}),(a=m.handle)||(a=m.handle=function(t){return"undefined"!=typeof oe&&oe.event.triggered!==t.type?oe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ye)||[""],u=t.length;u--;)s=He.exec(t[u])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f&&(l=oe.event.special[f]||{},f=(r?l.delegateType:l.bindType)||f,l=oe.event.special[f]||{},p=oe.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&oe.expr.match.needsContext.test(r),namespace:h.join(".")},o),(d=c[f])||(d=c[f]=[],d.delegateCount=0,l.setup&&l.setup.call(e,i,h,a)!==!1||e.addEventListener&&e.addEventListener(f,a)),l.add&&(l.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,p):d.push(p),oe.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,a,s,c,u,p,l,d,f,h,g,m=$e.hasData(e)&&$e.get(e);if(m&&(c=m.events)){for(t=(t||"").match(ye)||[""],u=t.length;u--;)if(s=He.exec(t[u])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f){for(l=oe.event.special[f]||{},f=(i?l.delegateType:l.bindType)||f,d=c[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)p=d[o],!r&&g!==p.origType||n&&n.guid!==p.guid||s&&!s.test(p.namespace)||i&&i!==p.selector&&("**"!==i||!p.selector)||(d.splice(o,1),p.selector&&d.delegateCount--,l.remove&&l.remove.call(e,p));a&&!d.length&&(l.teardown&&l.teardown.call(e,h,m.handle)!==!1||oe.removeEvent(e,f,m.handle),delete c[f])}else for(f in c)oe.event.remove(e,f+t[u],n,i,!0);oe.isEmptyObject(c)&&$e.remove(e,"handle events")}},dispatch:function(e){e=oe.event.fix(e);var t,n,i,r,o,a=[],s=Q.call(arguments),c=($e.get(this,"events")||{})[e.type]||[],u=oe.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=oe.event.handlers.call(this,e,c),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,i=((oe.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(i=[],n=0;s>n;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?oe(r,this).index(c)>-1:oe.find(r,this,null,[c]).length),i[r]&&i.push(o);i.length&&a.push({elem:c,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||X,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[oe.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Ve.test(r)?this.mouseHooks:Ue.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new oe.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==g()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oe.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},oe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},oe.Event=function(e,t){return this instanceof oe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:h):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(e,t)},oe.Event.prototype={constructor:oe.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||oe.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),oe.fn.extend({on:function(e,t,n,i){return m(this,e,t,n,i)},one:function(e,t,n,i){return m(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,oe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=h),this.each(function(){oe.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Be=/<script|<style|<link/i,Fe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ge=/^true\/(.*)/,ze=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oe.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s=e.cloneNode(!0),c=oe.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(a=p(s),o=p(e),i=0,r=o.length;r>i;i++)y(o[i],a[i]);if(t)if(n)for(o=o||p(e),
a=a||p(s),i=0,r=o.length;r>i;i++)x(o[i],a[i]);else x(e,s);return a=p(s,"script"),a.length>0&&l(a,!c&&p(e,"script")),s},cleanData:function(e){for(var t,n,i,r=oe.event.special,o=0;void 0!==(n=e[o]);o++)if(Ee(n)){if(t=n[$e.expando]){if(t.events)for(i in t.events)r[i]?oe.event.remove(n,i):oe.removeEvent(n,i,t.handle);n[$e.expando]=void 0}n[Ce.expando]&&(n[Ce.expando]=void 0)}}}),oe.fn.extend({domManip:_,detach:function(e){return S(this,e,!0)},remove:function(e){return S(this,e)},text:function(e){return Se(this,function(e){return void 0===e?oe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return _(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return _(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return _(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return _(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(oe.cleanData(p(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return Se(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Be.test(e)&&!Le[(Me.exec(e)||["",""])[1].toLowerCase()]){e=oe.htmlPrefilter(e);try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(oe.cleanData(p(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return _(this,arguments,function(t){var n=this.parentNode;oe.inArray(this,e)<0&&(oe.cleanData(p(this)),n&&n.replaceChild(t,this))},e)}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var n,i=[],r=oe(e),o=r.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),oe(r[a])[t](n),K.apply(i,n.get());return this.pushStack(i)}});var We,qe={HTML:"block",BODY:"block"},Ye=/^margin/,Xe=new RegExp("^("+Ie+")(?!px)[a-z%]+$","i"),Qe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Je=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r},Ke=X.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ke.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,o="2px"===t.marginLeft,i="4px"===t.width,s.style.marginRight="50%",r="4px"===t.marginRight,Ke.removeChild(a)}var n,i,r,o,a=X.createElement("div"),s=X.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),oe.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),r},reliableMarginLeft:function(){return null==i&&t(),o},reliableMarginRight:function(){var t,n=s.appendChild(X.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Ke.appendChild(a),t=!parseFloat(e.getComputedStyle(n).marginRight),Ke.removeChild(a),s.removeChild(n),t}}))}();var Ze=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],it=X.createElement("div").style;oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=C(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=oe.camelCase(t),c=e.style;return t=oe.cssProps[s]||(oe.cssProps[s]=P(s)||s),a=oe.cssHooks[t]||oe.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t]:(o=typeof n,"string"===o&&(r=ke.exec(n))&&r[1]&&(n=u(e,t,r),o="number"),null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(oe.cssNumber[s]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(c[t]=n)),void 0)}},css:function(e,t,n,i){var r,o,a,s=oe.camelCase(t);return t=oe.cssProps[s]||(oe.cssProps[s]=P(s)||s),a=oe.cssHooks[t]||oe.cssHooks[s],a&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=C(e,t,i)),"normal"===r&&t in tt&&(r=tt[t]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,n,i){return n?Ze.test(oe.css(e,"display"))&&0===e.offsetWidth?Je(e,et,function(){return A(e,t,i)}):A(e,t,i):void 0},set:function(e,n,i){var r,o=i&&Qe(e),a=i&&k(e,t,i,"border-box"===oe.css(e,"boxSizing",!1,o),o);return a&&(r=ke.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=oe.css(e,t)),I(e,n,a)}}}),oe.cssHooks.marginLeft=T(ie.reliableMarginLeft,function(e,t){return t?(parseFloat(C(e,"marginLeft"))||e.getBoundingClientRect().left-Je(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),oe.cssHooks.marginRight=T(ie.reliableMarginRight,function(e,t){return t?Je(e,{display:"inline-block"},C,[e,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(e,t){oe.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Ae[i]+t]=o[i]||o[i-2]||o[0];return r}},Ye.test(e)||(oe.cssHooks[e+t].set=I)}),oe.fn.extend({css:function(e,t){return Se(this,function(e,t,n){var i,r,o={},a=0;if(oe.isArray(t)){for(i=Qe(e),r=t.length;r>a;a++)o[t[a]]=oe.css(e,t[a],!1,i);return o}return void 0!==n?oe.style(e,t,n):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){De(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=N,N.prototype={constructor:N,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||oe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,n=N.propHooks[this.prop];return this.options.duration?this.pos=t=oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=oe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[oe.cssProps[e.prop]]&&!oe.cssHooks[e.prop]?e.elem[e.prop]=e.now:oe.style(e.elem,e.prop,e.now+e.unit)}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},oe.fx=N.prototype.init,oe.fx.step={};var rt,ot,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;oe.Animation=oe.extend(V,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return u(n.elem,e,ke.exec(t),n),n}]},tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.match(ye);for(var n,i=0,r=e.length;r>i;i++)n=e[i],V.tweeners[n]=V.tweeners[n]||[],V.tweeners[n].unshift(t)},prefilters:[R],prefilter:function(e,t){t?V.prefilters.unshift(e):V.prefilters.push(e)}}),oe.speed=function(e,t,n){var i=e&&"object"==typeof e?oe.extend({},e):{complete:n||!n&&t||oe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!oe.isFunction(t)&&t};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(De).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=oe.isEmptyObject(e),o=oe.speed(t,n,i),a=function(){var t=V(this,oe.extend({},e),o);(r||$e.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=oe.timers,a=$e.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&st.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||oe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=$e.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=oe.timers,a=i?i.length:0;for(n.finish=!0,oe.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(e,t){var n=oe.fn[t];oe.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(O(t,!0),e,i,r)}}),oe.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),oe.timers=[],oe.fx.tick=function(){var e,t=0,n=oe.timers;for(rt=oe.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||oe.fx.stop(),rt=void 0},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){ot||(ot=e.setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){e.clearInterval(ot),ot=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,n){return t=oe.fx?oe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e=X.createElement("input"),t=X.createElement("select"),n=t.appendChild(X.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=X.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var ct,ut=oe.expr.attrHandle;oe.fn.extend({attr:function(e,t){return Se(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?oe.prop(e,t,n):(1===o&&oe.isXMLDoc(e)||(t=t.toLowerCase(),r=oe.attrHooks[t]||(oe.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void oe.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=oe.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(ye);if(o&&1===e.nodeType)for(;n=o[r++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),ct={set:function(e,t,n){return t===!1?oe.removeAttr(e,n):e.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ut[t]||oe.find.attr;ut[t]=function(e,t,i){var r,o;return i||(o=ut[t],ut[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,ut[t]=o),r}});var pt=/^(?:input|select|textarea|button)$/i,lt=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return Se(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[oe.propFix[e]||e]})}}),oe.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&oe.isXMLDoc(e)||(t=oe.propFix[t]||t,r=oe.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||lt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ie.optSelected||(oe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this});var dt=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,c=0;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,H(this)))});if("string"==typeof e&&e)for(t=e.match(ye)||[];n=this[c++];)if(r=H(n),i=1===n.nodeType&&(" "+r+" ").replace(dt," ")){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=oe.trim(i),r!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,c=0;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,H(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(ye)||[];n=this[c++];)if(r=H(n),i=1===n.nodeType&&(" "+r+" ").replace(dt," ")){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s=oe.trim(i),r!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):oe.isFunction(e)?this.each(function(n){oe(this).toggleClass(e.call(this,n,H(this),t),t)}):this.each(function(){var t,i,r,o;if("string"===n)for(i=0,r=oe(this),o=e.match(ye)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||(t=H(this),t&&$e.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":$e.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+H(n)+" ").replace(dt," ").indexOf(t)>-1)return!0;return!1}});var ft=/\r/g,ht=/[\x20\t\r\n\f]+/g;oe.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=oe.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,oe(this).val()):e,null==r?r="":"number"==typeof r?r+="":oe.isArray(r)&&(r=oe.map(r,function(e){return null==e?"":e+""})),t=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=oe.valHooks[r.type]||oe.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(ft,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:oe.trim(oe.text(e)).replace(ht," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:i.length,c=0>r?s:o?r:0;s>c;c++)if(n=i[c],(n.selected||c===r)&&(ie.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!oe.nodeName(n.parentNode,"optgroup"))){if(t=oe(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=oe.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=oe.inArray(oe.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){return oe.isArray(t)?e.checked=oe.inArray(oe(e).val(),t)>-1:void 0}},ie.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var gt=/^(?:focusinfocus|focusoutblur)$/;oe.extend(oe.event,{trigger:function(t,n,i,r){var o,a,s,c,u,p,l,d=[i||X],f=ne.call(t,"type")?t.type:t,h=ne.call(t,"namespace")?t.namespace.split("."):[];if(a=s=i=i||X,3!==i.nodeType&&8!==i.nodeType&&!gt.test(f+oe.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),u=f.indexOf(":")<0&&"on"+f,t=t[oe.expando]?t:new oe.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:oe.makeArray(n,[t]),l=oe.event.special[f]||{},r||!l.trigger||l.trigger.apply(i,n)!==!1)){if(!r&&!l.noBubble&&!oe.isWindow(i)){for(c=l.delegateType||f,gt.test(c+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(i.ownerDocument||X)&&d.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=d[o++])&&!t.isPropagationStopped();)t.type=o>1?c:l.bindType||f,p=($e.get(a,"events")||{})[t.type]&&$e.get(a,"handle"),p&&p.apply(a,n),p=u&&a[u],p&&p.apply&&Ee(a)&&(t.result=p.apply(a,n),t.result===!1&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||l._default&&l._default.apply(d.pop(),n)!==!1||!Ee(i)||u&&oe.isFunction(i[f])&&!oe.isWindow(i)&&(s=i[u],s&&(i[u]=null),oe.event.triggered=f,i[f](),oe.event.triggered=void 0,s&&(i[u]=s)),t.result}},simulate:function(e,t,n){var i=oe.extend(new oe.Event,n,{type:e,isSimulated:!0});oe.event.trigger(i,null,t)}}),oe.fn.extend({trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?oe.event.trigger(e,t,n,!0):void 0}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){oe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||oe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){oe.event.simulate(t,e.target,oe.event.fix(e))};oe.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=$e.access(i,t);r||i.addEventListener(e,n,!0),$e.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=$e.access(i,t)-1;r?$e.access(i,t,r):(i.removeEventListener(e,n,!0),$e.remove(i,t))}}});var mt=e.location,vt=oe.now(),bt=/\?/;oe.parseJSON=function(e){return JSON.parse(e+"")},oe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(i){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+t),n};var wt=/#.*$/,xt=/([?&])_=[^&]*/,yt=/^(.*?):[ \t]*([^\r\n]*)$/gm,_t=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,St=/^(?:GET|HEAD)$/,Et=/^\/\//,$t={},Ct={},Tt="*/".concat("*"),Pt=X.createElement("a");Pt.href=mt.href,oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:_t.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Tt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?F(F(e,oe.ajaxSettings),t):F(oe.ajaxSettings,e)},ajaxPrefilter:j($t),ajaxTransport:j(Ct),ajax:function(t,n){function i(t,n,i,s){var u,l,b,w,y,S=n;2!==x&&(x=2,c&&e.clearTimeout(c),r=void 0,a=s||"",_.readyState=t>0?4:0,u=t>=200&&300>t||304===t,i&&(w=G(d,_,i)),w=z(d,w,_,u),u?(d.ifModified&&(y=_.getResponseHeader("Last-Modified"),y&&(oe.lastModified[o]=y),y=_.getResponseHeader("etag"),y&&(oe.etag[o]=y)),204===t||"HEAD"===d.type?S="nocontent":304===t?S="notmodified":(S=w.state,l=w.data,b=w.error,u=!b)):(b=S,!t&&S||(S="error",0>t&&(t=0))),_.status=t,_.statusText=(n||S)+"",u?g.resolveWith(f,[l,S,_]):g.rejectWith(f,[_,S,b]),_.statusCode(v),v=void 0,p&&h.trigger(u?"ajaxSuccess":"ajaxError",[_,d,u?l:b]),m.fireWith(f,[_,S]),p&&(h.trigger("ajaxComplete",[_,d]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,o,a,s,c,u,p,l,d=oe.ajaxSetup({},n),f=d.context||d,h=d.context&&(f.nodeType||f.jquery)?oe(f):oe.event,g=oe.Deferred(),m=oe.Callbacks("once memory"),v=d.statusCode||{},b={},w={},x=0,y="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!s)for(s={};t=yt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=w[n]=w[n]||e,b[e]=t),this},overrideMimeType:function(e){return x||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)v[t]=[v[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||y;return r&&r.abort(t),i(0,t),this}};if(g.promise(_).complete=m.add,_.success=_.done,_.error=_.fail,d.url=((t||d.url||mt.href)+"").replace(wt,"").replace(Et,mt.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=oe.trim(d.dataType||"*").toLowerCase().match(ye)||[""],null==d.crossDomain){u=X.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Pt.protocol+"//"+Pt.host!=u.protocol+"//"+u.host}catch(S){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=oe.param(d.data,d.traditional)),B($t,d,n,_),2===x)return _;p=oe.event&&d.global,p&&0===oe.active++&&oe.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!St.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(bt.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=xt.test(o)?o.replace(xt,"$1_="+vt++):o+(bt.test(o)?"&":"?")+"_="+vt++)),d.ifModified&&(oe.lastModified[o]&&_.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&_.setRequestHeader("If-None-Match",oe.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&_.setRequestHeader("Content-Type",d.contentType),_.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Tt+"; q=0.01":""):d.accepts["*"]);for(l in d.headers)_.setRequestHeader(l,d.headers[l]);if(d.beforeSend&&(d.beforeSend.call(f,_,d)===!1||2===x))return _.abort();y="abort";for(l in{success:1,error:1,complete:1})_[l](d[l]);if(r=B(Ct,d,n,_)){if(_.readyState=1,p&&h.trigger("ajaxSend",[_,d]),2===x)return _;d.async&&d.timeout>0&&(c=e.setTimeout(function(){_.abort("timeout")},d.timeout));try{x=1,r.send(b,i)}catch(S){if(!(2>x))throw S;i(-1,S)}}else i(-1,"No Transport");return _},getJSON:function(e,t,n){return oe.get(e,t,n,"json")},getScript:function(e,t){return oe.get(e,void 0,t,"script")}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,n,i,r){return oe.isFunction(n)&&(r=r||i,i=n,n=void 0),oe.ajax(oe.extend({url:e,type:t,dataType:r,data:n,success:i},oe.isPlainObject(e)&&e))}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(e){var t;return oe.isFunction(e)?this.each(function(t){oe(this).wrapAll(e.call(this,t))}):(this[0]&&(t=oe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return oe.isFunction(e)?this.each(function(t){oe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=oe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(n){oe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return!oe.expr.filters.visible(e)},oe.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var It=/%20/g,kt=/\[\]$/,At=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var n,i=[],r=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){r(this.name,this.value)});else for(n in e)W(n,e[n],t,r);return i.join("&").replace(It,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&Nt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!Ne.test(e))}).map(function(e,t){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Mt={0:200,1223:204},Ot=oe.ajaxSettings.xhr();ie.cors=!!Ot&&"withCredentials"in Ot,ie.ajax=Ot=!!Ot,oe.ajaxTransport(function(t){var n,i;return ie.cors||Ot&&!t.crossDomain?{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Mt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(c){if(n)throw c}},abort:function(){n&&n()}}:void 0}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=oe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),X.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Lt=[],Rt=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||oe.expando+"_"+vt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=t.jsonp!==!1&&(Rt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=oe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Rt,"$1"+r):t.jsonp!==!1&&(t.url+=(bt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||oe.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){void 0===o?oe(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,Lt.push(r)),a&&oe.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),oe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||X;var i=he.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=d([e],t,r),r&&r.length&&oe(r).remove(),oe.merge([],i.childNodes))};var Ut=oe.fn.load;oe.fn.load=function(e,t,n){if("string"!=typeof e&&Ut)return Ut.apply(this,arguments);var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=oe.trim(e.slice(s)),e=e.slice(0,s)),oe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&oe.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?oe("<div>").append(oe.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length},oe.offset={setOffset:function(e,t,n){var i,r,o,a,s,c,u,p=oe.css(e,"position"),l=oe(e),d={};"static"===p&&(e.style.position="relative"),s=l.offset(),o=oe.css(e,"top"),c=oe.css(e,"left"),u=("absolute"===p||"fixed"===p)&&(o+c).indexOf("auto")>-1,u?(i=l.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(c)||0),oe.isFunction(t)&&(t=t.call(e,n,oe.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):l.css(d)}},oe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,oe.contains(t,i)?(r=i.getBoundingClientRect(),n=q(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===oe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(i=e.offset()),i.top+=oe.css(e[0],"borderTopWidth",!0),i.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-oe.css(n,"marginTop",!0),left:t.left-i.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||Ke})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;oe.fn[e]=function(i){return Se(this,function(e,i,r){var o=q(e);return void 0===r?o?o[t]:e[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r)},e,i,arguments.length)}}),oe.each(["top","left"],function(e,t){oe.cssHooks[t]=T(ie.pixelPosition,function(e,n){return n?(n=C(e,t),Xe.test(n)?oe(e).position()[t]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){oe.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return Se(this,function(t,n,i){var r;return oe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?oe.css(t,n,a):oe.style(t,n,i,a);
},t,o?i:void 0,o,null)}})}),oe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var Vt=e.jQuery,Ht=e.$;return oe.noConflict=function(t){return e.$===oe&&(e.$=Ht),t&&e.jQuery===oe&&(e.jQuery=Vt),oe},t||(e.jQuery=e.$=oe),oe}),jQuery.noConflict(!0)}!function(){var e=window;!e||void 0!==e.PP&&null!==e.pp||(e.PP=PPModule(JQueryModule()),e.ppSettings&&e.PP.boot())}()}();